{"version":3,"sources":["webpack:///blinktrade.min.js","webpack:///webpack/bootstrap 8f88ac3b59a1d4b5f16d","webpack:///./src/index.js","webpack:///./src/constants/brokers.js","webpack:///./src/ws.js","webpack:///external \"nodeify\"","webpack:///external \"eventemitter2\"","webpack:///./src/listener.js","webpack:///./src/constants/messages.js","webpack:///external \"ramda\"","webpack:///./src/constants/requestTypes.js","webpack:///./src/constants/actionTypes.js","webpack:///./src/constants/events.js","webpack:///./src/util/utils.js","webpack:///./src/trade.js","webpack:///./src/transports/websocket.js","webpack:///external \"fingerprintjs2\"","webpack:///./src/transports/transport.js","webpack:///./src/constants/common.js","webpack:///external \"ws\"","webpack:///./src/util/macaddress.js","webpack:///external \"macaddress\"","webpack:///./src/util/hash32.js","webpack:///./src/util/stun.js","webpack:///external \"ip\"","webpack:///external \"dgram\"","webpack:///external \"os\"","webpack:///./src/rest.js","webpack:///./src/transports/rest.js","webpack:///external \"url\"","webpack:///external \"sjcl\"","webpack:///external \"fetch-ponyfill\""],"names":["module","exports","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","BlinkTradeRest","BlinkTradeWS","Brokers","undefined","_brokers","_brokers2","_ws","_ws2","_rest","_rest2","SURBITCOIN","VBTC","FOXBIT","TESTNET","URDUBIT","CHILEBIT","_objectWithoutProperties","keys","target","i","indexOf","prototype","hasOwnProperty","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","_extends","assign","arguments","length","source","key","_createClass","defineProperties","props","descriptor","protoProps","staticProps","_get","get","object","property","receiver","Function","desc","getOwnPropertyDescriptor","parent","getPrototypeOf","getter","_nodeify","_nodeify2","_listener","_events","_messages","_utils","_trade","_trade2","_websocket","_websocket2","_TradeBase","params","this","_this","transport","session","callback","connect","disconnect","msg","sendMessageAsPromise","_this2","d","Date","MsgType","ActionMsgReq","HEARTBEAT","TestReqID","getTime","SendTime","extend","Promise","resolve","reject","send","then","data","Latency","now","catch","nodeify","_ref","_this3","username","password","secondFactor","brokerId","userAgent","isNode","os","UserAgent","type","release","UserAgentLanguage","UserAgentPlatform","platform","arch","UserAgentTimezoneOffset","getTimezoneOffset","window","navigator","language","LOGIN","UserReqID","generateRequestId","BrokerID","Username","Password","UserReqTyp","SecondFactor","UserStatus","LOGOUT","profile","_session$Profile","Profile","_this4","emitterPromise","registerListener","BALANCE","balance","eventEmitter","emit","symbols","_this5","SECURITY_STATUS_SUBSCRIBE","SecurityStatusReqID","SubscriptionRequestType","Instruments","formatTicker","SellVolume","LowPx","LastPx","BestAsk","HighPx","BuyVolume","BestBid","registerEventEmitter","ticker","Market","Symbol","sendMessage","_this6","MD_FULL_REFRESH","MDReqID","MarketDepth","MDUpdateType","MDEntryTypes","subscribeEvent","MDBkTyp","MDIncGrp","map","order","dataOrder","index","MDEntryPositionNo","price","MDEntryPx","size","MDEntrySize","side","MDEntryType","userId","UserID","orderId","OrderID","symbol","time","MDEntryDate","MDEntryTime","orderbookEvent","EVENTS","ORDERBOOK","MDUpdateAction","bidOfferData","tradeEvent","TRADES","tradeData","formatOrderBook","level","err","_this7","event","EXECUTION_REPORT","ExecType","_ref2","since","filter","_ref2$page","page","Page","_ref2$pageSize","pageSize","PageSize","TRADE_HISTORY","TradeHistoryReqID","Filter","Since","format","formatTradeHistory","_this8","_ref3","_ref3$currency","currency","depositMethodId","deposit","DEPOSIT_REFRESH","requestDeposit","ClOrdID","_ref4","_this9","amount","_ref4$currency","_ref4$method","method","withdraw","WITHDRAW_REFRESH","requestWithdraw","require","getListeners","listeners","parseInt","Math","random","String","getListener","msgType","getKey","messages","getRequest","store","setRequest","promise","set","deleteRequest","delete","getEventEmitter","emitters","Map","_interopRequireWildcard","newObj","ActionMsgRes","MsgActionRes","MsgActionReq","_ramda","_requestTypes","reqs","_actionTypes","actions","msgToAction","compose","invertObj","head","1","BE","V","x","SECURITY_LIST","SecurityReqID","e","D","ORDER_SEND","F","ORDER_CANCEL","U0","SIGNUP","U2","BalanceReqID","U6","WITHDRAW_REQUEST","WithdrawReqID","U4","ORDER_HISTORY","OrdersReqID","U18","DEPOSIT_REQUEST","DepositReqID","U20","DEPOSIT_METHODS","DepositMethodReqID","U24","WITHDRAW_CONFIRM","U26","WITHDRAW_LIST","WithdrawListReqID","U28","BROKER_LIST","BrokerListReqID","U30","DEPOSIT_LIST","DepositListReqID","U32","U34","LEDGER_LIST","LedgerListReqID","U38","PROFILE_UPDATE","UpdateReqID","U50","API_KEY_LIST","APIKeyListReqID","U52","API_KEY_CREATE","APIKeyCreateReqID","U54","API_KEY_REVOKE","APIKeyRevokeReqID","U70","WITHDRAW_CANCEL","WithdrawCancelReqID","U78","WITHDRAW_COMMENT","B0","DEPOSIT_PROCESS","ProcessDepositReqID","B2","CUSTOMER_LIST","CustomerListReqID","B4","KYC_REQUEST","CustomerReqID","B6","WITHDRAW_PROCESS","ProcessWithdrawReqID","B8","KYC_VERIFY","VerifyCustomerReqID","0","BF","W","X","MD_INCREMENT","8","y","f","U3","U7","U5","U9","U19","U21","U23","U25","U27","U29","U31","U33","U35","U39","U51","U53","U55","U71","U79","B1","B3","B5","B9","B7","B11","CUSTOMER_REFRESH","ReqID","ResetPasswordReqID","EnableTwoFactorReqID","TradersRankReqID","PositionReqID","SECURITY_STATUS_UPDATE","SECURITY_STATUS_UNSUBSCRIBE","MD_TRADES","MD_TRADES_UNSUBSCRIBE","MD_UNSUBSCRIBE","MD_OPENING","OB_NEW_ORDER","OB_UPDATE_ORDER","OB_DELETE_ORDER","OB_DELETE_ORDERS_THRU","EXECUTION_REPORT_NEW","EXECUTION_REPORT_PARTIAL","EXECUTION_REPORT_EXECUTION","EXECUTION_REPORT_CANCELED","EXECUTION_REPORT_REJECTED","TRADE_NEW","LOGIN_REQUIRED","LOGIN_CLOSE","CHANGE_PASSWORD","WITHDRAW_FILTER","WITHDRAW_SET_NEW_VISIBLE","DEPOSIT_FILTER","DEPOSIT_SET_NEW_VISIBLE","LEDGER_FILTER","ORDER_BOOK_TRADE_NEW","ORDER_BOOK_NEW_ORDER","ORDER_BOOK_UPDATE_ORDER","ORDER_BOOK_DELETE_ORDER","ORDER_BOOK_DELETE_ORDERS_THRU","2","3","4","_defineProperty","formatColumns","field","list","zipObj","Columns","TradeHistoryGrp","groupBy","prop","_data$MDFullGrp$filte","MDFullGrp","reduce","prev","push","bids","asks","TradeBase","clientId","ClientID","_ref$page","_ref$pageSize","Side","OrdType","Price","OrderQty","param","_ref3$page","_ref3$pageSize","_ref3$status","status","StatusList","reqId","Method","Amount","Currency","Data","_ref5","WithdrawID","withdrawId","confirmationToken","CONFIRM_WITHDRAW","ConfirmationToken","CANCEL_WITHDRAW","_ref6","_ref6$page","_ref6$pageSize","_ref6$status","_ref7","_ref7$currency","DepositMethodID","Value","_ref8","_ref8$page","_ref8$pageSize","_fingerprintjs","_fingerprintjs2","_eventemitter","_transport","_transport2","WebSocketTransport","_Transport","stun","local","public","getStun","getFingerPrint","fingerPrint","headers","EventEmitter2","wildcard","delimiter","request","WebSocket","socket","endpoint","onopen","onOpen","bind","onclose","onClose","onerror","onError","onmessage","onMessage","close","connected","error","readyState","STUNTIP","FingerPrint","JSON","stringify","parse","Error","Detail","Description","emitter","listener","dispatchPromise","dispatchEventEmitters","dispatchListeners","customFingerprint","getMac","macAddress","isBrowser","abs","encodeByteArray","on","onAny","offAny","once","many","times","removeListener","removeAllListeners","events","_common","_common2","Transport","env","url","prod","testnet","document","ws","rest","_macaddress2","all","hashCode","str","hash","charCodeAt","macAddresses","forEach","iface","mac","_macaddress","SEED32","CONSTANT32","mix32_","mix","a","b","toSigned_","n","wordAt_","bytes","offset","keylen","seed","addIPAddress","ipAddress","match","stunIp","_dgram2","createSocket","STUN_HEADER_LENGTH","stunRequest","Buffer","STUN_METHOD_REQUEST","STUN_BINDING_CLASS","STUN_MAGIC_COOKIE","STUN_TID_MAX","pow","STUN_ATTR_MAPPED_ADDRESS","STUN_ATTR_XOR_MAPPED_ADDRESS","STUN_ATTR_XOR_MAPPED_ADDRESS_ALT","stunTxId","stunServers","writeUInt16BE","writeUInt32BE","xor","tmp","len","block","readUInt8","bit1","bit2","msgHeader","slice","msgAttrs","attrType","readUInt16BE","attrBuffLength","blockOut","family","address","_ip2","toString","magic","tid","xaddr","addr","concat","_slicedToArray","port","host","sliceIterator","arr","_arr","_n","_d","_e","_s","_i","iterator","next","done","Array","isArray","_ip","_dgram","path","fetchTrade","fetchPublic","_ref$limit","limit","_ref$since","_url","_url2","_sjcl","_sjcl2","_fetchPonyfill2","_fetchPonyfill3","_fetchPonyfill","fetch","RestTransport","secret","body","timeStamp","hexKey","codec","utf8String","toBits","hmac","misc","sha256","Signature","hex","fromBits","encrypt","Content-Type","Nonce","APIKey","api","response","json","Status","Responses"],"mappings":"AAAAA,OAAOC,QACE,SAAUC,GCGnB,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAH,OAGA,IAAAD,GAAAK,EAAAD,IACAH,WACAK,GAAAF,EACAG,QAAA,EAUA,OANAL,GAAAE,GAAAI,KAAAR,EAAAC,QAAAD,IAAAC,QAAAE,GAGAH,EAAAO,QAAA,EAGAP,EAAAC,QAvBA,GAAAI,KAqCA,OATAF,GAAAM,EAAAP,EAGAC,EAAAO,EAAAL,EAGAF,EAAAQ,EAAA,GAGAR,EAAA,KDOM,SAASH,EAAQC,EAASE,GAE/B,YAmBA,SAASS,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAjBvFG,OAAOC,eAAehB,EAAS,cAC7BiB,OAAO,IAETjB,EAAQkB,eAAiBlB,EAAQmB,aAAenB,EAAQoB,QAAUC,ME9BnE,IAAAC,GAAApB,EAAA,GFkCKqB,EAAYZ,EAAuBW,GEjCxCE,EAAAtB,EAAA,GFqCKuB,EAAOd,EAAuBa,GEpCnCE,EAAAxB,EAAA,IFwCKyB,EAAShB,EAAuBe,EAIpC1B,GEzCCoB,QFyCiBG,EAAUT,QAC5Bd,EEzCCmB,aFyCsBM,EAAKX,QAC5Bd,EEzCCkB,eFyCwBS,EAAOb,SAwB3B,SAASf,EAAQC,GAEtB,YAEAe,QAAOC,eAAehB,EAAS,cAC7BiB,OAAO,IAETjB,EAAQc,SGpGPc,WAAY,EACZC,KAAM,EACNC,OAAQ,EACRC,QAAS,EACTC,QAAS,EACTC,SAAU,IH0GN,SAASlC,EAAQC,EAASE,GAE/B,YAkCA,SAASS,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAEvF,QAASsB,GAAyBtB,EAAKuB,GAAQ,GAAIC,KAAa,KAAK,GAAIC,KAAKzB,GAAWuB,EAAKG,QAAQD,GAAM,GAAkBtB,OAAOwB,UAAUC,eAAejC,KAAKK,EAAKyB,KAAcD,EAAOC,GAAKzB,EAAIyB,GAAM,OAAOD,GAEnN,QAASK,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMvC,GAAQ,IAAKuC,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOxC,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BuC,EAAPvC,EAElO,QAASyC,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAASV,UAAYxB,OAAOoC,OAAOD,GAAcA,EAAWX,WAAaa,aAAenC,MAAOgC,EAAUI,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeL,IAAYnC,OAAOyC,eAAiBzC,OAAOyC,eAAeP,EAAUC,GAAcD,EAASQ,UAAYP,GAxCjenC,OAAOC,eAAehB,EAAS,cAC7BiB,OAAO,GAGT,IAAIyC,GAAW3C,OAAO4C,QAAU,SAAUvB,GAAU,IAAK,GAAIC,GAAI,EAAOuB,UAAUC,OAAdxB,EAAsBA,IAAK,CAAE,GAAIyB,GAASF,UAAUvB,EAAI,KAAK,GAAI0B,KAAOD,GAAc/C,OAAOwB,UAAUC,eAAejC,KAAKuD,EAAQC,KAAQ3B,EAAO2B,GAAOD,EAAOC,IAAY,MAAO3B,IAEnP4B,EAAe,WAAc,QAASC,GAAiB7B,EAAQ8B,GAAS,IAAK,GAAI7B,GAAI,EAAO6B,EAAML,OAAVxB,EAAkBA,IAAK,CAAE,GAAI8B,GAAaD,EAAM7B,EAAI8B,GAAWd,WAAac,EAAWd,aAAc,EAAOc,EAAWZ,cAAe,EAAU,SAAWY,KAAYA,EAAWb,UAAW,GAAMvC,OAAOC,eAAeoB,EAAQ+B,EAAWJ,IAAKI,IAAiB,MAAO,UAAUxB,EAAayB,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBtB,EAAYJ,UAAW6B,GAAiBC,GAAaJ,EAAiBtB,EAAa0B,GAAqB1B,MAE5hB2B,EAAO,QAASC,GAAIC,EAAQC,EAAUC,GAA2B,OAAXF,IAAiBA,EAASG,SAASpC,UAAW,IAAIqC,GAAO7D,OAAO8D,yBAAyBL,EAAQC,EAAW,IAAapD,SAATuD,EAAoB,CAAE,GAAIE,GAAS/D,OAAOgE,eAAeP,EAAS,OAAe,QAAXM,EAAmB,OAAkCP,EAAIO,EAAQL,EAAUC,GAAoB,GAAI,SAAWE,GAAQ,MAAOA,GAAK3D,KAAgB,IAAI+D,GAASJ,EAAKL,GAAK,IAAelD,SAAX2D,EAA4C,MAAOA,GAAOzE,KAAKmE,IItG7dO,EAAA/E,EAAA,GJ0GKgF,EAAYvE,EAAuBsE,GIxGxCE,GADAjF,EAAA,GACAA,EAAA,IAMAkF,EAAAlF,EAAA,IAQAmF,EAAAnF,EAAA,GACAoF,EAAApF,EAAA,IAEAqF,EAAArF,EAAA,IJqGKsF,EAAU7E,EAAuB4E,GIpGtCE,EAAAvF,EAAA,IJwGKwF,EAAc/E,EAAuB8E,GItGpCtE,EJsIc,SAAUwE,GI9H5B,QAAAxE,GAAYyE,GAAyBnD,EAAAoD,KAAA1E,EAAA,IAAA2E,GAAAjD,EAAAgD,MAAA1E,EAAAsC,WAAA1C,OAAAgE,eAAA5D,IAAAZ,KAAAsF,KAC7BD,GAD6B,OAGnCE,GAAKC,UAAYH,EAAOG,WAAa,GAAAL,GAAA5E,QAAuB8E,GAC5DE,EAAKE,WAJ8BF,EJufpC,MAxXA9C,GAAU7B,EAAcwE,GAexB3B,EAAa7C,IACX4C,IAAK,UACL9C,MAAO,SIzIFgF,GACN,MAAOJ,MAAKE,UAAUG,QAAQD,MJ4I7BlC,IAAK,aACL9C,MAAO,WIzIR,MAAO4E,MAAKE,UAAUI,gBJ6IrBpC,IAAK,OACL9C,MAAO,SI3ILmF,GACH,MAAOP,MAAKE,UAAUM,qBAAqBD,MJ8I1CrC,IAAK,YACL9C,MAAO,SI5IAgF,GAAsC,GAAAK,GAAAT,KACxCU,EAAI,GAAIC,MACRJ,GACJK,QAASpB,EAAAqB,aAAaC,UACtBC,UAAWL,EAAEM,UACbC,SAAUP,EAAEM,UAGd,OAAO3B,GAAApE,QAAQiG,OAAO,GAAIC,SAAQ,SAACC,EAASC,GAC1C,MAAOZ,GAAKa,KAAKf,GAAKgB,KAAK,SAAAC,GACzB,MAAOJ,QACFI,GACHC,QAAS,GAAId,MAAKA,KAAKe,OAASF,EAAKP,cAEtCU,MAAMN,MACPO,QAAQxB,MJgJXlC,IAAK,QACL9C,MAAO,SAAeyG,EIzItBzB,GAAsC,GAAA0B,GAAA9B,KALjC+B,EAKiCF,EALjCE,SAAUC,EAKuBH,EALvBG,SAAUC,EAKaJ,EALbI,aAAcC,EAKDL,EALCK,SAMpCC,QACJ,IAAKnC,KAAKoC,OAOH,CACL,GAAMC,GAAKhI,EAAQ,GACnB8H,IACEG,UAAcD,EAAGE,OAAjB,IAA2BF,EAAGG,UAC9BC,kBAAmB,QACnBC,kBAAsBL,EAAGM,WAAzB,KAAwCN,EAAGO,OAA3C,IACAC,yBAAyB,GAAIlC,OAAOmC,yBAZtCX,IACEG,UAAWS,OAAOC,UAAUb,UAC5BM,kBAAmBM,OAAOC,UAAUC,SACpCP,kBAAmBK,OAAOC,UAAUL,SACpCE,yBAAyB,GAAIlC,OAAOmC,oBAYxC,IAAMvC,MACJK,QAASpB,EAAAqB,aAAaqC,MACtBC,WAAW,EAAA7D,EAAA8D,qBACXC,SAAUnB,GAAYlC,KAAKkC,SAC3BoB,SAAUvB,EACVwB,SAAUvB,EACVwB,WAAY,KACTrB,EAOL,OAJIF,KACF1B,EAAIkD,aAAexB,GAGd5C,EAAApE,QAAQiG,OAAO,GAAIC,SAAQ,SAACC,EAASC,GAC1C,MAAOS,GAAKR,KAAKf,GAAKgB,KAAK,SAAAC,GACzB,MAAwB,KAApBA,EAAKkC,YACP5B,EAAK3B,QAAUqB,EACRJ,EAAQI,IAGVH,EAAOG,KACbG,MAAMN,MACPO,QAAQxB,MJkJXlC,IAAK,SACL9C,MAAO,SIhJHgF,GACL,GAAMG,IACJK,QAASpB,EAAAqB,aAAa8C,OACtBN,SAAUrD,KAAKkC,SACfiB,WAAW,EAAA7D,EAAA8D,qBACXE,SAAUtD,KAAKG,QAAQmD,SACvBE,WAAY,IAGd,OAAOnE,GAAApE,QAAQiG,OAAOlB,KAAKsB,KAAKf,IAAMqB,QAAQxB,MJmJ7ClC,IAAK,UACL9C,MAAO,QAASwI,GIjJXxD,GAAsC,GAAAyD,GACH7D,KAAKG,QAAQ2D,QAAzBF,EADevH,EAAAwH,GAAA,oBAE5C,OAAOxE,GAAApE,QAAQiG,OAAOC,QAAQC,QAAQwC,IAAUhC,QAAQxB,MJuJvDlC,IAAK,UACL9C,MAAO,SIrJFgF,GAA6C,GAAA2D,GAAA/D,IACnD,OAAOA,MAAKE,UAAU8D,eAAe,GAAI7C,SAAQ,SAACC,EAASC,GACzD,MAAO5C,GAAAnD,EAAAoB,UAAAkB,WAAA1C,OAAAgE,eAAA5D,EAAAoB,WAAA,UAAAqH,GAAArJ,KAAAqJ,EAAc3D,GAAUmB,KAAK,SAACC,GAKnC,OAJA,EAAAlC,EAAA2E,kBAAiBzE,EAAAqB,aAAaqD,QAAS,SAACC,GAEtC,MADA/D,IAAYA,EAAS,KAAM+D,GACpBJ,EAAK7D,UAAUkE,aAAaC,KAA5B9E,EAAA2E,QAA0CC,KAE5C/C,EAAQI,KACdG,MAAMN,SJ2JVnD,IAAK,kBACL9C,MAAO,SIxJMkJ,EAAwBlE,GAA6C,GAAAmE,GAAAvE,KAC7EO,GACJK,QAASpB,EAAAqB,aAAa2D,0BACtBC,qBAAqB,EAAAnF,EAAA8D,qBACrBsB,wBAAyB,IACzBC,YAAaL,GAGTM,EAAe,SAACpD,GACpB,MAAA3D,MACK2D,GACHqD,WAAYrD,EAAKqD,WAAa,IAC9BC,MAAOtD,EAAKsD,MAAQ,IACpBC,OAAQvD,EAAKuD,OAAS,IACtBC,QAASxD,EAAKwD,QAAU,IACxBC,OAAQzD,EAAKyD,OAAS,IACtBC,UAAW1D,EAAK0D,UAAY,IAC5BC,QAAS3D,EAAK2D,QAAU,MAI5B,OAAOnF,MAAKE,UAAU8D,eAAe,GAAI7C,SAAQ,SAACC,EAASC,GACzD,MAAOkD,GAAKjD,KAAKf,GAAKgB,KAAK,SAAAC,GACzBJ,EAAQwD,EAAapD,KACrB,EAAAlC,EAAA8F,sBAAqB,sBAAuB5D,EAAKiD,oBAAqB,SAACY,GAErE,MADAjF,IAAYA,EAAS,KAAMwE,EAAaS,IACjCd,EAAKrE,UAAUkE,aAAaC,KAAQgB,EAAOC,OAA3C,IAAqDD,EAAOE,OAAUX,EAAaS,QAE3F1D,MAAMN,KACPjB,MJ4JHlC,IAAK,oBACL9C,MAAO,SI1JQqJ,GAChB,GAAMlE,IACJK,QAASpB,EAAAqB,aAAa2D,0BACtBC,sBACAC,wBAAyB,IAI3B,OADA1E,MAAKE,UAAUsF,YAAYjF,GACpBkE,KJ6JNvG,IAAK,qBACL9C,MAAO,SI3JSkJ,EAAwBlE,GAA6C,GAAAqF,GAAAzF,KAChFO,GACJK,QAASpB,EAAAqB,aAAa6E,gBACtBC,SAAS,EAAArG,EAAA8D,qBACTsB,wBAAyB,IACzBkB,YAAa,EACbC,aAAc,IACdC,cAAe,IAAK,IAAK,KACzBnB,YAAaL,GAGTyB,EAAiB,SAACvE,GACD,MAAjBA,EAAKwE,SACPxE,EAAKyE,SAASC,IAAI,SAAAC,GAChB,GAAMC,IACJC,MAAOF,EAAMG,kBACbC,MAAOJ,EAAMK,UAAY,IACzBC,KAAMN,EAAMO,YAAc,IAC1BC,KAA4B,MAAtBR,EAAMS,YAAsB,MAAQ,OAC1CC,OAAQV,EAAMW,OACdC,QAASZ,EAAMa,QACfC,OAAQd,EAAMZ,OACd2B,KAAM,MAAIvG,MAAQwF,EAAMgB,YAAlB,IAAiChB,EAAMiB,aAG/C,QAAQjB,EAAMS,aACZ,IAAK,IACL,IAAK,IACH,GAAMS,SAAuB9H,EAAA+H,OAAOC,UAAUpB,EAAMqB,gBAC9CC,OAAoBrB,GAAW7D,KAAM8E,GAG3C,OADAjH,IAAYA,EAAS,KAAMqH,GACpBhC,EAAKvF,UAAUkE,aAAaC,KAAKgD,EAAgBI,EAC1D,KAAK,IACH,GAAMC,SAAmBnI,EAAA+H,OAAOK,OAAOxB,EAAMqB,gBACvCI,OAAiBxB,GAAW7D,KAAMmF,GAGxC,OADAtH,IAAYA,EAAS,KAAMwH,GACpBnC,EAAKvF,UAAUkE,aAAaC,KAAKqD,EAAYE,EACtD,KAAK,IACH,KACF,SACE,MAAO,MAEX,MAAO,QAKb,OAAO5H,MAAKE,UAAU8D,eAAe,GAAI7C,SAAQ,SAACC,EAASC,GACzD,MAAOoE,GAAKnE,KAAKf,GAAKgB,KAAK,SAAAC,GAEzB,OADA,EAAAlC,EAAA8F,sBAAqB,UAAW5D,EAAKmE,QAASI,GACvC3E,GAAQ,EAAA3B,EAAAoI,iBAAgBrG,EAAMiE,EAAKqC,UACzCnG,MAAM,SAAAoG,GAAA,MAAO1G,GAAO0G,OACrB3H,MJkKHlC,IAAK,uBACL9C,MAAO,SIhKWuK,GACnB,GAAMpF,IACJK,QAASpB,EAAAqB,aAAa6E,gBACtBC,UACAC,YAAa,EACblB,wBAAyB,IAI3B,OADA1E,MAAKE,UAAUsF,YAAYjF,GACpBoF,KJmKNzH,IAAK,kBACL9C,MAAO,SIjKMgF,GAAmC,GAAA4H,GAAAhI,IAOjD,QANA,EAAAV,EAAA2E,kBAAiB,IAAK,SAACzC,GACrBpB,GAAYA,EAASoB,EACrB,IAAMyG,GAAQ1I,EAAA+H,OAAOY,iBAAiB1G,EAAK2G,SAC3C,OAAOH,GAAK9H,UAAUkE,aAAaC,KAA5B9E,EAAA2I,iBAAA,IAAwDD,EAASzG,KAGnExB,KAAKE,UAAUkE,gBJsKrBlG,IAAK,eACL9C,MAAO,WI/JoC,GAAAgN,GAAArK,UAAAC,OAAA,GAAAxC,SAAAuC,UAAA,GAAAA,UAAA,MAL/BsK,EAK+BD,EAL/BC,MAAOC,EAKwBF,EALxBE,OAKwBC,EAAAH,EALhBI,KAAMC,EAKUjN,SAAA+M,EALH,EAKGA,EAAAG,EAAAN,EALAO,SAAUC,EAKVpN,SAAAkN,EALqB,GAKrBA,EAAtCtI,EAAsCrC,UAAA,GACtCwC,GACJK,QAASpB,EAAAqB,aAAagI,cACtBC,mBAAmB,EAAAxJ,EAAA8D,qBACnBqF,OACAG,WAGEN,IAAUA,EAAOtK,OAAS,IAC5BuC,EAAIwI,OAAST,GAGXD,GAA0B,gBAAVA,KAClB9H,EAAIyI,MAAQX,EAGd,IAAMY,IAAS,EAAAxJ,EAAAyJ,oBAAmBlJ,KAAK8H,MAEvC,OAAOzI,GAAApE,QAAQiG,OAAOlB,KAAKsB,KAAKf,GAAKgB,KAAK0H,IAASrH,QAAQxB,MJ4K1DlC,IAAK,iBACL9C,MAAO,WItK2C,GAAA+N,GAAAnJ,KAAAoJ,EAAArL,UAAAC,OAAA,GAAAxC,SAAAuC,UAAA,GAAAA,UAAA,MAAAsL,EAAAD,EAJpCE,WAIoC9N,SAAA6N,EAJzB,MAIyBA,EAJlBjO,EAIkBgO,EAJlBhO,MAAOmO,EAIWH,EAJXG,gBAIlCnJ,EAA6CrC,UAAA,GAC7CgI,EAAiB,SAACyD,GAEtB,MADApJ,IAAYA,EAAS,KAAMoJ,GACpBL,EAAKjJ,UAAUkE,aAAaC,KAA5B9E,EAAAkK,gBAAkDD,GAG3D,OAAOxJ,MAAKE,UAAU8D,eAAe,GAAI7C,SAAQ,SAACC,EAASC,GACzD,MAAO8H,GAAKO,gBAAiBJ,WAAUlO,QAAOmO,oBAAmBhI,KAAK,SAAAiI,GAEpE,OADA,EAAAlK,EAAA8F,sBAAqB,UAAWoE,EAAQG,QAAS5D,GAC1C3E,EAAQoI,KACd7H,MAAMN,KACPjB,MJmLHlC,IAAK,mBACL9C,MAAO,SIjLOgF,GACf,MAAO,IAAIe,SAAQ,SAACC,IAClB,EAAA9B,EAAA2E,kBAAiB,MAAO,SAACuF,GAEvB,MADApJ,IAAYA,EAASoJ,GACdpI,EAAQoI,UJsLlBtL,IAAK,kBACL9C,MAAO,SAAyBwO,EI7KhCxJ,GAA6C,GAAAyJ,GAAA7J,KAL9B8J,EAK8BF,EAL9BE,OAAQtI,EAKsBoI,EALtBpI,KAKsBuI,EAAAH,EALhBN,WAKgB9N,SAAAuO,EALL,MAKKA,EAAAC,EAAAJ,EALEK,SAKFzO,SAAAwO,EALW,UAKXA,EACxCjE,EAAiB,SAACmE,GAEtB,MADA9J,IAAYA,EAAS,KAAM8J,GACpBL,EAAK3J,UAAUkE,aAAaC,KAA5B9E,EAAA4K,iBAAmDD,GAG5D,OAAOlK,MAAKE,UAAU8D,eAAe,GAAI7C,SAAQ,SAACC,EAASC,GACzD,MAAOwI,GAAKO,iBAAkBN,SAAQtI,OAAM8H,WAAUW,WAAU1I,KAAK,SAAA2I,GAEnE,OADA,EAAA5K,EAAA8F,sBAAqB,UAAW8E,EAASP,QAAS5D,GAC3C3E,EAAQ8I,KACdvI,MAAMN,KACPjB,MJyLHlC,IAAK,oBACL9C,MAAO,SIvLQgF,GAChB,MAAO,IAAIe,SAAQ,SAACC,IAClB,EAAA9B,EAAA2E,kBAAiB,KAAM,SAACiG,GAEtB,MADA9J,IAAYA,EAAS8J,GACd9I,EAAQ8I,WJ6Lb5O,GACPqE,EAAQ1E,QAEVd,GAAQc,QI1LMK,GJ8LT,SAASpB,EAAQC,GKljBvBD,EAAAC,QAAAkQ,QAAA,YLwjBM,SAASnQ,EAAQC,GMxjBvBD,EAAAC,QAAAkQ,QAAA,kBN8jBM,SAASnQ,EAAQC,EAASE,GAE/B,YOpiBM,SAASiQ,KACd,MAAOC,GAGF,QAASnH,KACd,MAAOoH,UAAgB,IAAMC,KAAKC,SAAlBC,GAA6B,IAGxC,QAASC,GAAYC,GAC1B,MAAON,GAAUM,GAGnB,QAASC,GAAOC,EAAoBxK,GAClC,GAAMrC,GAAM6M,EAASxK,EAAIK,SAAS,GAC5BxF,EAAQmF,EAAIrC,EAClB,OAAOA,GAAM,IAAM9C,EAGd,QAAS4P,GAAWzK,GACzB,MAAO0K,GAAMvM,IAAIoM,iBAAqBvK,IAGjC,QAAS2K,GAAW3K,EAAc4K,GACvCF,EAAMG,IAAIN,iBAAqBvK,GAAM4K,GAGhC,QAASE,GAAc9K,GAC5B0K,EAAMK,OAAOR,iBAAqBvK,IAG7B,QAASgL,GAAgBhL,GAC9B,MAAOiL,GAAS9M,IAAIoM,iBAAqBvK,IAGpC,QAAS6E,GAAqBlH,EAAa9C,EAAegF,GAC/DoL,EAASJ,IAAIlN,EAAM,IAAM9C,EAAOgF,GAG3B,QAAS6D,GAAiB4G,EAAiBzK,GAChDmK,EAAUa,IAAIP,EAASzK,GP+fxBlF,OAAOC,eAAehB,EAAS,cAC7BiB,OAAO,IAETjB,EOziBemQ,eP0iBfnQ,EOtiBeiJ,oBPuiBfjJ,EOniBeyQ,cPoiBfzQ,EO1hBe6Q,aP2hBf7Q,EOvhBe+Q,aPwhBf/Q,EOphBekR,gBPqhBflR,EOjhBeoR,kBPkhBfpR,EO9gBeiL,uBP+gBfjL,EO3gBe8J,kBA5ChB,IAAAzE,GAAAnF,EAAA,GAEM4Q,EAAQ,GAAIQ,KACZD,EAAW,GAAIC,KACflB,EAAY,GAAIkB,MP4nBhB,SAASvR,EAAQC,EAASE,GAE/B,YAiBA,SAASqR,GAAwB3Q,GAAO,GAAIA,GAAOA,EAAIC,WAAc,MAAOD,EAAc,IAAI4Q,KAAa,IAAW,MAAP5Q,EAAe,IAAK,GAAImD,KAAOnD,GAAWG,OAAOwB,UAAUC,eAAejC,KAAKK,EAAKmD,KAAMyN,EAAOzN,GAAOnD,EAAImD,GAAgC,OAAtByN,GAAO1Q,QAAUF,EAAY4Q,EAflQzQ,OAAOC,eAAehB,EAAS,cAC7BiB,OAAO,IAETjB,EAAQyR,aAAezR,EAAQ0G,aAAe1G,EAAQ0R,aAAe1R,EAAQ2R,aAAetQ,MQ7pB7F,IAAAuQ,GAAA1R,EAAA,GACA2R,EAAA3R,EAAA,GAAY4R,ERkqBAP,EAAwBM,GQjqBpCE,EAAA7R,EAAA,GAAY8R,ERqqBGT,EAAwBQ,GQnqBjCE,GAAc,EAAAL,EAAAM,SAAAN,EAAAO,WAAmB,EAAAP,EAAA7F,KAAA6F,EAAAQ,OAE1BT,kBACXU,GAAML,EAAQrL,UAAWmL,EAAKlL,WAC9B0L,IAAMN,EAAQjJ,MAAO+I,EAAK9I,WAC1BuJ,GAAMP,EAAQzG,gBAAiBuG,EAAKtG,SACpCgH,GAAMR,EAAQS,cAAeX,EAAKY,eAClCC,GAAMX,EAAQ3H,0BAA2ByH,EAAKxH,qBAC9CsI,GAAMZ,EAAQa,WAAYf,EAAKtC,SAC/BsD,GAAMd,EAAQe,aAAcjB,EAAKtC,SACjCwD,IAAMhB,EAAQiB,OAAQnB,EAAK9I,WAC3BkK,IAAMlB,EAAQjI,QAAS+H,EAAKqB,cAC5BC,IAAMpB,EAAQqB,iBAAkBvB,EAAKwB,eACrCC,IAAMvB,EAAQwB,cAAe1B,EAAK2B,aAClCC,KAAM1B,EAAQ2B,gBAAiB7B,EAAK8B,cACpCC,KAAM7B,EAAQ8B,gBAAiBhC,EAAKiC,oBACpCC,KAAMhC,EAAQiC,iBAAkBnC,EAAKwB,eACrCY,KAAMlC,EAAQmC,cAAerC,EAAKsC,mBAClCC,KAAMrC,EAAQsC,YAAaxC,EAAKyC,iBAChCC,KAAMxC,EAAQyC,aAAc3C,EAAK4C,kBACjCC,KAAM3C,EAAQtD,cAAeoD,EAAKnD,mBAClCiG,KAAM5C,EAAQ6C,YAAa/C,EAAKgD,iBAChCC,KAAM/C,EAAQgD,eAAgBlD,EAAKmD,aACnCC,KAAMlD,EAAQmD,aAAcrD,EAAKsD,iBACjCC,KAAMrD,EAAQsD,eAAgBxD,EAAKyD,mBACnCC,KAAMxD,EAAQyD,eAAgB3D,EAAK4D,mBACnCC,KAAM3D,EAAQ4D,gBAAiB9D,EAAK+D,qBACpCC,KAAM9D,EAAQ+D,iBAAkBjE,EAAKwB,eACrC0C,IAAMhE,EAAQiE,gBAAiBnE,EAAKoE,qBACpCC,IAAMnE,EAAQoE,cAAetE,EAAKuE,mBAClCC,IAAMtE,EAAQuE,YAAazE,EAAK0E,eAChCC,IAAMzE,EAAQ0E,iBAAkB5E,EAAK6E,sBACrCC,IAAM5E,EAAQ6E,WAAY/E,EAAKgF,sBAGpBpF,kBACXqF,GAAM/E,EAAQrL,UAAWmL,EAAKlL,WAC9BoQ,IAAMhF,EAAQjJ,MAAO+I,EAAK9I,WAC1BiO,GAAMjF,EAAQzG,gBAAiBuG,EAAKtG,SACpC0L,GAAMlF,EAAQmF,aAAcrF,EAAKtG,SACjC4L,GAAMpF,EAAQjE,iBAAkB+D,EAAKtC,SACrC6H,GAAMrF,EAAQS,cAAeX,EAAKY,eAClC4E,GAAMtF,EAAQ3H,0BAA2ByH,EAAKxH,qBAC9CiN,IAAMvF,EAAQjI,QAAS+H,EAAKqB,cAC5BqE,IAAMxF,EAAQqB,iBAAkBvB,EAAKwB,eACrCmE,IAAMzF,EAAQwB,cAAe1B,EAAK2B,aAClCiE,IAAM1F,EAAQhC,iBAAkB8B,EAAKwB,eACrCqE,KAAM3F,EAAQ2B,gBAAiB7B,EAAK8B,cACpCgE,KAAM5F,EAAQ8B,gBAAiBhC,EAAKiC,oBACpC8D,KAAM7F,EAAQ1C,gBAAiBwC,EAAK8B,cACpCkE,KAAM9F,EAAQiC,iBAAkBnC,EAAKwB,eACrCyE,KAAM/F,EAAQmC,cAAerC,EAAKsC,mBAClC4D,KAAMhG,EAAQsC,YAAaxC,EAAKyC,iBAChC0D,KAAMjG,EAAQyC,aAAc3C,EAAK4C,kBACjCwD,KAAMlG,EAAQtD,cAAeoD,EAAKnD,mBAClCwJ,KAAMnG,EAAQ6C,YAAa/C,EAAKgD,iBAChCsD,KAAMpG,EAAQgD,eAAgBlD,EAAKmD,aACnCoD,KAAMrG,EAAQmD,aAAcrD,EAAKsD,iBACjCkD,KAAMtG,EAAQsD,eAAgBxD,EAAKyD,mBACnCgD,KAAMvG,EAAQyD,eAAgB3D,EAAK4D,mBACnC8C,KAAMxG,EAAQ4D,gBAAiB9D,EAAK+D,qBACpC4C,KAAMzG,EAAQ+D,iBAAkBjE,EAAK+D,qBACrC6C,IAAM1G,EAAQiE,gBAAiBnE,EAAKoE,qBACpCyC,IAAM3G,EAAQoE,cAAetE,EAAKuE,mBAClCuC,IAAM5G,EAAQuE,YAAazE,EAAK0E,eAChCqC,IAAM7G,EAAQ6E,WAAY/E,EAAKgF,qBAC/BgC,IAAM9G,EAAQ0E,iBAAkB5E,EAAK6E,sBACrCoC,KAAM/G,EAAQgH,kBAGHtS,gBAAeuL,EAAYN,GAC3BF,eAAeQ,EAAYP,IR2qBlC,SAAS3R,EAAQC,GStvBvBD,EAAAC,QAAAkQ,QAAA,UT4vBM,SAASnQ,EAAQC,GAEtB,YAEAe,QAAOC,eAAehB,EAAS,cAC7BiB,OAAO,GUjwBGgY,SAAQ,QACRrS,YAAY,YACZoC,YAAY,YACZ0J,gBAAgB,gBAChBwG,qBAAqB,qBACrBtF,eAAe,eACfN,gBAAgB,gBAChBH,eAAe,eACfM,cAAc,cACd0F,uBAAuB,uBACvBpF,qBAAqB,qBACrBK,oBAAoB,oBACpByB,sBAAsB,sBACtBtB,kBAAkB,kBAClBG,mBAAmB,mBACnB/F,oBAAoB,oBACpBmG,kBAAkB,kBAClBsE,mBAAmB,mBACnBnE,cAAc,cACdoE,gBAAgB,gBAChB/O,sBAAsB,sBACtB8K,kBAAkB,kBAClBG,oBAAoB,oBACpBG,oBAAoB,oBACpBQ,sBAAsB,sBACtBG,oBAAoB,oBACpBG,gBAAgB,gBAChBG,uBAAuB,uBACvBG,sBAAsB,sBACtBtL,UAAU,UACVgE,UAAU,WVuwBjB,SAASzP,EAAQC,GAEtB,YAEAe,QAAOC,eAAehB,EAAS,cAC7BiB,OAAO,GW1yBG0F,aAAY,YAEZ2N,cAAc,cAEd7B,gBAAgB,gBAChB6G,yBAAyB,yBACzBjP,4BAA4B,4BAC5BkP,8BAA8B,8BAE9BC,YAAY,YACZC,wBAAwB,wBACxBtC,eAAe,eACf5L,kBAAkB,kBAClBmO,iBAAiB,iBACjBC,aAAa,aAEbC,eAAe,eACfC,kBAAkB,kBAClBC,kBAAkB,kBAClBC,wBAAwB,wBAExBhM,mBAAmB,mBACnBiM,uBAAuB,uBACvBC,2BAA2B,2BAC3BC,6BAA6B,6BAC7BC,4BAA4B,4BAC5BC,4BAA4B,4BAE5B5G,gBAAgB,gBAEhBX,aAAa,aACbE,eAAe,eAEfsH,YAAY,YACZ3L,gBAAgB,gBAEhBlB,SAAS,SAETyF,SAAS,SAETlK,QAAQ,QACRS,SAAS,SACT8Q,iBAAiB,iBACjBC,cAAc,cAEdC,kBAAkB,kBAElBzQ,UAAU,UAEViL,iBAAiB,iBAEjBb,gBAAgB,gBAChByB,kBAAkB,kBAClB6E,kBAAkB,kBAClBzK,mBAAmB,mBACnB0G,mBAAmB,mBACnBzC,mBAAmB,mBACnB8B,mBAAmB,mBACnB1C,mBAAmB,mBACnBqH,2BAA2B,2BAE3BjG,eAAe,eACfkG,iBAAiB,iBACjBrL,kBAAkB,kBAClB2G,kBAAkB,kBAClBtC,kBAAkB,kBAClBG,kBAAkB,kBAClB8G,0BAA0B,0BAE1B/F,cAAc,cACdgG,gBAAgB,iBXgzBvB,SAAS9a,EAAQC,GAEtB,YAEAe,QAAOC,eAAehB,EAAS,cAC7BiB,OAAO,GY33BH,IAAM6Z,0BAAuB,YACvBC,yBAAuB,YACvBC,4BAA0B,eAC1BC,4BAA0B,eAC1BC,kCAAgC,qBAGhClB,GADAjM,mBAAmB,mBACnBiM,uBAAuB,OACvBC,6BAA2B,UAC3BC,+BAA6B,YAC7BC,8BAA4B,WAC5BC,8BAA4B,UAG5BjN,WACXC,WACE2J,EAAKgE,EACL1I,EAAK2I,EACLG,EAAKF,EACLG,EAAKF,GAEP1N,QACEuJ,EAAK+D,GAEP/M,kBACEgJ,EAAKiD,EACL3H,EAAK4H,EACLkB,EAAKjB,EACLmB,EAAKlB,EACL/C,EAAKgD,KZm4BH,SAASra,EAAQC,EAASE,GAE/B,YAWA,SAASob,GAAgB1a,EAAKmD,EAAK9C,GAAiK,MAApJ8C,KAAOnD,GAAOG,OAAOC,eAAeJ,EAAKmD,GAAO9C,MAAOA,EAAOoC,YAAY,EAAME,cAAc,EAAMD,UAAU,IAAkB1C,EAAImD,GAAO9C,EAAgBL,EAT3MG,OAAOC,eAAehB,EAAS,cAC7BiB,OAAO,IAETjB,EAAQ0N,gBAAkB1N,EAAQ+O,mBAAqB/O,EAAQub,cAAgBla,MAE/E,IAAIqC,GAAW3C,OAAO4C,QAAU,SAAUvB,GAAU,IAAK,GAAIC,GAAI,EAAOuB,UAAUC,OAAdxB,EAAsBA,IAAK,CAAE,GAAIyB,GAASF,UAAUvB,EAAI,KAAK,GAAI0B,KAAOD,GAAc/C,OAAOwB,UAAUC,eAAejC,KAAKuD,EAAQC,KAAQ3B,EAAO2B,GAAOD,EAAOC,IAAY,MAAO3B,Iaz6BxPwP,EAAA1R,EAAA,EAEaqb,iBAAgB,SAACC,EAAO7N,GAAR,MAAkB,UAACtG,GAC9C,GAAc,IAAVsG,EAAa,CACf,GAAM8N,IAAO,EAAA7J,EAAA7F,MAAI,EAAA6F,EAAA8J,QAAOrU,EAAKsU,SAAUtU,EAAKmU,GAC5C,OAAOxU,SAAQC,QAARvD,KAAqB2D,EAArBiU,KAA4BE,EAAQC,KAG7C,MAAOzU,SAAQC,QAAQI,KAGZ0H,qBAAqB,SAACpB,GAAD,MAAW,UAACtG,GAC5C,GAAc,IAAVsG,EAAa,CACf,GAAMiO,IAAkB,EAAAhK,EAAAM,UACtB,EAAAN,EAAAiK,UAAQ,EAAAjK,EAAAkK,MAAK,YACb,EAAAlK,EAAA7F,MAAI,EAAA6F,EAAA8J,QAAOrU,EAAKsU,WAChBtU,EAAKuU,gBAEP,OAAO5U,SAAQC,QAARvD,KAAqB2D,GAAMuU,qBAGpC,MAAO5U,SAAQC,QAAQI,KAGZqG,kBAAkB,SAACrG,EAAMsG,GACpC,GAAc,IAAVA,EAAa,IAAAoO,GACQ1U,EAAK2U,UACzB7N,OAAO,SAAAnC,GAAA,MAA+B,MAAtBA,EAAMS,aAA6C,MAAtBT,EAAMS,cACnDwP,OAAO,SAACC,EAAMlQ,GACb,GAAMQ,GAA6B,MAAtBR,EAAMS,YAAsB,OAAS,MAOlD,QANCyP,EAAK1P,KAAU0P,EAAK1P,QAAa2P,MAChCnQ,EAAMK,UAAY,IAClBL,EAAMO,YAAc,IACpBP,EAAMW,OACNX,EAAMa,UAEDqP,OAVHE,EADOL,EACPK,KAAMC,EADCN,EACDM,IAad,OAAA3Y,MACK2D,GACH2U,eACG3U,EAAK+D,QACJgR,OACAC,WAMR,MAAOhV,Kb66BH,SAAStH,EAAQC,EAASE,GAE/B,YAsCA,SAASS,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAEvF,QAAS6B,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAtChH7B,OAAOC,eAAehB,EAAS,cAC7BiB,OAAO,GAGT,IAAI+C,GAAe,WAAc,QAASC,GAAiB7B,EAAQ8B,GAAS,IAAK,GAAI7B,GAAI,EAAO6B,EAAML,OAAVxB,EAAkBA,IAAK,CAAE,GAAI8B,GAAaD,EAAM7B,EAAI8B,GAAWd,WAAac,EAAWd,aAAc,EAAOc,EAAWZ,cAAe,EAAU,SAAWY,KAAYA,EAAWb,UAAW,GAAMvC,OAAOC,eAAeoB,EAAQ+B,EAAWJ,IAAKI,IAAiB,MAAO,UAAUxB,EAAayB,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBtB,EAAYJ,UAAW6B,GAAiBC,GAAaJ,EAAiBtB,EAAa0B,GAAqB1B,Mcj9BjiBsC,EAAA/E,EAAA,Gdy+BKgF,EAAYvE,EAAuBsE,Gcx+BxCI,EAAAnF,EAAA,GACAoF,EAAApF,EAAA,IACAiF,EAAAjF,EAAA,GAIMoc,Ed8+BW,Wcr+Bf,QAAAA,GAAY1W,GAAyBnD,EAAAoD,KAAAyW,GACnCzW,KAAK8H,MAAQ/H,EAAO+H,MACpB9H,KAAKkC,SAAWnC,EAAOmC,SdqxCxB,MA1SA/D,GAAasY,IACXvY,IAAK,iBACL9C,MAAO,Sc1+BK8G,GACblC,KAAKkC,SAAWA,Kd6+BfhE,IAAK,UACL9C,MAAO,Sc3+BFsb,EAAUtW,GAChB,GAAMG,IACJK,QAASpB,EAAAqB,aAAaqD,QACtBoJ,cAAc,EAAAhO,EAAA8D,qBAOhB,OAJIsT,KACFnW,EAAIoW,SAAWD,GAGVrX,EAAApE,QAAQiG,OAAOlB,KAAKsB,KAAKf,IAAMqB,QAAQxB,Md8+B7ClC,IAAK,WACL9C,MAAO,Wcp+BoC,GAAAyG,GAAA9D,UAAAC,OAAA,GAAAxC,SAAAuC,UAAA,GAAAA,UAAA,MAAA6Y,EAAA/U,EAP5C2G,KAAMC,EAOsCjN,SAAAob,EAP/B,EAO+BA,EAAAC,EAAAhV,EAN5C8G,SAAUC,EAMkCpN,SAAAqb,EANvB,GAMuBA,EAL5CvO,EAK4CzG,EAL5CyG,OAKMlI,EAAsCrC,UAAA,GACtCwC,GACJK,QAASpB,EAAAqB,aAAa8M,cACtBC,aAAa,EAAAtO,EAAA8D,qBACbqF,OACAG,WAGEN,KACF/H,EAAIwI,OAAST,EAGf,IAAMW,IAAS,EAAAxJ,EAAAiW,eAAc,aAAc1V,KAAK8H,MAEhD,OAAOzI,GAAApE,QAAQiG,OAAOlB,KAAKsB,KAAKf,GAAKgB,KAAK0H,IAASrH,QAAQxB,Mdg/B1DlC,IAAK,YACL9C,MAAO,SAAmBgN,Ecz+B1BhI,GAAsC,GAL7BuG,GAK6ByB,EAL7BzB,KAAMmD,EAKuB1B,EALvB0B,OAAQvD,EAKe6B,EALf7B,MAAOU,EAKQmB,EALRnB,OAMzB1G,GACJK,QAASpB,EAAAqB,aAAamM,WACtBrD,SAAS,EAAArK,EAAA8D,qBACTmC,OAAQ0B,EACR6P,KAAMnQ,EACNoQ,QAAS,IACTC,MAAOzQ,EACP0Q,SAAUnN,EACVzG,SAAUrD,KAAKkC,SAGjB,OAAO7C,GAAApE,QAAQiG,OAAOlB,KAAKsB,KAAKf,IAAMqB,QAAQxB,Mdi/B7ClC,IAAK,cACL9C,MAAO,Wc5+BoC,GAHlC8b,GAGkCnZ,UAAAC,OAAA,GAAAxC,SAAAuC,UAAA,GAAAA,UAAA,MAAtCqC,EAAsCrC,UAAA,GACtCgJ,EAAUmQ,EAAMnQ,QAAUmQ,EAAMnQ,QAAUmQ,EAC1C3W,GACJK,QAASpB,EAAAqB,aAAaqM,aAWxB,OARIgK,GAAMR,WACRnW,EAAIoJ,QAAUuN,EAAMR,UAGlBQ,EAAMnQ,UACRxG,EAAIyG,QAAUD,GAGT1H,EAAApE,QAAQiG,OAAOlB,KAAKsB,KAAKf,IAAMqB,QAAQxB,Mdu/B7ClC,IAAK,sBACL9C,MAAO,Wct+BoC,GAAAgO,GAAArL,UAAAC,OAAA,GAAAxC,SAAAuC,UAAA,GAAAA,UAAA,MAAAoZ,EAAA/N,EAX5CZ,KAAMC,EAWsCjN,SAAA2b,EAX/B,EAW+BA,EAAAC,EAAAhO,EAV5CT,SAAUC,EAUkCpN,SAAA4b,EAVvB,GAUuBA,EAAAC,EAAAjO,EAT5CkO,OAAQC,EASoC/b,SAAA6b,GATtB,IAAK,IAAK,IAAK,KASOA,EAR5C/O,EAQ4Cc,EAR5Cd,OACAoO,EAO4CtN,EAP5CsN,SAOMtW,EAAsCrC,UAAA,GACtCwC,GACJK,QAASpB,EAAAqB,aAAayN,cACtBC,mBAAmB,EAAAjP,EAAA8D,qBACnBqF,OACAG,WACA2O,aAGEjP,IAAUA,EAAOtK,SACnBuC,EAAIwI,OAAST,GAGXoO,IACFnW,EAAIoW,SAAWD,EAGjB,IAAMzN,IAAS,EAAAxJ,EAAAiW,eAAc,kBAAmB1V,KAAK8H,MAErD,OAAOzI,GAAApE,QAAQiG,OAAOlB,KAAKsB,KAAKf,GAAKgB,KAAK0H,IAASrH,QAAQxB,Mdq/B1DlC,IAAK,kBACL9C,MAAO,SAAyBwO,Ec9+BhCxJ,GAAsC,GALvB0J,GAKuBF,EALvBE,OAAQtI,EAKeoI,EALfpI,KAKeuI,EAAAH,EALTN,WAKS9N,SAAAuO,EALE,MAKFA,EAAAC,EAAAJ,EALSK,SAKTzO,SAAAwO,EALkB,UAKlBA,EACjCwN,GAAQ,EAAAlY,EAAA8D,qBACR7C,GACJK,QAASpB,EAAAqB,aAAa2M,iBACtBC,cAAe+J,EACf7N,QAAS6N,EACTC,OAAQxN,EACRyN,OAAQ5N,EACR6N,SAAUrO,EACVsO,KAAMpW,EAGR,OAAOnC,GAAApE,QAAQiG,OAAOlB,KAAKsB,KAAKf,IAAMqB,QAAQxB,Mdw/B7ClC,IAAK,kBACL9C,MAAO,SAAyByc,Ecl/BhCzX,GAAqC,GAJV0X,GAIUD,EAJtBE,WAAwBC,EAIFH,EAJEG,kBAAmB/V,EAIrB4V,EAJqB5V,aAKrD1B,GACJK,QAASpB,EAAAqB,aAAaoX,iBACtBxK,eAAe,EAAAnO,EAAA8D,qBACf0U,aAWF,OARIE,KACFzX,EAAI2X,kBAAoBF,GAGtB/V,IACF1B,EAAIkD,aAAexB,GAGd5C,EAAApE,QAAQiG,OAAOlB,KAAKsB,KAAKf,IAAMqB,QAAQxB,Mdy/B7ClC,IAAK,iBACL9C,MAAO,Scv/BK2c,EAAoB3X,GACjC,GAAMoX,IAAQ,EAAAlY,EAAA8D,qBACR7C,GACJK,QAASpB,EAAAqB,aAAasX,gBACtBnI,oBAAqBwH,EACrB7N,QAAS6N,EACTM,WAAYC,EAGd,OAAO1Y,GAAApE,QAAQiG,OAAOlB,KAAKsB,KAAKf,IAAMqB,QAAQxB,Md0/B7ClC,IAAK,qBACL9C,MAAO,Wc7+BoC,GAAAgd,GAAAra,UAAAC,OAAA,GAAAxC,SAAAuC,UAAA,GAAAA,UAAA,MAAAsa,EAAAD,EAV5C5P,KAAMC,EAUsCjN,SAAA6c,EAV/B,EAU+BA,EAAAC,EAAAF,EAT5CzP,SAAUC,EASkCpN,SAAA8c,EATvB,GASuBA,EAAAC,EAAAH,EAR5Cd,OAAQC,EAQoC/b,SAAA+c,GARtB,IAAK,IAAK,IAAK,KAQOA,EAP5CjQ,EAO4C8P,EAP5C9P,OACAoO,EAM4C0B,EAN5C1B,SAMMtW,EAAsCrC,UAAA,GACtCwC,GACJK,QAASpB,EAAAqB,aAAa+N,aACtBC,kBAAkB,EAAAvP,EAAA8D,qBAClBqF,OACAG,WACA2O,aAGEjP,IAAUA,EAAOtK,SACnBuC,EAAIwI,OAAST,GAGXoO,IACFnW,EAAIoW,SAAWD,EAGjB,IAAMzN,IAAS,EAAAxJ,EAAAiW,eAAc,iBAAkB1V,KAAK8H,MAEpD,OAAOzI,GAAApE,QAAQiG,OAAOlB,KAAKsB,KAAKf,GAAKgB,KAAK0H,IAASrH,QAAQxB,Md4/B1DlC,IAAK,iBACL9C,MAAO,Wct/BoC,GAAAod,GAAAza,UAAAC,OAAA,GAAAxC,SAAAuC,UAAA,GAAAA,UAAA,MAAA0a,EAAAD,EAJ7BlP,WAI6B9N,SAAAid,EAJlB,MAIkBA,EAJXrd,EAIWod,EAJXpd,MAAOmO,EAIIiP,EAJJjP,gBAIlCnJ,EAAsCrC,UAAA,GACtCyZ,GAAQ,EAAAlY,EAAA8D,qBACR7C,GACJK,QAASpB,EAAAqB,aAAaiN,gBACtBC,aAAcyJ,EACd7N,QAAS6N,EACTG,SAAUrO,EACVjG,SAAUrD,KAAKkC,SAQjB,OALiB,QAAboH,IACF/I,EAAImY,gBAAkBnP,EACtBhJ,EAAIoY,MAAQvd,GAGPiE,EAAApE,QAAQiG,OAAOlB,KAAKsB,KAAKf,IAAMqB,QAAQxB,MdigC7ClC,IAAK,wBACL9C,MAAO,Sc//BYgF,GACpB,GAAMG,IACJK,QAASpB,EAAAqB,aAAaoN,gBACtBC,oBAAoB,EAAA5O,EAAA8D,qBACpBC,SAAUrD,KAAKkC,SAGjB,OAAO7C,GAAApE,QAAQiG,OAAOlB,KAAKsB,KAAKf,IAAMqB,QAAQxB,MdkgC7ClC,IAAK,gBACL9C,MAAO,Wcp/BmB,GAAAwd,GAAA7a,UAAAC,OAAA,GAAAxC,SAAAuC,UAAA,GAAAA,UAAA,MAAA8a,EAAAD,EAX3BpQ,KAAMC,EAWqBjN,SAAAqd,EAXd,EAWcA,EAAAC,EAAAF,EAV3BjQ,SAAUC,EAUiBpN,SAAAsd,EAVN,GAUMA,EAT3B5W,EAS2B0W,EAT3B1W,SACAwU,EAQ2BkC,EAR3BlC,SACApN,EAO2BsP,EAP3BtP,SAOMlJ,EAAqBrC,UAAA,GACrBwC,GACJK,QAASpB,EAAAqB,aAAamO,YACtBC,iBAAiB,EAAA3P,EAAA8D,qBACjBC,SAAUrD,KAAKkC,SACfuG,OACAG,WAGE1G,KACF3B,EAAI8C,SAAWnB,GAEboH,IACF/I,EAAIoX,SAAWrO,GAEboN,IACFnW,EAAIoW,SAAWD,EAGjB,IAAMzN,IAAS,EAAAxJ,EAAAiW,eAAc,gBAAiB1V,KAAK8H,MAEnD,OAAOzI,GAAApE,QAAQiG,OAAOlB,KAAKsB,KAAKf,GAAKgB,KAAK0H,IAASrH,QAAQxB,OdmgCrDqW,IAGTtc,GAAQc,QclgCMwb,GdsgCT,SAASvc,EAAQC,EAASE,GAE/B,YAwBA,SAASS,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAEvF,QAAS6B,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMvC,GAAQ,IAAKuC,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOxC,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BuC,EAAPvC,EAElO,QAASyC,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAASV,UAAYxB,OAAOoC,OAAOD,GAAcA,EAAWX,WAAaa,aAAenC,MAAOgC,EAAUI,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeL,IAAYnC,OAAOyC,eAAiBzC,OAAOyC,eAAeP,EAAUC,GAAcD,EAASQ,UAAYP,GA5BjenC,OAAOC,eAAehB,EAAS,cAC7BiB,OAAO,GAGT,IAAI+C,GAAe,WAAc,QAASC,GAAiB7B,EAAQ8B,GAAS,IAAK,GAAI7B,GAAI,EAAO6B,EAAML,OAAVxB,EAAkBA,IAAK,CAAE,GAAI8B,GAAaD,EAAM7B,EAAI8B,GAAWd,WAAac,EAAWd,aAAc,EAAOc,EAAWZ,cAAe,EAAU,SAAWY,KAAYA,EAAWb,UAAW,GAAMvC,OAAOC,eAAeoB,EAAQ+B,EAAWJ,IAAKI,IAAiB,MAAO,UAAUxB,EAAayB,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBtB,EAAYJ,UAAW6B,GAAiBC,GAAaJ,EAAiBtB,EAAa0B,GAAqB1B,MetzCjiBsC,EAAA/E,EAAA,Gf0zCKgF,EAAYvE,EAAuBsE,GezzCxC2Z,EAAA1e,EAAA,If6zCK2e,EAAkBle,EAAuBie,Ge5zC9CE,EAAA5e,EAAA,GAEA6e,EAAA7e,EAAA,Ifg0CK8e,EAAcre,EAAuBoe,Ge9zC1C5Z,EAAAjF,EAAA,GAQM+e,Efs1CoB,SAAUC,Ge1zClC,QAAAD,KAAwC,GAA5BrZ,GAA4BhC,UAAAC,OAAA,GAAAxC,SAAAuC,UAAA,GAAAA,UAAA,KAAAnB,GAAAoD,KAAAoZ,EAAA,IAAAnZ,GAAAjD,EAAAgD,MAAAoZ,EAAAxb,WAAA1C,OAAAgE,eAAAka,IAAA1e,KAAAsF,KAChCD,EAAQ,MADwB,OAGtCE,GAAKqZ,MAASC,MAAO,KAAMC,WAE3BvZ,EAAKwZ,UACLxZ,EAAKyZ,eAAe3Z,EAAO4Z,aAC3B1Z,EAAK2Z,QAAU7Z,EAAO6Z,QAEtB3Z,EAAKmE,aAAe,GAAA6U,GAAAY,eAAmBC,UAAU,EAAMC,UAAW,MAT5B9Z,Ef4gDvC,MAjNA9C,GAAUic,EAAoBC,GAyC9Blb,EAAaib,IACXlb,IAAK,UACL9C,MAAO,Se11CFgF,GAAsC,GAAAK,GAAAT,IAC5C,OAAOX,GAAApE,QAAQiG,OAAO,GAAIC,SAAQ,SAACC,EAASC,GAC1CZ,EAAKuZ,SAAY5Y,UAASC,SAE1B,IAAM4Y,GAAYxZ,EAAK2B,OAAS/H,EAAQ,IAAQ0I,OAAOkX,SAEvDxZ,GAAKyZ,OAAS,GAAID,GAAUxZ,EAAK0Z,SAAU,KAAM1Z,EAAKmZ,SACtDnZ,EAAKyZ,OAAOE,OAAS3Z,EAAK4Z,OAAOC,KAAZ7Z,GACrBA,EAAKyZ,OAAOK,QAAU9Z,EAAK+Z,QAAQF,KAAb7Z,GACtBA,EAAKyZ,OAAOO,QAAUha,EAAKia,QAAQJ,KAAb7Z,GACtBA,EAAKyZ,OAAOS,UAAYla,EAAKma,UAAUN,KAAf7Z,MACtBmB,QAAQxB,Mf+1CXlC,IAAK,aACL9C,MAAO,We51CR4E,KAAKka,OAAOW,Wfg2CX3c,IAAK,SACL9C,MAAO,We71CR4E,KAAKga,QAAQ5Y,SAAU0Z,WAAW,Ofi2CjC5c,IAAK,UACL9C,MAAO,eAEP8C,IAAK,UACL9C,MAAO,Se/1CF2f,GACN/a,KAAKga,QAAQ3Y,OAAO0Z,Mfk2CnB7c,IAAK,cACL9C,MAAO,Seh2CEmF,GACV,GAA+B,IAA3BP,KAAKka,OAAOc,WAAkB,CAChC,GAAMxZ,GAAOjB,CAEbiB,GAAKyZ,QAAUjb,KAAKsZ,KACpB9X,EAAK0Z,YAAclb,KAAK2Z,YAExB3Z,KAAKka,OAAO5Y,KAAK6Z,KAAKC,UAAU5Z,Qfo2CjCtD,IAAK,uBACL9C,MAAO,Sej2CWmF,GAA8B,GAAAuB,GAAA9B,IACjD,OAAO,IAAImB,SAAQ,SAACC,EAASC,GAC3B,GAAM8J,IAAY/J,UAASC,WAC3B,EAAA/B,EAAA4L,YAAW3K,GAAOa,UAASC,WAE3BS,EAAK0D,YAAYjF,EAAK4K,Qfu2CvBjN,IAAK,YACL9C,MAAO,Sep2CAmF,GACR,GAAMiB,GAAO2Z,KAAKE,MAAM9a,EAAIiB,KAC5B,IAAqB,UAAjBA,EAAKZ,QACP,KAAU0a,OAAJ,UAAoB9Z,EAAK+Z,OAAzB,IAAmC/Z,EAAKga,YAGhD,IAAMxB,IAAU,EAAA1a,EAAA0L,YAAWxJ,GACrBia,GAAU,EAAAnc,EAAAiM,iBAAgB/J,GAC1Bka,GAAW,EAAApc,EAAAsL,aAAYpJ,EAAKZ,QAElCZ,MAAK2b,gBAAgB3B,EAASxY,GAC9BxB,KAAK4b,sBAAsBH,EAASja,GACpCxB,KAAK6b,kBAAkBH,EAAUla,Mfu2ChCtD,IAAK,kBACL9C,MAAO,Ser2CM4e,EAAmBxY,GACjC,GAAIwY,GAAWA,EAAQ5Y,QAErB,OADA,EAAA9B,EAAA+L,eAAc7J,GACPwY,EAAQ5Y,QAAQI,Mfy2CxBtD,IAAK,wBACL9C,MAAO,Set2CYqgB,EAASja,GAC7B,GAAIia,EACF,MAAOA,GAAQja,Mf02ChBtD,IAAK,oBACL9C,MAAO,Sev2CQsgB,EAAoBla,GACpC,MAAOka,IAAYA,EAASla,Mf02C3BtD,IAAK,iBACL9C,MAAO,Sex2CK0gB,GAAkC,GAAA/X,GAAA/D,IAC/C,IAAIA,KAAKoC,OACP,MAAO/H,GAAQ,IAAsB0hB,OAAO,SAAAC,GAC1CjY,EAAK4V,YAAcqC,GAEhB,IAAIhc,KAAKic,UACd,OAAO,GAAAjD,GAAA/d,SAAmByD,IAAI,SAAAib,GAC5B5V,EAAK4V,YAAclP,QAAKyR,IAAI7hB,EAAQ,IAAkB8hB,gBAAgBxC,KAEnE,KAAImC,EAGT,KAAUR,OAAM,2BAFhBtb,MAAK2Z,YAAcmC,Kfg3CpB5d,IAAK,UACL9C,MAAO,We32CM,GAAAmJ,GAAAvE,IACVA,MAAKoC,QACP/H,EAAQ,IAAgBof,QAAQ,SAAAjY,GAC9B+C,EAAK+U,KAAO9X,Ofq3CftD,IAAK,iBACL9C,MAAO,Seh3CQ+P,EAAiB/K,GAAwC,GAAAqF,GAAAzF,IA8BzE,OA7BAmL,GAAQiR,GAAK,SAACnU,EAAeyT,GAE3B,MADAjW,GAAKrB,aAAagY,GAAGnU,EAAOyT,GACrBvQ,GAETA,EAAQkR,MAAQ,SAACX,GAEf,MADAjW,GAAKrB,aAAaiY,MAAMX,GACjBvQ,GAETA,EAAQmR,OAAS,SAACZ,GAEhB,MADAjW,GAAKrB,aAAakY,OAAOZ,GAClBvQ,GAETA,EAAQoR,KAAO,SAACtU,EAAeyT,GAE7B,MADAjW,GAAKrB,aAAamY,KAAKtU,EAAOyT,GACvBvQ,GAETA,EAAQqR,KAAO,SAACvU,EAAewU,EAAef,GAE5C,MADAjW,GAAKrB,aAAaoY,KAAKvU,EAAOwU,EAAOf,GAC9BvQ,GAETA,EAAQuR,eAAiB,SAACzU,EAAeyT,GAEvC,MADAjW,GAAKrB,aAAasY,eAAezU,EAAOyT,GACjCvQ,GAETA,EAAQwR,mBAAqB,SAACC,GAE5B,MADAnX,GAAKrB,aAAauY,mBAAmBC,GAC9BzR,GAGF9L,EAAApE,QAAQiG,OAAOiK,GAASvJ,QAAQxB,Ofw3CjCgZ,GACPD,EAAYle,QAEdd,GAAQc,Qet3CMme,Gf03CT,SAASlf,EAAQC,GgBnlDvBD,EAAAC,QAAAkQ,QAAA,mBhBylDM,SAASnQ,EAAQC,EAASE,GAE/B,YAUA,SAASS,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAEvF,QAAS6B,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAVhH7B,OAAOC,eAAehB,EAAS,cAC7BiB,OAAO,GiBxkDV,IAAAyhB,GAAAxiB,EAAA,IjB6kDKyiB,EAAWhiB,EAAuB+hB,GiB3kDjCE,EAkBJ,QAAAA,KAA6D,GAAjDhd,GAAiDhC,UAAAC,OAAA,GAAAxC,SAAAuC,UAAA,GAAAA,UAAA,MAApBif,EAAoBjf,UAAA,EAAAnB,GAAAoD,KAAA+c,EAE3D,IAAM5C,GACFpa,EAAOkd,IAAOld,EAAOkd,IACrBld,EAAOmd,KAAOJ,EAAA7hB,QAAOiiB,KAAKF,GACZF,EAAA7hB,QAAOkiB,QAAQH,EAGjChd,MAAKma,SAAWA,EAChBna,KAAK8H,MAAQ/H,EAAO+H,OAAS,IAE7B9H,KAAKoC,OAA8B,mBAAXW,QACxB/C,KAAKic,UAAgC,mBAAbmB,UjBsmD3BjjB,GAAQc,QiBlmDM8hB,GjBsmDT,SAAS7iB,EAAQC,GAEtB,YAEAe,QAAOC,eAAehB,EAAS,cAC7BiB,OAAO,IAETjB,EAAQc,SkBtqDPiiB,MACEG,GAAI,iCACJC,KAAM,+BAERH,SACEE,GAAI,0CACJC,KAAM,yClB6qDJ,SAASpjB,EAAQC,GmBprDvBD,EAAAC,QAAAkQ,QAAA,OnB0rDM,SAASnQ,EAAQC,EAASE,GAE/B,YAWA,SAASS,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GoB3qDjF,QAASghB,GAAO3b,GACrBmd,EAAAtiB,QAAWuiB,IAAI,SAACzV,EAAKyV,GACnB,GAAMC,GAAW,SAACC,GAChB,GAAIC,GAAO,CACX,IAAmB,IAAfD,EAAI1f,OAAc,MAAO2f,EAC7B,KAAK,GAAInhB,GAAI,EAAOkhB,EAAI1f,OAARxB,EAAgBA,IAC9BmhB,GAASA,GAAQ,GAAKA,EAAQD,EAAIE,WAAWphB,GAC7CmhB,GAAcA,CAEhB,OAAOA,IAGLE,EAAe,EACnB3iB,QAAOoB,KAAKkhB,GAAKM,QAAQ,SAAAC,GACvBF,GAAgBL,EAAIO,GAAOC,KAG7B,IAAIrE,GAAc8D,EAASI,EACT,GAAdlE,IACFA,IAAe,GAGjBvZ,EAASuZ,KpB4oDZze,OAAOC,eAAehB,EAAS,cAC7BiB,OAAO,IAETjB,EoBrqDe4hB,QAFhB,IAAAkC,GAAA5jB,EAAA,IpB2qDKkjB,EAAeziB,EAAuBmjB,IAwDrC,SAAS/jB,EAAQC,GqB7vDvBD,EAAAC,QAAAkQ,QAAA,erBmwDM,SAASnQ,EAAQC,GAEtB,YsB1vDD,IAAM+jB,GAAS,UACTC,GAAa,WASbC,EAAS,SAACC,GACd,GAAIC,GAAID,EAAIC,EACRC,EAAIF,EAAIE,EACR3jB,EAAIyjB,EAAIzjB,CA+BZ,OA9BA0jB,IAAKC,EACLD,GAAK1jB,EACL0jB,GAAK1jB,IAAM,GACX2jB,GAAK3jB,EACL2jB,GAAKD,EACLC,GAAKD,GAAK,EACV1jB,GAAK0jB,EACL1jB,GAAK2jB,EACL3jB,GAAK2jB,IAAM,GACXD,GAAKC,EACLD,GAAK1jB,EACL0jB,GAAK1jB,IAAM,GACX2jB,GAAK3jB,EACL2jB,GAAKD,EACLC,GAAKD,GAAK,GACV1jB,GAAK0jB,EACL1jB,GAAK2jB,EACL3jB,GAAK2jB,IAAM,EACXD,GAAKC,EACLD,GAAK1jB,EACL0jB,GAAK1jB,IAAM,EACX2jB,GAAK3jB,EACL2jB,GAAKD,EACLC,GAAKD,GAAK,GACV1jB,GAAK0jB,EACL1jB,GAAK2jB,EACL3jB,GAAK2jB,IAAM,GACXF,EAAIC,EAAIA,EACRD,EAAIE,EAAIA,EACRF,EAAIzjB,EAAIA,EACDA,GAUH4jB,EAAY,SAACC,GACjB,MAAOA,GAAI,IAAMA,EAAI,IAAMA,GAGvBC,EAAU,SAACC,EAAOC,GACtB,GAAIN,GAAIE,EAAUG,EAAMC,EAAS,IAC7BL,EAAIC,EAAUG,EAAMC,EAAS,IAC7BhkB,EAAI4jB,EAAUG,EAAMC,EAAS,IAC7Ble,EAAI8d,EAAUG,EAAMC,EAAS,GACjC,OAAON,IAAKC,GAAK,IAAM3jB,GAAK,KAAO8F,GAAK,IAM1CxG,GAAOC,QAAQgiB,gBAAkB,SAAyBwC,GACxD,GAUIE,GAVAD,EAAS,EACT5gB,EAAS2gB,EAAM3gB,OACf8gB,EAAOZ,EAEPG,GACFC,EAAGH,EACHI,EAAGJ,EACHvjB,EAAGkkB,EAIL,KAAKD,EAAS7gB,EAAQ6gB,GAAU,GAAIA,GAAU,GAAID,GAAU,GAC1DP,EAAIC,GAAKI,EAAQC,EAAOC,GACxBP,EAAIE,GAAKG,EAAQC,EAAOC,EAAS,GACjCP,EAAIzjB,GAAK8jB,EAAQC,EAAOC,EAAS,GACjCR,EAAOC,EAIT,QADAA,EAAIzjB,GAAKoD,EACD6gB,GACN,IAAK,IACHR,EAAIzjB,GAAM+jB,EAAMC,EAAS,KAAQ,EACnC,KAAK,IACHP,EAAIzjB,IAA0B,IAApB+jB,EAAMC,EAAS,KAAc,EACzC,KAAK,GACHP,EAAIzjB,IAA0B,IAApB+jB,EAAMC,EAAS,KAAc,CAEzC,KAAK,GACHP,EAAIE,GAAKG,EAAQC,EAAOC,EAAS,GACjCP,EAAIC,GAAKI,EAAQC,EAAOC,EACxB,MACF,KAAK,GACHP,EAAIE,IAA0B,IAApBI,EAAMC,EAAS,KAAc,EACzC,KAAK,GACHP,EAAIE,IAA0B,IAApBI,EAAMC,EAAS,KAAc,CACzC,KAAK,GACHP,EAAIE,GAA0B,IAApBI,EAAMC,EAAS,EAC3B,KAAK,GACHP,EAAIC,GAAKI,EAAQC,EAAOC,EACxB,MACF,KAAK,GACHP,EAAIC,IAA0B,IAApBK,EAAMC,EAAS,KAAc,EACzC,KAAK,GACHP,EAAIC,IAA0B,IAApBK,EAAMC,EAAS,KAAc,CACzC,KAAK,GACHP,EAAIC,GAA0B,IAApBK,EAAMC,EAAS,GAG7B,MAAOR,GAAOC,KtB4wDV,SAASnkB,EAAQC,EAASE,GAE/B,YA0CA,SAASS,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GuB15DxF,QAASgkB,GAAaC,GAChBA,EAAUC,MAAM,yDAClBC,EAAO3F,MAAQyF,EACNE,EAAO1F,OAAO/c,QAAQuiB,MAAe,GAC9CE,EAAO1F,OAAOlD,KAAK0I,GAIhB,QAASvF,GAAQrZ,GACtB,GAAM8Z,GAASiF,EAAAlkB,QAAMmkB,aAAa,QAE5BC,EAAqB,GACrBC,EAAc,GAAIC,QAAOF,GAEzBG,EAAsB,EACtBC,EAAqB,EACrBC,EAAoB,UACpBC,EAAelV,KAAKmV,IAAI,EAAG,IAE3BC,EAA2B,EAC3BC,EAA+B,MAC/BC,EAAmC,GAEnCC,EAAYvV,KAAKC,SAAWiV,EAE5BM,IACH,KAAM,8BACN,MAAO,sBACP,KAAM,0BACN,KAAM,sBACN,KAAM,6BACN,KAAM,qBACN,KAAM,kBACN,KAAM,sBACN,KAAM,mBACN,KAAM,mBACN,KAAM,qBACN,KAAM,yBAGTX,GAAYY,cAA4D,OAA5CT,EAAqBD,GAAgC,GACjFF,EAAYY,cAAc,EAAG,GAC7BZ,EAAYa,cAAcT,EAAmB,GAC7CJ,EAAYa,cAAc,EAAG,GAC7Bb,EAAYa,cAAc,EAAG,IAC7Bb,EAAYa,cAAcH,EAAU,IAEpC9F,EAAOkC,GAAG,UAAW,SAAC7b,GACpB,GAAM6f,GAAM,SAAC9B,EAAGC,GACd,GAAM/c,KACN,IAAI+c,EAAEvgB,OAASsgB,EAAEtgB,OAAQ,CACvB,GAAMqiB,GAAM/B,CACZA,GAAIC,EACJA,EAAI8B,EAEN,IAAK,GAAI7jB,GAAI,EAAG8jB,EAAMhC,EAAEtgB,OAAYsiB,EAAJ9jB,EAASA,IACvCgF,EAAK8U,KAAKgI,EAAE9hB,GAAK+hB,EAAE/hB,GAGrB,OAAO,IAAI+iB,QAAO/d,IAGd+e,EAAQhgB,EAAIigB,UAAU,GACtBC,EAAe,IAARF,EACPG,EAAe,GAARH,CAEb,IAAe,IAATE,GAAuB,IAATC,EAApB,CASA,IALA,GAAMC,GAAYpgB,EAAIqgB,MAAM,EAAGvB,GACzBwB,EAAWtgB,EAAIqgB,MAAMvB,EAAoB9e,EAAIvC,QAE/C4gB,EAAS,EAEGiC,EAAS7iB,OAAlB4gB,GAA0B,CAC/B,GAAMkC,GAAWD,EAASE,aAAanC,EACvCA,IAAU,CAEV,IAAIoC,GAAiBH,EAASE,aAAanC,GACrCqC,EAAWD,EAAiB,CAC9BC,GAAW,IACbD,GAAkB,EAAIC,GAExBrC,GAAU,CAEV,IAAMxjB,GAAQylB,EAASD,MAAMhC,EAAQA,EAASoC,EAC9CpC,IAAUoC,CAEV,IAAIE,UACAC,QACJ,QAAQL,GACN,IAAKjB,GACHqB,EAAoC,IAA1B9lB,EAAM2lB,aAAa,GAAe,EAAI,EAChDI,EAAUC,EAAAnmB,QAAGomB,SAASjmB,EAAO,EAAG8lB,GAChCnC,EAAaoC,EACb,MAEF,KAAKrB,GACL,IAAKC,GACHmB,EAAoC,IAA1B9lB,EAAM2lB,aAAa,GAAe,EAAI,CAChD,IAAMO,GAAQX,EAAUC,MAAM,EAAG,GAC3BW,EAAMZ,EAAUC,MAAM,EAAG,IACzBY,EAAQpmB,EAAMwlB,MAAM,EAAc,IAAXM,EAAe,EAAI,IAC1CO,EAAOrB,EAAIoB,EAAkB,IAAXN,EAAeI,EAAQlmB,EAAMsmB,QAAQJ,EAAOC,IACpEJ,GAAUC,EAAAnmB,QAAGomB,SAASI,EAAM,EAAGP,GAC/BnC,EAAaoC,IAMnB/gB,EAAS8e,MAGXe,EAAY/Z,IAAI,SAAArE,GAAA,GAAAuG,GAAAuZ,EAAA9f,EAAA,GAAE+f,EAAFxZ,EAAA,GAAQyZ,EAARzZ,EAAA,SAAkB8R,GAAO5Y,KAAKge,EAAa,EAAGA,EAAYthB,OAAQ4jB,EAAMC,EAAM,gBvB+vD/F3mB,OAAOC,eAAehB,EAAS,cAC7BiB,OAAO,GAGT,IAAIumB,GAAiB,WAAc,QAASG,GAAcC,EAAKvlB,GAAK,GAAIwlB,MAAeC,GAAK,EAAUC,GAAK,EAAWC,EAAK3mB,MAAW,KAAM,IAAK,GAAiC4mB,GAA7BC,EAAKN,EAAIxc,OAAO+c,cAAmBL,GAAMG,EAAKC,EAAGE,QAAQC,QAAoBR,EAAK1L,KAAK8L,EAAGhnB,QAAYoB,GAAKwlB,EAAKhkB,SAAWxB,GAA3DylB,GAAK,IAAoE,MAAOla,GAAOma,GAAK,EAAMC,EAAKpa,EAAO,QAAU,KAAWka,GAAMI,EAAW,QAAGA,EAAW,SAAO,QAAU,GAAIH,EAAI,KAAMC,IAAQ,MAAOH,GAAQ,MAAO,UAAUD,EAAKvlB,GAAK,GAAIimB,MAAMC,QAAQX,GAAQ,MAAOA,EAAY,IAAIxc,OAAO+c,WAAYpnB,QAAO6mB,GAAQ,MAAOD,GAAcC,EAAKvlB,EAAa,MAAM,IAAIO,WAAU,2DA0BtlB5C,GuBx4Desf,SAbhB,IAAAkJ,GAAAtoB,EAAA,IvBy5DK+mB,EAAOtmB,EAAuB6nB,GuBx5DnCC,EAAAvoB,EAAA,IvB45DK8kB,EAAUrkB,EAAuB8nB,GuB15DhC1D,GAAW3F,MAAO,KAAMC,YvBihExB,SAAStf,EAAQC,GwB9iEvBD,EAAAC,QAAAkQ,QAAA,OxBojEM,SAASnQ,EAAQC,GyBpjEvBD,EAAAC,QAAAkQ,QAAA,UzB0jEM,SAASnQ,EAAQC,G0B1jEvBD,EAAAC,QAAAkQ,QAAA,O1BgkEM,SAASnQ,EAAQC,EAASE,GAE/B,YAoBA,SAASS,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAEvF,QAAS6B,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMvC,GAAQ,IAAKuC,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOxC,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BuC,EAAPvC,EAElO,QAASyC,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAASV,UAAYxB,OAAOoC,OAAOD,GAAcA,EAAWX,WAAaa,aAAenC,MAAOgC,EAAUI,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeL,IAAYnC,OAAOyC,eAAiBzC,OAAOyC,eAAeP,EAAUC,GAAcD,EAASQ,UAAYP,GAxBjenC,OAAOC,eAAehB,EAAS,cAC7BiB,OAAO,GAGT,IAAI+C,GAAe,WAAc,QAASC,GAAiB7B,EAAQ8B,GAAS,IAAK,GAAI7B,GAAI,EAAO6B,EAAML,OAAVxB,EAAkBA,IAAK,CAAE,GAAI8B,GAAaD,EAAM7B,EAAI8B,GAAWd,WAAac,EAAWd,aAAc,EAAOc,EAAWZ,cAAe,EAAU,SAAWY,KAAYA,EAAWb,UAAW,GAAMvC,OAAOC,eAAeoB,EAAQ+B,EAAWJ,IAAKI,IAAiB,MAAO,UAAUxB,EAAayB,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBtB,EAAYJ,UAAW6B,GAAiBC,GAAaJ,EAAiBtB,EAAa0B,GAAqB1B,M2BljEjiBsC,EAAA/E,EAAA,G3BsjEKgF,EAAYvE,EAAuBsE,G2BrjExCvD,EAAAxB,EAAA,I3ByjEKyB,EAAShB,EAAuBe,G2BxjErC6D,EAAArF,EAAA,I3B4jEKsF,EAAU7E,EAAuB4E,G2B1jEhCrE,E3BwlEgB,SAAUyE,G2BvlE9B,QAAAzE,GAAY0E,GAAyBnD,EAAAoD,KAAA3E,EAAA,IAAA4E,GAAAjD,EAAAgD,MAAA3E,EAAAuC,WAAA1C,OAAAgE,eAAA7D,IAAAX,KAAAsF,KAC7BD,GAD6B,OAEnCE,GAAKC,UAAYH,EAAOG,WAAa,GAAApE,GAAAb,QAAkB8E,GAFpBE,E3BsoEpC,MA9CA9C,GAAU9B,EAAgByE,GAW1B3B,EAAa9C,IACX6C,IAAK,OACL9C,MAAO,S2BhmELynB,GACH,MAAO7iB,MAAKE,UAAU4iB,WAAWD,M3BmmEhC3kB,IAAK,cACL9C,MAAO,S2BjmEEynB,GACV,MAAO7iB,MAAKE,UAAU6iB,YAAYF,M3BomEjC3kB,IAAK,SACL9C,MAAO,S2BlmEHgF,GACL,MAAOf,GAAApE,QAAQiG,OAAOlB,KAAK+iB,YAAY,WAAWnhB,QAAQxB,M3BqmEzDlC,IAAK,SACL9C,MAAO,W2BhmEoC,GAAAyG,GAAA9D,UAAAC,OAAA,GAAAxC,SAAAuC,UAAA,GAAAA,UAAA,MAAAilB,EAAAnhB,EAHrCohB,QAGqCznB,SAAAwnB,EAH7B,IAG6BA,EAAAE,EAAArhB,EAHxBwG,QAGwB7M,SAAA0nB,EAHhB,EAGgBA,EAAtC9iB,EAAsCrC,UAAA,EAC5C,OAAOsB,GAAApE,QAAQiG,OAAOlB,KAAK+iB,YAAL,gBAAiCE,EAAjC,UAAgD5a,IAAUzG,QAAQxB;I3B2mEvFlC,IAAK,YACL9C,MAAO,S2BzmEAgF,GACR,MAAOf,GAAApE,QAAQiG,OAAOlB,KAAK+iB,YAAY,cAAcnhB,QAAQxB,O3B6mEvD/E,GACPsE,EAAQ1E,QAEVd,GAAQc,Q2B5mEMI,G3BgnET,SAASnB,EAAQC,EAASE,GAE/B,YAwBA,SAASS,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAEvF,QAAS6B,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMvC,GAAQ,IAAKuC,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOxC,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BuC,EAAPvC,EAElO,QAASyC,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAASV,UAAYxB,OAAOoC,OAAOD,GAAcA,EAAWX,WAAaa,aAAenC,MAAOgC,EAAUI,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeL,IAAYnC,OAAOyC,eAAiBzC,OAAOyC,eAAeP,EAAUC,GAAcD,EAASQ,UAAYP,GA5BjenC,OAAOC,eAAehB,EAAS,cAC7BiB,OAAO,GAGT,IAAI+C,GAAe,WAAc,QAASC,GAAiB7B,EAAQ8B,GAAS,IAAK,GAAI7B,GAAI,EAAO6B,EAAML,OAAVxB,EAAkBA,IAAK,CAAE,GAAI8B,GAAaD,EAAM7B,EAAI8B,GAAWd,WAAac,EAAWd,aAAc,EAAOc,EAAWZ,cAAe,EAAU,SAAWY,KAAYA,EAAWb,UAAW,GAAMvC,OAAOC,eAAeoB,EAAQ+B,EAAWJ,IAAKI,IAAiB,MAAO,UAAUxB,EAAayB,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBtB,EAAYJ,UAAW6B,GAAiBC,GAAaJ,EAAiBtB,EAAa0B,GAAqB1B,M4B1pEjiBqmB,EAAA9oB,EAAA,I5B8pEK+oB,EAAQtoB,EAAuBqoB,G4B7pEpCE,EAAAhpB,EAAA,I5BiqEKipB,EAASxoB,EAAuBuoB,G4BhqErCE,EAAAlpB,EAAA,I5BoqEKmpB,EAAkB1oB,EAAuByoB,G4BlqE9CrK,EAAA7e,EAAA,I5BsqEK8e,EAAcre,EAAuBoe,GA8BrCuK,G4BlsEa,EAAAD,EAAAvoB,SAAckG,SAAxBuiB,E5BmsEMD,E4BnsENC,MAEFC,E5BmsEe,SAAUtK,G4BnrE7B,QAAAsK,GAAY5jB,GAAwBnD,EAAAoD,KAAA2jB,EAAA,IAAA1jB,GAAAjD,EAAAgD,MAAA2jB,EAAA/lB,WAAA1C,OAAAgE,eAAAykB,IAAAjpB,KAAAsF,KAC5BD,EAAQ,QADoB,OAGlCE,GAAK/B,IAAM6B,EAAO7B,IAClB+B,EAAK2jB,OAAS7jB,EAAO6jB,OACrB3jB,EAAKqJ,SAAWvJ,EAAOuJ,UAAY,MALDrJ,E5ByvEnC,MArEA9C,GAAUwmB,EAAetK,GAyBzBlb,EAAawlB,IACXzlB,IAAK,UACL9C,MAAO,S4BvsEF6O,EAAgB4Z,GACtB,GAAMC,GAAYnjB,QAAKe,MACjBqiB,EAAST,EAAAroB,QAAK+oB,MAAMC,WAAWC,OAAOlkB,KAAK4jB,QAC3CO,EAAO,GAAIb,GAAAroB,QAAKmpB,KAAKD,KAAKJ,EAAQT,EAAAroB,QAAK0iB,KAAK0G,QAC5CC,EAAYhB,EAAAroB,QAAK+oB,MAAMO,IAAIC,SAASL,EAAKM,QAAQX,GACvD,QACE7Z,SACA2P,SACE8K,eAAgB,mBAChBC,MAAOb,EACPc,OAAQ5kB,KAAK9B,IACbomB,aAEFT,KAAM1I,KAAKC,UAAUyI,O5B2sEtB3lB,IAAK,QACL9C,MAAO,S4BxsEJmF,EAAaskB,GAAqD,GAAxCjL,GAAwC7b,UAAAC,OAAA,GAAAxC,SAAAuC,UAAA,GAAAA,UAAA,KACtE,OAAO2lB,GAAMN,EAAAnoB,QAAImG,QAAQpB,KAAKma,SAAU0K,GAAMjL,GAC3CrY,KAAK,SAAAujB,GAAA,MAAYA,GAASC,Y5B8sE5B7mB,IAAK,cACL9C,MAAO,S4B5sEEypB,GACV,MAAO7kB,MAAK0jB,SAAL,UAAyB1jB,KAAKsJ,SAA9B,IAA0Cub,M5B+sEhD3mB,IAAK,aACL9C,MAAO,S4B7sECmF,GACT,GAAMqZ,GAAU5Z,KAAK4Z,QAAQ,OAAQrZ,EACrC,OAAOP,MAAK0jB,MAAMnjB,EAAK,kBAAmBqZ,GACvCrY,KAAK,SAAAujB,GAAA,MAAiC,OAApBA,EAASE,OAAiB7jB,QAAQE,OAAOyjB,GAAYA,EAASG,YAChF1jB,KAAK,SAAAujB,GAAA,MAAiC,KAApBA,EAAS9mB,OAAe8mB,EAAS,GAAKA,Q5BmtErDnB,GACPxK,EAAYle,QAEdd,GAAQc,Q4BltEM0oB,G5BstET,SAASzpB,EAAQC,G6B9yEvBD,EAAAC,QAAAkQ,QAAA,Q7BozEM,SAASnQ,EAAQC,G8BpzEvBD,EAAAC,QAAAkQ,QAAA,S9B0zEM,SAASnQ,EAAQC,G+B1zEvBD,EAAAC,QAAAkQ,QAAA","file":"blinktrade.min.js","sourcesContent":["module.exports =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.BlinkTradeRest = exports.BlinkTradeWS = exports.Brokers = undefined;\n\t\n\tvar _brokers = __webpack_require__(1);\n\t\n\tvar _brokers2 = _interopRequireDefault(_brokers);\n\t\n\tvar _ws = __webpack_require__(2);\n\t\n\tvar _ws2 = _interopRequireDefault(_ws);\n\t\n\tvar _rest = __webpack_require__(25);\n\t\n\tvar _rest2 = _interopRequireDefault(_rest);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.Brokers = _brokers2.default;\n\texports.BlinkTradeWS = _ws2.default;\n\texports.BlinkTradeRest = _rest2.default; /**\n\t                                          * BlinkTradeJS SDK\n\t                                          * (c) 2016-present BlinkTrade, Inc.\n\t                                          *\n\t                                          * This file is part of BlinkTradeJS\n\t                                          *\n\t                                          * This program is free software: you can redistribute it and/or modify\n\t                                          * it under the terms of the GNU General Public License as published by\n\t                                          * the Free Software Foundation, either version 3 of the License, or\n\t                                          * (at your option) any later version.\n\t                                         \n\t                                          * This program is distributed in the hope that it will be useful,\n\t                                          * but WITHOUT ANY WARRANTY; without even the implied warranty of\n\t                                          * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n\t                                          * GNU General Public License for more details.\n\t                                         \n\t                                          * You should have received a copy of the GNU General Public License\n\t                                          * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\t                                          *\n\t                                          * \n\t                                          */\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = {\n\t  SURBITCOIN: 1,\n\t  VBTC: 3,\n\t  FOXBIT: 4,\n\t  TESTNET: 5,\n\t  URDUBIT: 8,\n\t  CHILEBIT: 9\n\t};\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _nodeify = __webpack_require__(3);\n\t\n\tvar _nodeify2 = _interopRequireDefault(_nodeify);\n\t\n\tvar _eventemitter = __webpack_require__(4);\n\t\n\tvar _listener = __webpack_require__(5);\n\t\n\tvar _events = __webpack_require__(10);\n\t\n\tvar _messages = __webpack_require__(6);\n\t\n\tvar _utils = __webpack_require__(11);\n\t\n\tvar _trade = __webpack_require__(12);\n\t\n\tvar _trade2 = _interopRequireDefault(_trade);\n\t\n\tvar _websocket = __webpack_require__(13);\n\t\n\tvar _websocket2 = _interopRequireDefault(_websocket);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * BlinkTradeJS SDK\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * (c) 2016-present BlinkTrade, Inc.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This file is part of BlinkTradeJS\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is free software: you can redistribute it and/or modify\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * it under the terms of the GNU General Public License as published by\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * the Free Software Foundation, either version 3 of the License, or\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * (at your option) any later version.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               \n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is distributed in the hope that it will be useful,\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * but WITHOUT ANY WARRANTY; without even the implied warranty of\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * GNU General Public License for more details.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               \n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * You should have received a copy of the GNU General Public License\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * \n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar BlinkTradeWS = function (_TradeBase) {\n\t  _inherits(BlinkTradeWS, _TradeBase);\n\t\n\t  /**\n\t   * Session to store login information\n\t   */\n\t  function BlinkTradeWS(params) {\n\t    _classCallCheck(this, BlinkTradeWS);\n\t\n\t    var _this = _possibleConstructorReturn(this, (BlinkTradeWS.__proto__ || Object.getPrototypeOf(BlinkTradeWS)).call(this, params));\n\t\n\t    _this.transport = params.transport || new _websocket2.default(params);\n\t    _this.session = {};\n\t    return _this;\n\t  }\n\t\n\t  _createClass(BlinkTradeWS, [{\n\t    key: 'connect',\n\t    value: function connect(callback) {\n\t      return this.transport.connect(callback);\n\t    }\n\t  }, {\n\t    key: 'disconnect',\n\t    value: function disconnect() {\n\t      return this.transport.disconnect();\n\t    }\n\t  }, {\n\t    key: 'send',\n\t    value: function send(msg) {\n\t      return this.transport.sendMessageAsPromise(msg);\n\t    }\n\t  }, {\n\t    key: 'heartbeat',\n\t    value: function heartbeat(callback) {\n\t      var _this2 = this;\n\t\n\t      var d = new Date();\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.HEARTBEAT,\n\t        TestReqID: d.getTime(),\n\t        SendTime: d.getTime()\n\t      };\n\t\n\t      return _nodeify2.default.extend(new Promise(function (resolve, reject) {\n\t        return _this2.send(msg).then(function (data) {\n\t          return resolve(_extends({}, data, {\n\t            Latency: new Date(Date.now()) - data.SendTime\n\t          }));\n\t        }).catch(reject);\n\t      })).nodeify(callback);\n\t    }\n\t  }, {\n\t    key: 'login',\n\t    value: function login(_ref, callback) {\n\t      var _this3 = this;\n\t\n\t      var username = _ref.username,\n\t          password = _ref.password,\n\t          secondFactor = _ref.secondFactor,\n\t          brokerId = _ref.brokerId;\n\t\n\t      var userAgent = void 0;\n\t      if (!this.isNode) {\n\t        userAgent = {\n\t          UserAgent: window.navigator.userAgent,\n\t          UserAgentLanguage: window.navigator.language,\n\t          UserAgentPlatform: window.navigator.platform,\n\t          UserAgentTimezoneOffset: new Date().getTimezoneOffset()\n\t        };\n\t      } else {\n\t        var os = __webpack_require__(24);\n\t        userAgent = {\n\t          UserAgent: os.type() + ' ' + os.release(),\n\t          UserAgentLanguage: 'en_US',\n\t          UserAgentPlatform: os.platform() + ' (' + os.arch() + ')',\n\t          UserAgentTimezoneOffset: new Date().getTimezoneOffset()\n\t        };\n\t      }\n\t\n\t      var msg = _extends({\n\t        MsgType: _messages.ActionMsgReq.LOGIN,\n\t        UserReqID: (0, _listener.generateRequestId)(),\n\t        BrokerID: brokerId || this.brokerId,\n\t        Username: username,\n\t        Password: password,\n\t        UserReqTyp: '1'\n\t      }, userAgent);\n\t\n\t      if (secondFactor) {\n\t        msg.SecondFactor = secondFactor;\n\t      }\n\t\n\t      return _nodeify2.default.extend(new Promise(function (resolve, reject) {\n\t        return _this3.send(msg).then(function (data) {\n\t          if (data.UserStatus === 1) {\n\t            _this3.session = data;\n\t            return resolve(data);\n\t          }\n\t\n\t          return reject(data);\n\t        }).catch(reject);\n\t      })).nodeify(callback);\n\t    }\n\t  }, {\n\t    key: 'logout',\n\t    value: function logout(callback) {\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.LOGOUT,\n\t        BrokerID: this.brokerId,\n\t        UserReqID: (0, _listener.generateRequestId)(),\n\t        Username: this.session.Username,\n\t        UserReqTyp: '2'\n\t      };\n\t\n\t      return _nodeify2.default.extend(this.send(msg)).nodeify(callback);\n\t    }\n\t  }, {\n\t    key: 'profile',\n\t    value: function profile(callback) {\n\t      var _session$Profile = this.session.Profile,\n\t          VerificationData = _session$Profile.VerificationData,\n\t          profile = _objectWithoutProperties(_session$Profile, ['VerificationData']);\n\t\n\t      return _nodeify2.default.extend(Promise.resolve(profile)).nodeify(callback);\n\t    }\n\t  }, {\n\t    key: 'balance',\n\t    value: function balance(callback) {\n\t      var _this4 = this;\n\t\n\t      return this.transport.emitterPromise(new Promise(function (resolve, reject) {\n\t        return _get(BlinkTradeWS.prototype.__proto__ || Object.getPrototypeOf(BlinkTradeWS.prototype), 'balance', _this4).call(_this4, callback).then(function (data) {\n\t          (0, _listener.registerListener)(_messages.ActionMsgReq.BALANCE, function (balance) {\n\t            callback && callback(null, balance);\n\t            return _this4.transport.eventEmitter.emit(_events.BALANCE, balance);\n\t          });\n\t          return resolve(data);\n\t        }).catch(reject);\n\t      }));\n\t    }\n\t  }, {\n\t    key: 'subscribeTicker',\n\t    value: function subscribeTicker(symbols, callback) {\n\t      var _this5 = this;\n\t\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.SECURITY_STATUS_SUBSCRIBE,\n\t        SecurityStatusReqID: (0, _listener.generateRequestId)(),\n\t        SubscriptionRequestType: '1',\n\t        Instruments: symbols\n\t      };\n\t\n\t      var formatTicker = function formatTicker(data) {\n\t        return _extends({}, data, {\n\t          SellVolume: data.SellVolume / 1e8,\n\t          LowPx: data.LowPx / 1e8,\n\t          LastPx: data.LastPx / 1e8,\n\t          BestAsk: data.BestAsk / 1e8,\n\t          HighPx: data.HighPx / 1e8,\n\t          BuyVolume: data.BuyVolume / 1e8,\n\t          BestBid: data.BestBid / 1e8\n\t        });\n\t      };\n\t\n\t      return this.transport.emitterPromise(new Promise(function (resolve, reject) {\n\t        return _this5.send(msg).then(function (data) {\n\t          resolve(formatTicker(data));\n\t          (0, _listener.registerEventEmitter)('SecurityStatusReqID', data.SecurityStatusReqID, function (ticker) {\n\t            callback && callback(null, formatTicker(ticker));\n\t            return _this5.transport.eventEmitter.emit(ticker.Market + ':' + ticker.Symbol, formatTicker(ticker));\n\t          });\n\t        }).catch(reject);\n\t      }), callback);\n\t    }\n\t  }, {\n\t    key: 'unSubscribeTicker',\n\t    value: function unSubscribeTicker(SecurityStatusReqID) {\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.SECURITY_STATUS_SUBSCRIBE,\n\t        SecurityStatusReqID: SecurityStatusReqID,\n\t        SubscriptionRequestType: '2'\n\t      };\n\t\n\t      this.transport.sendMessage(msg);\n\t      return SecurityStatusReqID;\n\t    }\n\t  }, {\n\t    key: 'subscribeOrderbook',\n\t    value: function subscribeOrderbook(symbols, callback) {\n\t      var _this6 = this;\n\t\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.MD_FULL_REFRESH,\n\t        MDReqID: (0, _listener.generateRequestId)(),\n\t        SubscriptionRequestType: '1',\n\t        MarketDepth: 0,\n\t        MDUpdateType: '1', // Incremental refresh\n\t        MDEntryTypes: ['0', '1', '2'],\n\t        Instruments: symbols\n\t      };\n\t\n\t      var subscribeEvent = function subscribeEvent(data) {\n\t        if (data.MDBkTyp === '3') {\n\t          data.MDIncGrp.map(function (order) {\n\t            var dataOrder = {\n\t              index: order.MDEntryPositionNo,\n\t              price: order.MDEntryPx / 1e8,\n\t              size: order.MDEntrySize / 1e8,\n\t              side: order.MDEntryType === '0' ? 'buy' : 'sell',\n\t              userId: order.UserID,\n\t              orderId: order.OrderID,\n\t              symbol: order.Symbol,\n\t              time: new Date(order.MDEntryDate + ' ' + order.MDEntryTime).toString()\n\t            };\n\t\n\t            switch (order.MDEntryType) {\n\t              case '0':\n\t              case '1':\n\t                var orderbookEvent = 'OB:' + _events.EVENTS.ORDERBOOK[order.MDUpdateAction];\n\t                var bidOfferData = _extends({}, dataOrder, { type: orderbookEvent });\n\t\n\t                callback && callback(null, bidOfferData);\n\t                return _this6.transport.eventEmitter.emit(orderbookEvent, bidOfferData);\n\t              case '2':\n\t                var tradeEvent = 'OB:' + _events.EVENTS.TRADES[order.MDUpdateAction];\n\t                var tradeData = _extends({}, dataOrder, { type: tradeEvent });\n\t\n\t                callback && callback(null, tradeData);\n\t                return _this6.transport.eventEmitter.emit(tradeEvent, tradeData);\n\t              case '4':\n\t                break;\n\t              default:\n\t                return null;\n\t            }\n\t            return null;\n\t          });\n\t        }\n\t      };\n\t\n\t      return this.transport.emitterPromise(new Promise(function (resolve, reject) {\n\t        return _this6.send(msg).then(function (data) {\n\t          (0, _listener.registerEventEmitter)('MDReqID', data.MDReqID, subscribeEvent);\n\t          return resolve((0, _utils.formatOrderBook)(data, _this6.level));\n\t        }).catch(function (err) {\n\t          return reject(err);\n\t        });\n\t      }), callback);\n\t    }\n\t  }, {\n\t    key: 'unSubscribeOrderbook',\n\t    value: function unSubscribeOrderbook(MDReqID) {\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.MD_FULL_REFRESH,\n\t        MDReqID: MDReqID,\n\t        MarketDepth: 0,\n\t        SubscriptionRequestType: '2'\n\t      };\n\t\n\t      this.transport.sendMessage(msg);\n\t      return MDReqID;\n\t    }\n\t  }, {\n\t    key: 'executionReport',\n\t    value: function executionReport(callback) {\n\t      var _this7 = this;\n\t\n\t      (0, _listener.registerListener)('8', function (data) {\n\t        callback && callback(data);\n\t        var event = _events.EVENTS.EXECUTION_REPORT[data.ExecType];\n\t        return _this7.transport.eventEmitter.emit(_events.EXECUTION_REPORT + ':' + event, data);\n\t      });\n\t\n\t      return this.transport.eventEmitter;\n\t    }\n\t  }, {\n\t    key: 'tradeHistory',\n\t    value: function tradeHistory() {\n\t      var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t          since = _ref2.since,\n\t          filter = _ref2.filter,\n\t          _ref2$page = _ref2.page,\n\t          Page = _ref2$page === undefined ? 0 : _ref2$page,\n\t          _ref2$pageSize = _ref2.pageSize,\n\t          PageSize = _ref2$pageSize === undefined ? 80 : _ref2$pageSize;\n\t\n\t      var callback = arguments[1];\n\t\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.TRADE_HISTORY,\n\t        TradeHistoryReqID: (0, _listener.generateRequestId)(),\n\t        Page: Page,\n\t        PageSize: PageSize\n\t      };\n\t\n\t      if (filter && filter.length > 0) {\n\t        msg.Filter = filter;\n\t      }\n\t\n\t      if (since && typeof since === 'number') {\n\t        msg.Since = since;\n\t      }\n\t\n\t      var format = (0, _utils.formatTradeHistory)(this.level);\n\t\n\t      return _nodeify2.default.extend(this.send(msg).then(format)).nodeify(callback);\n\t    }\n\t  }, {\n\t    key: 'requestDeposit',\n\t    value: function requestDeposit() {\n\t      var _this8 = this;\n\t\n\t      var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t          _ref3$currency = _ref3.currency,\n\t          currency = _ref3$currency === undefined ? 'BTC' : _ref3$currency,\n\t          value = _ref3.value,\n\t          depositMethodId = _ref3.depositMethodId;\n\t\n\t      var callback = arguments[1];\n\t\n\t      var subscribeEvent = function subscribeEvent(deposit) {\n\t        callback && callback(null, deposit);\n\t        return _this8.transport.eventEmitter.emit(_events.DEPOSIT_REFRESH, deposit);\n\t      };\n\t\n\t      return this.transport.emitterPromise(new Promise(function (resolve, reject) {\n\t        return _this8.requestDeposit({ currency: currency, value: value, depositMethodId: depositMethodId }).then(function (deposit) {\n\t          (0, _listener.registerEventEmitter)('ClOrdID', deposit.ClOrdID, subscribeEvent);\n\t          return resolve(deposit);\n\t        }).catch(reject);\n\t      }), callback);\n\t    }\n\t  }, {\n\t    key: 'onDepositRefresh',\n\t    value: function onDepositRefresh(callback) {\n\t      return new Promise(function (resolve) {\n\t        (0, _listener.registerListener)('U23', function (deposit) {\n\t          callback && callback(deposit);\n\t          return resolve(deposit);\n\t        });\n\t      });\n\t    }\n\t  }, {\n\t    key: 'requestWithdraw',\n\t    value: function requestWithdraw(_ref4, callback) {\n\t      var _this9 = this;\n\t\n\t      var amount = _ref4.amount,\n\t          data = _ref4.data,\n\t          _ref4$currency = _ref4.currency,\n\t          currency = _ref4$currency === undefined ? 'BTC' : _ref4$currency,\n\t          _ref4$method = _ref4.method,\n\t          method = _ref4$method === undefined ? 'bitcoin' : _ref4$method;\n\t\n\t      var subscribeEvent = function subscribeEvent(withdraw) {\n\t        callback && callback(null, withdraw);\n\t        return _this9.transport.eventEmitter.emit(_events.WITHDRAW_REFRESH, withdraw);\n\t      };\n\t\n\t      return this.transport.emitterPromise(new Promise(function (resolve, reject) {\n\t        return _this9.requestWithdraw({ amount: amount, data: data, currency: currency, method: method }).then(function (withdraw) {\n\t          (0, _listener.registerEventEmitter)('ClOrdID', withdraw.ClOrdID, subscribeEvent);\n\t          return resolve(withdraw);\n\t        }).catch(reject);\n\t      }), callback);\n\t    }\n\t  }, {\n\t    key: 'onWithdrawRefresh',\n\t    value: function onWithdrawRefresh(callback) {\n\t      return new Promise(function (resolve) {\n\t        (0, _listener.registerListener)('U9', function (withdraw) {\n\t          callback && callback(withdraw);\n\t          return resolve(withdraw);\n\t        });\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return BlinkTradeWS;\n\t}(_trade2.default);\n\t\n\texports.default = BlinkTradeWS;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"nodeify\");\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"eventemitter2\");\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.getListeners = getListeners;\n\texports.generateRequestId = generateRequestId;\n\texports.getListener = getListener;\n\texports.getRequest = getRequest;\n\texports.setRequest = setRequest;\n\texports.deleteRequest = deleteRequest;\n\texports.getEventEmitter = getEventEmitter;\n\texports.registerEventEmitter = registerEventEmitter;\n\texports.registerListener = registerListener;\n\t\n\tvar _messages = __webpack_require__(6);\n\t\n\tvar store = new Map(); /**\n\t                        * BlinkTradeJS SDK\n\t                        * (c) 2016-present BlinkTrade, Inc.\n\t                        *\n\t                        * This file is part of BlinkTradeJS\n\t                        *\n\t                        * This program is free software: you can redistribute it and/or modify\n\t                        * it under the terms of the GNU General Public License as published by\n\t                        * the Free Software Foundation, either version 3 of the License, or\n\t                        * (at your option) any later version.\n\t                       \n\t                        * This program is distributed in the hope that it will be useful,\n\t                        * but WITHOUT ANY WARRANTY; without even the implied warranty of\n\t                        * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n\t                        * GNU General Public License for more details.\n\t                       \n\t                        * You should have received a copy of the GNU General Public License\n\t                        * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\t                        *\n\t                        * \n\t                        */\n\t\n\tvar emitters = new Map();\n\tvar listeners = new Map();\n\t\n\tfunction getListeners() {\n\t  return listeners;\n\t}\n\t\n\tfunction generateRequestId() {\n\t  return parseInt(String(1e7 * Math.random()), 10);\n\t}\n\t\n\tfunction getListener(msgType) {\n\t  return listeners[msgType];\n\t}\n\t\n\tfunction getKey(messages, msg) {\n\t  var key = messages[msg.MsgType][1];\n\t  var value = msg[key];\n\t  return key + ':' + value;\n\t}\n\t\n\tfunction getRequest(msg) {\n\t  return store.get(getKey(_messages.MsgActionRes, msg));\n\t}\n\t\n\tfunction setRequest(msg, promise) {\n\t  store.set(getKey(_messages.MsgActionReq, msg), promise);\n\t}\n\t\n\tfunction deleteRequest(msg) {\n\t  store.delete(getKey(_messages.MsgActionRes, msg));\n\t}\n\t\n\tfunction getEventEmitter(msg) {\n\t  return emitters.get(getKey(_messages.MsgActionRes, msg));\n\t}\n\t\n\tfunction registerEventEmitter(key, value, callback) {\n\t  emitters.set(key + ':' + value, callback);\n\t}\n\t\n\tfunction registerListener(msgType, callback) {\n\t  listeners.set(msgType, callback);\n\t}\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.ActionMsgRes = exports.ActionMsgReq = exports.MsgActionRes = exports.MsgActionReq = undefined;\n\t\n\tvar _ramda = __webpack_require__(7);\n\t\n\tvar _requestTypes = __webpack_require__(8);\n\t\n\tvar reqs = _interopRequireWildcard(_requestTypes);\n\t\n\tvar _actionTypes = __webpack_require__(9);\n\t\n\tvar actions = _interopRequireWildcard(_actionTypes);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tvar msgToAction = (0, _ramda.compose)(_ramda.invertObj, (0, _ramda.map)(_ramda.head));\n\t\n\tvar MsgActionReq = exports.MsgActionReq = {\n\t  1: [actions.HEARTBEAT, reqs.TestReqID],\n\t  BE: [actions.LOGIN, reqs.UserReqID],\n\t  V: [actions.MD_FULL_REFRESH, reqs.MDReqID],\n\t  x: [actions.SECURITY_LIST, reqs.SecurityReqID],\n\t  e: [actions.SECURITY_STATUS_SUBSCRIBE, reqs.SecurityStatusReqID],\n\t  D: [actions.ORDER_SEND, reqs.ClOrdID],\n\t  F: [actions.ORDER_CANCEL, reqs.ClOrdID],\n\t  U0: [actions.SIGNUP, reqs.UserReqID],\n\t  U2: [actions.BALANCE, reqs.BalanceReqID],\n\t  U6: [actions.WITHDRAW_REQUEST, reqs.WithdrawReqID],\n\t  U4: [actions.ORDER_HISTORY, reqs.OrdersReqID],\n\t  U18: [actions.DEPOSIT_REQUEST, reqs.DepositReqID],\n\t  U20: [actions.DEPOSIT_METHODS, reqs.DepositMethodReqID],\n\t  U24: [actions.WITHDRAW_CONFIRM, reqs.WithdrawReqID],\n\t  U26: [actions.WITHDRAW_LIST, reqs.WithdrawListReqID],\n\t  U28: [actions.BROKER_LIST, reqs.BrokerListReqID],\n\t  U30: [actions.DEPOSIT_LIST, reqs.DepositListReqID],\n\t  U32: [actions.TRADE_HISTORY, reqs.TradeHistoryReqID],\n\t  U34: [actions.LEDGER_LIST, reqs.LedgerListReqID],\n\t  U38: [actions.PROFILE_UPDATE, reqs.UpdateReqID],\n\t  U50: [actions.API_KEY_LIST, reqs.APIKeyListReqID],\n\t  U52: [actions.API_KEY_CREATE, reqs.APIKeyCreateReqID],\n\t  U54: [actions.API_KEY_REVOKE, reqs.APIKeyRevokeReqID],\n\t  U70: [actions.WITHDRAW_CANCEL, reqs.WithdrawCancelReqID],\n\t  U78: [actions.WITHDRAW_COMMENT, reqs.WithdrawReqID],\n\t  B0: [actions.DEPOSIT_PROCESS, reqs.ProcessDepositReqID],\n\t  B2: [actions.CUSTOMER_LIST, reqs.CustomerListReqID],\n\t  B4: [actions.KYC_REQUEST, reqs.CustomerReqID],\n\t  B6: [actions.WITHDRAW_PROCESS, reqs.ProcessWithdrawReqID],\n\t  B8: [actions.KYC_VERIFY, reqs.VerifyCustomerReqID]\n\t};\n\t\n\tvar MsgActionRes = exports.MsgActionRes = {\n\t  0: [actions.HEARTBEAT, reqs.TestReqID],\n\t  BF: [actions.LOGIN, reqs.UserReqID],\n\t  W: [actions.MD_FULL_REFRESH, reqs.MDReqID],\n\t  X: [actions.MD_INCREMENT, reqs.MDReqID],\n\t  8: [actions.EXECUTION_REPORT, reqs.ClOrdID],\n\t  y: [actions.SECURITY_LIST, reqs.SecurityReqID],\n\t  f: [actions.SECURITY_STATUS_SUBSCRIBE, reqs.SecurityStatusReqID],\n\t  U3: [actions.BALANCE, reqs.BalanceReqID],\n\t  U7: [actions.WITHDRAW_REQUEST, reqs.WithdrawReqID],\n\t  U5: [actions.ORDER_HISTORY, reqs.OrdersReqID],\n\t  U9: [actions.WITHDRAW_REFRESH, reqs.WithdrawReqID],\n\t  U19: [actions.DEPOSIT_REQUEST, reqs.DepositReqID],\n\t  U21: [actions.DEPOSIT_METHODS, reqs.DepositMethodReqID],\n\t  U23: [actions.DEPOSIT_REFRESH, reqs.DepositReqID],\n\t  U25: [actions.WITHDRAW_CONFIRM, reqs.WithdrawReqID],\n\t  U27: [actions.WITHDRAW_LIST, reqs.WithdrawListReqID],\n\t  U29: [actions.BROKER_LIST, reqs.BrokerListReqID],\n\t  U31: [actions.DEPOSIT_LIST, reqs.DepositListReqID],\n\t  U33: [actions.TRADE_HISTORY, reqs.TradeHistoryReqID],\n\t  U35: [actions.LEDGER_LIST, reqs.LedgerListReqID],\n\t  U39: [actions.PROFILE_UPDATE, reqs.UpdateReqID],\n\t  U51: [actions.API_KEY_LIST, reqs.APIKeyListReqID],\n\t  U53: [actions.API_KEY_CREATE, reqs.APIKeyCreateReqID],\n\t  U55: [actions.API_KEY_REVOKE, reqs.APIKeyRevokeReqID],\n\t  U71: [actions.WITHDRAW_CANCEL, reqs.WithdrawCancelReqID],\n\t  U79: [actions.WITHDRAW_COMMENT, reqs.WithdrawCancelReqID],\n\t  B1: [actions.DEPOSIT_PROCESS, reqs.ProcessDepositReqID],\n\t  B3: [actions.CUSTOMER_LIST, reqs.CustomerListReqID],\n\t  B5: [actions.KYC_REQUEST, reqs.CustomerReqID],\n\t  B9: [actions.KYC_VERIFY, reqs.VerifyCustomerReqID],\n\t  B7: [actions.WITHDRAW_PROCESS, reqs.ProcessWithdrawReqID],\n\t  B11: [actions.CUSTOMER_REFRESH]\n\t};\n\t\n\tvar ActionMsgReq = exports.ActionMsgReq = msgToAction(MsgActionReq);\n\tvar ActionMsgRes = exports.ActionMsgRes = msgToAction(MsgActionRes);\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"ramda\");\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tvar ReqID = exports.ReqID = 'ReqID';\n\tvar TestReqID = exports.TestReqID = 'TestReqID';\n\tvar UserReqID = exports.UserReqID = 'UserReqID';\n\tvar SecurityReqID = exports.SecurityReqID = 'SecurityReqID';\n\tvar ResetPasswordReqID = exports.ResetPasswordReqID = 'ResetPasswordReqID';\n\tvar DepositReqID = exports.DepositReqID = 'DepositReqID';\n\tvar WithdrawReqID = exports.WithdrawReqID = 'WithdrawReqID';\n\tvar BalanceReqID = exports.BalanceReqID = 'BalanceReqID';\n\tvar OrdersReqID = exports.OrdersReqID = 'OrdersReqID';\n\tvar EnableTwoFactorReqID = exports.EnableTwoFactorReqID = 'EnableTwoFactorReqID';\n\tvar DepositMethodReqID = exports.DepositMethodReqID = 'DepositMethodReqID';\n\tvar WithdrawListReqID = exports.WithdrawListReqID = 'WithdrawListReqID';\n\tvar WithdrawCancelReqID = exports.WithdrawCancelReqID = 'WithdrawCancelReqID';\n\tvar BrokerListReqID = exports.BrokerListReqID = 'BrokerListReqID';\n\tvar DepositListReqID = exports.DepositListReqID = 'DepositListReqID';\n\tvar TradeHistoryReqID = exports.TradeHistoryReqID = 'TradeHistoryReqID';\n\tvar LedgerListReqID = exports.LedgerListReqID = 'LedgerListReqID';\n\tvar TradersRankReqID = exports.TradersRankReqID = 'TradersRankReqID';\n\tvar UpdateReqID = exports.UpdateReqID = 'UpdateReqID';\n\tvar PositionReqID = exports.PositionReqID = 'PositionReqID';\n\tvar SecurityStatusReqID = exports.SecurityStatusReqID = 'SecurityStatusReqID';\n\tvar APIKeyListReqID = exports.APIKeyListReqID = 'APIKeyListReqID';\n\tvar APIKeyCreateReqID = exports.APIKeyCreateReqID = 'APIKeyCreateReqID';\n\tvar APIKeyRevokeReqID = exports.APIKeyRevokeReqID = 'APIKeyRevokeReqID';\n\tvar ProcessDepositReqID = exports.ProcessDepositReqID = 'ProcessDepositReqID';\n\tvar CustomerListReqID = exports.CustomerListReqID = 'CustomerListReqID';\n\tvar CustomerReqID = exports.CustomerReqID = 'CustomerReqID';\n\tvar ProcessWithdrawReqID = exports.ProcessWithdrawReqID = 'ProcessWithdrawReqID';\n\tvar VerifyCustomerReqID = exports.VerifyCustomerReqID = 'VerifyCustomerReqID';\n\tvar MDReqID = exports.MDReqID = 'MDReqID';\n\tvar ClOrdID = exports.ClOrdID = 'ClOrdID';\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tvar HEARTBEAT = exports.HEARTBEAT = 'HEARTBEAT';\n\t\n\tvar BROKER_LIST = exports.BROKER_LIST = 'BROKER_LIST';\n\t\n\tvar SECURITY_LIST = exports.SECURITY_LIST = 'SECURITY_LIST';\n\tvar SECURITY_STATUS_UPDATE = exports.SECURITY_STATUS_UPDATE = 'SECURITY_STATUS_UPDATE';\n\tvar SECURITY_STATUS_SUBSCRIBE = exports.SECURITY_STATUS_SUBSCRIBE = 'SECURITY_STATUS_SUBSCRIBE';\n\tvar SECURITY_STATUS_UNSUBSCRIBE = exports.SECURITY_STATUS_UNSUBSCRIBE = 'SECURITY_STATUS_UNSUBSCRIBE';\n\t\n\tvar MD_TRADES = exports.MD_TRADES = 'MD_TRADES';\n\tvar MD_TRADES_UNSUBSCRIBE = exports.MD_TRADES_UNSUBSCRIBE = 'MD_TRADES_UNSUBSCRIBE';\n\tvar MD_INCREMENT = exports.MD_INCREMENT = 'MD_INCREMENT';\n\tvar MD_FULL_REFRESH = exports.MD_FULL_REFRESH = 'MD_FULL_REFRESH';\n\tvar MD_UNSUBSCRIBE = exports.MD_UNSUBSCRIBE = 'MD_UNSUBSCRIBE';\n\tvar MD_OPENING = exports.MD_OPENING = 'MD_OPENING';\n\t\n\tvar OB_NEW_ORDER = exports.OB_NEW_ORDER = 'OB_NEW_ORDER';\n\tvar OB_UPDATE_ORDER = exports.OB_UPDATE_ORDER = 'OB_UPDATE_ORDER';\n\tvar OB_DELETE_ORDER = exports.OB_DELETE_ORDER = 'OB_DELETE_ORDER';\n\tvar OB_DELETE_ORDERS_THRU = exports.OB_DELETE_ORDERS_THRU = 'OB_DELETE_ORDERS_THRU';\n\t\n\tvar EXECUTION_REPORT = exports.EXECUTION_REPORT = 'EXECUTION_REPORT';\n\tvar EXECUTION_REPORT_NEW = exports.EXECUTION_REPORT_NEW = 'EXECUTION_REPORT_NEW';\n\tvar EXECUTION_REPORT_PARTIAL = exports.EXECUTION_REPORT_PARTIAL = 'EXECUTION_REPORT_PARTIAL';\n\tvar EXECUTION_REPORT_EXECUTION = exports.EXECUTION_REPORT_EXECUTION = 'EXECUTION_REPORT_EXECUTION';\n\tvar EXECUTION_REPORT_CANCELED = exports.EXECUTION_REPORT_CANCELED = 'EXECUTION_REPORT_CANCELED';\n\tvar EXECUTION_REPORT_REJECTED = exports.EXECUTION_REPORT_REJECTED = 'EXECUTION_REPORT_REJECTED';\n\t\n\tvar ORDER_HISTORY = exports.ORDER_HISTORY = 'ORDER_HISTORY';\n\t\n\tvar ORDER_SEND = exports.ORDER_SEND = 'ORDER_SEND';\n\tvar ORDER_CANCEL = exports.ORDER_CANCEL = 'ORDER_CANCEL';\n\t\n\tvar TRADE_NEW = exports.TRADE_NEW = 'TRADE_NEW';\n\tvar TRADE_HISTORY = exports.TRADE_HISTORY = 'TRADE_HISTORY';\n\t\n\tvar TRADES = exports.TRADES = 'TRADES';\n\t\n\tvar SIGNUP = exports.SIGNUP = 'SIGNUP';\n\t\n\tvar LOGIN = exports.LOGIN = 'LOGIN';\n\tvar LOGOUT = exports.LOGOUT = 'LOGOUT';\n\tvar LOGIN_REQUIRED = exports.LOGIN_REQUIRED = 'LOGIN_REQUIRED';\n\tvar LOGIN_CLOSE = exports.LOGIN_CLOSE = 'LOGIN_CLOSE';\n\t\n\tvar CHANGE_PASSWORD = exports.CHANGE_PASSWORD = 'CHANGE_PASSWORD';\n\t\n\tvar BALANCE = exports.BALANCE = 'BALANCE';\n\t\n\tvar PROFILE_UPDATE = exports.PROFILE_UPDATE = 'PROFILE_UPDATE';\n\t\n\tvar WITHDRAW_LIST = exports.WITHDRAW_LIST = 'WITHDRAW_LIST';\n\tvar WITHDRAW_CANCEL = exports.WITHDRAW_CANCEL = 'WITHDRAW_CANCEL';\n\tvar WITHDRAW_FILTER = exports.WITHDRAW_FILTER = 'WITHDRAW_FILTER';\n\tvar WITHDRAW_REFRESH = exports.WITHDRAW_REFRESH = 'WITHDRAW_REFRESH';\n\tvar WITHDRAW_PROCESS = exports.WITHDRAW_PROCESS = 'WITHDRAW_PROCESS';\n\tvar WITHDRAW_CONFIRM = exports.WITHDRAW_CONFIRM = 'WITHDRAW_CONFIRM';\n\tvar WITHDRAW_COMMENT = exports.WITHDRAW_COMMENT = 'WITHDRAW_COMMENT';\n\tvar WITHDRAW_REQUEST = exports.WITHDRAW_REQUEST = 'WITHDRAW_REQUEST';\n\tvar WITHDRAW_SET_NEW_VISIBLE = exports.WITHDRAW_SET_NEW_VISIBLE = 'WITHDRAW_SET_NEW_VISIBLE';\n\t\n\tvar DEPOSIT_LIST = exports.DEPOSIT_LIST = 'DEPOSIT_LIST';\n\tvar DEPOSIT_FILTER = exports.DEPOSIT_FILTER = 'DEPOSIT_FILTER';\n\tvar DEPOSIT_REFRESH = exports.DEPOSIT_REFRESH = 'DEPOSIT_REFRESH';\n\tvar DEPOSIT_PROCESS = exports.DEPOSIT_PROCESS = 'DEPOSIT_PROCESS';\n\tvar DEPOSIT_REQUEST = exports.DEPOSIT_REQUEST = 'DEPOSIT_REQUEST';\n\tvar DEPOSIT_METHODS = exports.DEPOSIT_METHODS = 'DEPOSIT_METHODS';\n\tvar DEPOSIT_SET_NEW_VISIBLE = exports.DEPOSIT_SET_NEW_VISIBLE = 'DEPOSIT_SET_NEW_VISIBLE';\n\t\n\tvar LEDGER_LIST = exports.LEDGER_LIST = 'LEDGER_LIST';\n\tvar LEDGER_FILTER = exports.LEDGER_FILTER = 'LEDGER_FILTER';\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tvar ORDER_BOOK_TRADE_NEW = exports.ORDER_BOOK_TRADE_NEW = 'TRADE_NEW';\n\tvar ORDER_BOOK_NEW_ORDER = exports.ORDER_BOOK_NEW_ORDER = 'NEW_ORDER';\n\tvar ORDER_BOOK_UPDATE_ORDER = exports.ORDER_BOOK_UPDATE_ORDER = 'UPDATE_ORDER';\n\tvar ORDER_BOOK_DELETE_ORDER = exports.ORDER_BOOK_DELETE_ORDER = 'DELETE_ORDER';\n\tvar ORDER_BOOK_DELETE_ORDERS_THRU = exports.ORDER_BOOK_DELETE_ORDERS_THRU = 'DELETE_ORDERS_THRU';\n\t\n\tvar EXECUTION_REPORT = exports.EXECUTION_REPORT = 'EXECUTION_REPORT';\n\tvar EXECUTION_REPORT_NEW = exports.EXECUTION_REPORT_NEW = 'NEW';\n\tvar EXECUTION_REPORT_PARTIAL = exports.EXECUTION_REPORT_PARTIAL = 'PARTIAL';\n\tvar EXECUTION_REPORT_EXECUTION = exports.EXECUTION_REPORT_EXECUTION = 'EXECUTION';\n\tvar EXECUTION_REPORT_CANCELED = exports.EXECUTION_REPORT_CANCELED = 'CANCELED';\n\tvar EXECUTION_REPORT_REJECTED = exports.EXECUTION_REPORT_REJECTED = 'REJECTED';\n\t\n\t/* eslint-disable quote-props */\n\tvar EVENTS = exports.EVENTS = {\n\t  ORDERBOOK: {\n\t    '0': ORDER_BOOK_NEW_ORDER,\n\t    '1': ORDER_BOOK_UPDATE_ORDER,\n\t    '2': ORDER_BOOK_DELETE_ORDER,\n\t    '3': ORDER_BOOK_DELETE_ORDERS_THRU\n\t  },\n\t  TRADES: {\n\t    '0': ORDER_BOOK_TRADE_NEW\n\t  },\n\t  EXECUTION_REPORT: {\n\t    '0': EXECUTION_REPORT_NEW,\n\t    '1': EXECUTION_REPORT_PARTIAL,\n\t    '2': EXECUTION_REPORT_EXECUTION,\n\t    '4': EXECUTION_REPORT_CANCELED,\n\t    '8': EXECUTION_REPORT_REJECTED\n\t  }\n\t};\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.formatOrderBook = exports.formatTradeHistory = exports.formatColumns = undefined;\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _ramda = __webpack_require__(7);\n\t\n\tfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\t\n\tvar formatColumns = exports.formatColumns = function formatColumns(field, level) {\n\t  return function (data) {\n\t    if (level === 2) {\n\t      var list = (0, _ramda.map)((0, _ramda.zipObj)(data.Columns), data[field]);\n\t      return Promise.resolve(_extends({}, data, _defineProperty({}, field, list)));\n\t    }\n\t\n\t    return Promise.resolve(data);\n\t  };\n\t};\n\t\n\tvar formatTradeHistory = exports.formatTradeHistory = function formatTradeHistory(level) {\n\t  return function (data) {\n\t    if (level === 2) {\n\t      var TradeHistoryGrp = (0, _ramda.compose)((0, _ramda.groupBy)((0, _ramda.prop)('Market')), (0, _ramda.map)((0, _ramda.zipObj)(data.Columns)))(data.TradeHistoryGrp);\n\t\n\t      return Promise.resolve(_extends({}, data, { TradeHistoryGrp: TradeHistoryGrp }));\n\t    }\n\t\n\t    return Promise.resolve(data);\n\t  };\n\t};\n\t\n\tvar formatOrderBook = exports.formatOrderBook = function formatOrderBook(data, level) {\n\t  if (level === 2) {\n\t    var _data$MDFullGrp$filte = data.MDFullGrp.filter(function (order) {\n\t      return order.MDEntryType === '0' || order.MDEntryType === '1';\n\t    }).reduce(function (prev, order) {\n\t      var side = order.MDEntryType === '0' ? 'bids' : 'asks';\n\t      (prev[side] || (prev[side] = [])).push([order.MDEntryPx / 1e8, order.MDEntrySize / 1e8, order.UserID, order.OrderID]);\n\t      return prev;\n\t    }, []),\n\t        bids = _data$MDFullGrp$filte.bids,\n\t        asks = _data$MDFullGrp$filte.asks;\n\t\n\t    return _extends({}, data, {\n\t      MDFullGrp: _defineProperty({}, data.Symbol, {\n\t        bids: bids,\n\t        asks: asks\n\t      })\n\t    });\n\t  }\n\t\n\t  return data;\n\t};\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * BlinkTradeJS SDK\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * (c) 2016-present BlinkTrade, Inc.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This file is part of BlinkTradeJS\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This program is free software: you can redistribute it and/or modify\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * it under the terms of the GNU General Public License as published by\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * the Free Software Foundation, either version 3 of the License, or\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * (at your option) any later version.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     \n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This program is distributed in the hope that it will be useful,\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * but WITHOUT ANY WARRANTY; without even the implied warranty of\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * GNU General Public License for more details.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     \n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * You should have received a copy of the GNU General Public License\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * \n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\t\n\tvar _nodeify = __webpack_require__(3);\n\t\n\tvar _nodeify2 = _interopRequireDefault(_nodeify);\n\t\n\tvar _messages = __webpack_require__(6);\n\t\n\tvar _utils = __webpack_require__(11);\n\t\n\tvar _listener = __webpack_require__(5);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar TradeBase = function () {\n\t  function TradeBase(params) {\n\t    _classCallCheck(this, TradeBase);\n\t\n\t    this.level = params.level;\n\t    this.brokerId = params.brokerId;\n\t  }\n\t\n\t  _createClass(TradeBase, [{\n\t    key: 'changeBrokerId',\n\t    value: function changeBrokerId(brokerId) {\n\t      this.brokerId = brokerId;\n\t    }\n\t  }, {\n\t    key: 'balance',\n\t    value: function balance(clientId, callback) {\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.BALANCE,\n\t        BalanceReqID: (0, _listener.generateRequestId)()\n\t      };\n\t\n\t      if (clientId) {\n\t        msg.ClientID = clientId;\n\t      }\n\t\n\t      return _nodeify2.default.extend(this.send(msg)).nodeify(callback);\n\t    }\n\t  }, {\n\t    key: 'myOrders',\n\t    value: function myOrders() {\n\t      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t          _ref$page = _ref.page,\n\t          Page = _ref$page === undefined ? 0 : _ref$page,\n\t          _ref$pageSize = _ref.pageSize,\n\t          PageSize = _ref$pageSize === undefined ? 40 : _ref$pageSize,\n\t          filter = _ref.filter;\n\t\n\t      var callback = arguments[1];\n\t\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.ORDER_HISTORY,\n\t        OrdersReqID: (0, _listener.generateRequestId)(),\n\t        Page: Page,\n\t        PageSize: PageSize\n\t      };\n\t\n\t      if (filter) {\n\t        msg.Filter = filter;\n\t      }\n\t\n\t      var format = (0, _utils.formatColumns)('OrdListGrp', this.level);\n\t\n\t      return _nodeify2.default.extend(this.send(msg).then(format)).nodeify(callback);\n\t    }\n\t  }, {\n\t    key: 'sendOrder',\n\t    value: function sendOrder(_ref2, callback) {\n\t      var side = _ref2.side,\n\t          amount = _ref2.amount,\n\t          price = _ref2.price,\n\t          symbol = _ref2.symbol;\n\t\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.ORDER_SEND,\n\t        ClOrdID: (0, _listener.generateRequestId)(),\n\t        Symbol: symbol,\n\t        Side: side,\n\t        OrdType: '2',\n\t        Price: price,\n\t        OrderQty: amount,\n\t        BrokerID: this.brokerId\n\t      };\n\t\n\t      return _nodeify2.default.extend(this.send(msg)).nodeify(callback);\n\t    }\n\t  }, {\n\t    key: 'cancelOrder',\n\t    value: function cancelOrder() {\n\t      var param = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t      var callback = arguments[1];\n\t\n\t      var orderId = param.orderId ? param.orderId : param;\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.ORDER_CANCEL\n\t      };\n\t\n\t      if (param.clientId) {\n\t        msg.ClOrdID = param.clientId;\n\t      }\n\t\n\t      if (param.orderId) {\n\t        msg.OrderID = orderId;\n\t      }\n\t\n\t      return _nodeify2.default.extend(this.send(msg)).nodeify(callback);\n\t    }\n\t\n\t    /**\n\t     * status: 1-Pending, 2-In Progress, 4-Completed, 8-Cancelled\n\t     */\n\t\n\t  }, {\n\t    key: 'requestWithdrawList',\n\t    value: function requestWithdrawList() {\n\t      var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t          _ref3$page = _ref3.page,\n\t          Page = _ref3$page === undefined ? 0 : _ref3$page,\n\t          _ref3$pageSize = _ref3.pageSize,\n\t          PageSize = _ref3$pageSize === undefined ? 20 : _ref3$pageSize,\n\t          _ref3$status = _ref3.status,\n\t          StatusList = _ref3$status === undefined ? ['1', '2', '4', '8'] : _ref3$status,\n\t          filter = _ref3.filter,\n\t          clientId = _ref3.clientId;\n\t\n\t      var callback = arguments[1];\n\t\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.WITHDRAW_LIST,\n\t        WithdrawListReqID: (0, _listener.generateRequestId)(),\n\t        Page: Page,\n\t        PageSize: PageSize,\n\t        StatusList: StatusList\n\t      };\n\t\n\t      if (filter && filter.length) {\n\t        msg.Filter = filter;\n\t      }\n\t\n\t      if (clientId) {\n\t        msg.ClientID = clientId;\n\t      }\n\t\n\t      var format = (0, _utils.formatColumns)('WithdrawListGrp', this.level);\n\t\n\t      return _nodeify2.default.extend(this.send(msg).then(format)).nodeify(callback);\n\t    }\n\t  }, {\n\t    key: 'requestWithdraw',\n\t    value: function requestWithdraw(_ref4, callback) {\n\t      var amount = _ref4.amount,\n\t          data = _ref4.data,\n\t          _ref4$currency = _ref4.currency,\n\t          currency = _ref4$currency === undefined ? 'BTC' : _ref4$currency,\n\t          _ref4$method = _ref4.method,\n\t          method = _ref4$method === undefined ? 'bitcoin' : _ref4$method;\n\t\n\t      var reqId = (0, _listener.generateRequestId)();\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.WITHDRAW_REQUEST,\n\t        WithdrawReqID: reqId,\n\t        ClOrdID: reqId,\n\t        Method: method,\n\t        Amount: amount,\n\t        Currency: currency,\n\t        Data: data\n\t      };\n\t\n\t      return _nodeify2.default.extend(this.send(msg)).nodeify(callback);\n\t    }\n\t  }, {\n\t    key: 'confirmWithdraw',\n\t    value: function confirmWithdraw(_ref5, callback) {\n\t      var WithdrawID = _ref5.withdrawId,\n\t          confirmationToken = _ref5.confirmationToken,\n\t          secondFactor = _ref5.secondFactor;\n\t\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.CONFIRM_WITHDRAW,\n\t        WithdrawReqID: (0, _listener.generateRequestId)(),\n\t        WithdrawID: WithdrawID\n\t      };\n\t\n\t      if (confirmationToken) {\n\t        msg.ConfirmationToken = confirmationToken;\n\t      }\n\t\n\t      if (secondFactor) {\n\t        msg.SecondFactor = secondFactor;\n\t      }\n\t\n\t      return _nodeify2.default.extend(this.send(msg)).nodeify(callback);\n\t    }\n\t  }, {\n\t    key: 'cancelWithdraw',\n\t    value: function cancelWithdraw(withdrawId, callback) {\n\t      var reqId = (0, _listener.generateRequestId)();\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.CANCEL_WITHDRAW,\n\t        WithdrawCancelReqID: reqId,\n\t        ClOrdID: reqId,\n\t        WithdrawID: withdrawId\n\t      };\n\t\n\t      return _nodeify2.default.extend(this.send(msg)).nodeify(callback);\n\t    }\n\t  }, {\n\t    key: 'requestDepositList',\n\t    value: function requestDepositList() {\n\t      var _ref6 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t          _ref6$page = _ref6.page,\n\t          Page = _ref6$page === undefined ? 0 : _ref6$page,\n\t          _ref6$pageSize = _ref6.pageSize,\n\t          PageSize = _ref6$pageSize === undefined ? 20 : _ref6$pageSize,\n\t          _ref6$status = _ref6.status,\n\t          StatusList = _ref6$status === undefined ? ['1', '2', '4', '8'] : _ref6$status,\n\t          filter = _ref6.filter,\n\t          clientId = _ref6.clientId;\n\t\n\t      var callback = arguments[1];\n\t\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.DEPOSIT_LIST,\n\t        DepositListReqID: (0, _listener.generateRequestId)(),\n\t        Page: Page,\n\t        PageSize: PageSize,\n\t        StatusList: StatusList\n\t      };\n\t\n\t      if (filter && filter.length) {\n\t        msg.Filter = filter;\n\t      }\n\t\n\t      if (clientId) {\n\t        msg.ClientID = clientId;\n\t      }\n\t\n\t      var format = (0, _utils.formatColumns)('DepositListGrp', this.level);\n\t\n\t      return _nodeify2.default.extend(this.send(msg).then(format)).nodeify(callback);\n\t    }\n\t  }, {\n\t    key: 'requestDeposit',\n\t    value: function requestDeposit() {\n\t      var _ref7 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t          _ref7$currency = _ref7.currency,\n\t          currency = _ref7$currency === undefined ? 'BTC' : _ref7$currency,\n\t          value = _ref7.value,\n\t          depositMethodId = _ref7.depositMethodId;\n\t\n\t      var callback = arguments[1];\n\t\n\t      var reqId = (0, _listener.generateRequestId)();\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.DEPOSIT_REQUEST,\n\t        DepositReqID: reqId,\n\t        ClOrdID: reqId,\n\t        Currency: currency,\n\t        BrokerID: this.brokerId\n\t      };\n\t\n\t      if (currency !== 'BTC') {\n\t        msg.DepositMethodID = depositMethodId;\n\t        msg.Value = value;\n\t      }\n\t\n\t      return _nodeify2.default.extend(this.send(msg)).nodeify(callback);\n\t    }\n\t  }, {\n\t    key: 'requestDepositMethods',\n\t    value: function requestDepositMethods(callback) {\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.DEPOSIT_METHODS,\n\t        DepositMethodReqID: (0, _listener.generateRequestId)(),\n\t        BrokerID: this.brokerId\n\t      };\n\t\n\t      return _nodeify2.default.extend(this.send(msg)).nodeify(callback);\n\t    }\n\t  }, {\n\t    key: 'requestLedger',\n\t    value: function requestLedger() {\n\t      var _ref8 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t          _ref8$page = _ref8.page,\n\t          Page = _ref8$page === undefined ? 0 : _ref8$page,\n\t          _ref8$pageSize = _ref8.pageSize,\n\t          PageSize = _ref8$pageSize === undefined ? 20 : _ref8$pageSize,\n\t          brokerId = _ref8.brokerId,\n\t          clientId = _ref8.clientId,\n\t          currency = _ref8.currency;\n\t\n\t      var callback = arguments[1];\n\t\n\t      var msg = {\n\t        MsgType: _messages.ActionMsgReq.LEDGER_LIST,\n\t        LedgerListReqID: (0, _listener.generateRequestId)(),\n\t        BrokerID: this.brokerId,\n\t        Page: Page,\n\t        PageSize: PageSize\n\t      };\n\t\n\t      if (brokerId) {\n\t        msg.BrokerID = brokerId;\n\t      }\n\t      if (currency) {\n\t        msg.Currency = currency;\n\t      }\n\t      if (clientId) {\n\t        msg.ClientID = clientId;\n\t      }\n\t\n\t      var format = (0, _utils.formatColumns)('LedgerListGrp', this.level);\n\t\n\t      return _nodeify2.default.extend(this.send(msg).then(format)).nodeify(callback);\n\t    }\n\t  }]);\n\t\n\t  return TradeBase;\n\t}();\n\t\n\texports.default = TradeBase;\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _nodeify = __webpack_require__(3);\n\t\n\tvar _nodeify2 = _interopRequireDefault(_nodeify);\n\t\n\tvar _fingerprintjs = __webpack_require__(14);\n\t\n\tvar _fingerprintjs2 = _interopRequireDefault(_fingerprintjs);\n\t\n\tvar _eventemitter = __webpack_require__(4);\n\t\n\tvar _transport = __webpack_require__(15);\n\t\n\tvar _transport2 = _interopRequireDefault(_transport);\n\t\n\tvar _listener = __webpack_require__(5);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * BlinkTradeJS SDK\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * (c) 2016-present BlinkTrade, Inc.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This file is part of BlinkTradeJS\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is free software: you can redistribute it and/or modify\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * it under the terms of the GNU General Public License as published by\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * the Free Software Foundation, either version 3 of the License, or\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * (at your option) any later version.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               \n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is distributed in the hope that it will be useful,\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * but WITHOUT ANY WARRANTY; without even the implied warranty of\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * GNU General Public License for more details.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               \n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * You should have received a copy of the GNU General Public License\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * \n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar WebSocketTransport = function (_Transport) {\n\t  _inherits(WebSocketTransport, _Transport);\n\t\n\t  /*\n\t   * Event emitter to dispatch websocket updates\n\t   */\n\t\n\t\n\t  /*\n\t   * Stun object\n\t   */\n\t\n\t  /*\n\t   * WebSocket Instance\n\t   */\n\t  function WebSocketTransport() {\n\t    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t    _classCallCheck(this, WebSocketTransport);\n\t\n\t    var _this = _possibleConstructorReturn(this, (WebSocketTransport.__proto__ || Object.getPrototypeOf(WebSocketTransport)).call(this, params, 'ws'));\n\t\n\t    _this.stun = { local: null, public: [] };\n\t\n\t    _this.getStun();\n\t    _this.getFingerPrint(params.fingerPrint);\n\t    _this.headers = params.headers;\n\t\n\t    _this.eventEmitter = new _eventemitter.EventEmitter2({ wildcard: true, delimiter: ':' });\n\t    return _this;\n\t  }\n\t\n\t  /*\n\t   * Transport Promise\n\t   */\n\t\n\t\n\t  /*\n\t   * FingerPrint\n\t   */\n\t\n\t\n\t  _createClass(WebSocketTransport, [{\n\t    key: 'connect',\n\t    value: function connect(callback) {\n\t      var _this2 = this;\n\t\n\t      return _nodeify2.default.extend(new Promise(function (resolve, reject) {\n\t        _this2.request = { resolve: resolve, reject: reject };\n\t\n\t        var WebSocket = _this2.isNode ? __webpack_require__(17) : window.WebSocket;\n\t\n\t        _this2.socket = new WebSocket(_this2.endpoint, null, _this2.headers);\n\t        _this2.socket.onopen = _this2.onOpen.bind(_this2);\n\t        _this2.socket.onclose = _this2.onClose.bind(_this2);\n\t        _this2.socket.onerror = _this2.onError.bind(_this2);\n\t        _this2.socket.onmessage = _this2.onMessage.bind(_this2);\n\t      })).nodeify(callback);\n\t    }\n\t  }, {\n\t    key: 'disconnect',\n\t    value: function disconnect() {\n\t      this.socket.close();\n\t    }\n\t  }, {\n\t    key: 'onOpen',\n\t    value: function onOpen() {\n\t      this.request.resolve({ connected: true });\n\t    }\n\t  }, {\n\t    key: 'onClose',\n\t    value: function onClose() {}\n\t  }, {\n\t    key: 'onError',\n\t    value: function onError(error) {\n\t      this.request.reject(error);\n\t    }\n\t  }, {\n\t    key: 'sendMessage',\n\t    value: function sendMessage(msg) {\n\t      if (this.socket.readyState === 1) {\n\t        var data = msg;\n\t\n\t        data.STUNTIP = this.stun;\n\t        data.FingerPrint = this.fingerPrint;\n\t\n\t        this.socket.send(JSON.stringify(data));\n\t      }\n\t    }\n\t  }, {\n\t    key: 'sendMessageAsPromise',\n\t    value: function sendMessageAsPromise(msg) {\n\t      var _this3 = this;\n\t\n\t      return new Promise(function (resolve, reject) {\n\t        var promise = { resolve: resolve, reject: reject };\n\t        (0, _listener.setRequest)(msg, { resolve: resolve, reject: reject });\n\t        // We are passing the promise as a parameter to spy it in our tests\n\t        _this3.sendMessage(msg, promise);\n\t      });\n\t    }\n\t  }, {\n\t    key: 'onMessage',\n\t    value: function onMessage(msg) {\n\t      var data = JSON.parse(msg.data);\n\t      if (data.MsgType === 'ERROR') {\n\t        throw new Error('Error: ' + data.Detail + ' ' + data.Description);\n\t      }\n\t\n\t      var request = (0, _listener.getRequest)(data);\n\t      var emitter = (0, _listener.getEventEmitter)(data);\n\t      var listener = (0, _listener.getListener)(data.MsgType);\n\t\n\t      this.dispatchPromise(request, data);\n\t      this.dispatchEventEmitters(emitter, data);\n\t      this.dispatchListeners(listener, data);\n\t    }\n\t  }, {\n\t    key: 'dispatchPromise',\n\t    value: function dispatchPromise(request, data) {\n\t      if (request && request.resolve) {\n\t        (0, _listener.deleteRequest)(data);\n\t        return request.resolve(data);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'dispatchEventEmitters',\n\t    value: function dispatchEventEmitters(emitter, data) {\n\t      if (emitter) {\n\t        return emitter(data);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'dispatchListeners',\n\t    value: function dispatchListeners(listener, data) {\n\t      return listener && listener(data);\n\t    }\n\t  }, {\n\t    key: 'getFingerPrint',\n\t    value: function getFingerPrint(customFingerprint) {\n\t      var _this4 = this;\n\t\n\t      if (this.isNode) {\n\t        return __webpack_require__(18).getMac(function (macAddress) {\n\t          _this4.fingerPrint = macAddress;\n\t        });\n\t      } else if (this.isBrowser) {\n\t        return new _fingerprintjs2.default().get(function (fingerPrint) {\n\t          _this4.fingerPrint = Math.abs(__webpack_require__(20).encodeByteArray(fingerPrint)).toString();\n\t        });\n\t      } else if (customFingerprint) {\n\t        this.fingerPrint = customFingerprint;\n\t      } else {\n\t        throw new Error('FingerPrint not provided');\n\t      }\n\t    }\n\t  }, {\n\t    key: 'getStun',\n\t    value: function getStun() {\n\t      var _this5 = this;\n\t\n\t      if (this.isNode) {\n\t        __webpack_require__(21).getStun(function (data) {\n\t          _this5.stun = data;\n\t        });\n\t      }\n\t    }\n\t\n\t    /* eslint-disable no-param-reassign */\n\t\n\t  }, {\n\t    key: 'emitterPromise',\n\t    value: function emitterPromise(promise, callback) {\n\t      var _this6 = this;\n\t\n\t      promise.on = function (event, listener) {\n\t        _this6.eventEmitter.on(event, listener);\n\t        return promise;\n\t      };\n\t      promise.onAny = function (listener) {\n\t        _this6.eventEmitter.onAny(listener);\n\t        return promise;\n\t      };\n\t      promise.offAny = function (listener) {\n\t        _this6.eventEmitter.offAny(listener);\n\t        return promise;\n\t      };\n\t      promise.once = function (event, listener) {\n\t        _this6.eventEmitter.once(event, listener);\n\t        return promise;\n\t      };\n\t      promise.many = function (event, times, listener) {\n\t        _this6.eventEmitter.many(event, times, listener);\n\t        return promise;\n\t      };\n\t      promise.removeListener = function (event, listener) {\n\t        _this6.eventEmitter.removeListener(event, listener);\n\t        return promise;\n\t      };\n\t      promise.removeAllListeners = function (events) {\n\t        _this6.eventEmitter.removeAllListeners(events);\n\t        return promise;\n\t      };\n\t\n\t      return _nodeify2.default.extend(promise).nodeify(callback);\n\t    }\n\t    /* eslint-enable no-param-reassign */\n\t\n\t  }]);\n\t\n\t  return WebSocketTransport;\n\t}(_transport2.default);\n\t\n\texports.default = WebSocketTransport;\n\n/***/ },\n/* 14 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"fingerprintjs2\");\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _common = __webpack_require__(16);\n\t\n\tvar _common2 = _interopRequireDefault(_common);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } } /**\n\t                                                                                                                                                           * BlinkTradeJS SDK\n\t                                                                                                                                                           * (c) 2016-present BlinkTrade, Inc.\n\t                                                                                                                                                           *\n\t                                                                                                                                                           * This file is part of BlinkTradeJS\n\t                                                                                                                                                           *\n\t                                                                                                                                                           * This program is free software: you can redistribute it and/or modify\n\t                                                                                                                                                           * it under the terms of the GNU General Public License as published by\n\t                                                                                                                                                           * the Free Software Foundation, either version 3 of the License, or\n\t                                                                                                                                                           * (at your option) any later version.\n\t                                                                                                                                                          \n\t                                                                                                                                                           * This program is distributed in the hope that it will be useful,\n\t                                                                                                                                                           * but WITHOUT ANY WARRANTY; without even the implied warranty of\n\t                                                                                                                                                           * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n\t                                                                                                                                                           * GNU General Public License for more details.\n\t                                                                                                                                                          \n\t                                                                                                                                                           * You should have received a copy of the GNU General Public License\n\t                                                                                                                                                           * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\t                                                                                                                                                           *\n\t                                                                                                                                                           * \n\t                                                                                                                                                           */\n\t\n\tvar Transport =\n\t\n\t/*\n\t * Is browser environment.\n\t */\n\t\n\t/*\n\t * url endpoint.\n\t */\n\tfunction Transport() {\n\t  var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t  var env = arguments[1];\n\t\n\t  _classCallCheck(this, Transport);\n\t\n\t  /* eslint-disable indent */\n\t  var endpoint = params.url ? params.url : params.prod ? _common2.default.prod[env] : _common2.default.testnet[env];\n\t  /* eslint-enable indent */\n\t\n\t  this.endpoint = endpoint;\n\t  this.level = params.level || '2';\n\t\n\t  this.isNode = typeof window === 'undefined';\n\t  this.isBrowser = typeof document !== 'undefined';\n\t}\n\t\n\t/*\n\t * Is node.js environment.\n\t */\n\t;\n\t\n\texports.default = Transport;\n\n/***/ },\n/* 16 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = {\n\t  prod: {\n\t    ws: 'wss://ws.blinktrade.com/trade/',\n\t    rest: 'https://api.blinktrade.com/'\n\t  },\n\t  testnet: {\n\t    ws: 'wss://api_testnet.blinktrade.com/trade/',\n\t    rest: 'https://api_testnet.blinktrade.com/'\n\t  }\n\t};\n\n/***/ },\n/* 17 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"ws\");\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.getMac = getMac;\n\t\n\tvar _macaddress = __webpack_require__(19);\n\t\n\tvar _macaddress2 = _interopRequireDefault(_macaddress);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction getMac(callback) {\n\t  _macaddress2.default.all(function (err, all) {\n\t    var hashCode = function hashCode(str) {\n\t      var hash = 0;\n\t      if (str.length === 0) return hash;\n\t      for (var i = 0; i < str.length; i++) {\n\t        hash = (hash << 5) - hash + str.charCodeAt(i);\n\t        hash = hash & hash; // Convert to 32bit integer\n\t      }\n\t      return hash;\n\t    };\n\t\n\t    var macAddresses = '';\n\t    Object.keys(all).forEach(function (iface) {\n\t      macAddresses += all[iface].mac;\n\t    });\n\t\n\t    var fingerPrint = hashCode(macAddresses);\n\t    if (fingerPrint < 0) {\n\t      fingerPrint *= -1;\n\t    }\n\t\n\t    callback(fingerPrint);\n\t  });\n\t} /**\n\t   * BlinkTradeJS SDK\n\t   * (c) 2016-present BlinkTrade, Inc.\n\t   *\n\t   * This file is part of BlinkTradeJS\n\t   *\n\t   * This program is free software: you can redistribute it and/or modify\n\t   * it under the terms of the GNU General Public License as published by\n\t   * the Free Software Foundation, either version 3 of the License, or\n\t   * (at your option) any later version.\n\t  \n\t   * This program is distributed in the hope that it will be useful,\n\t   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n\t   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n\t   * GNU General Public License for more details.\n\t  \n\t   * You should have received a copy of the GNU General Public License\n\t   * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\t   *\n\t   * \n\t   */\n\t\n\t/* eslint-disable operator-assignment */\n\t/* eslint-disable no-plusplus */\n\t/* eslint-disable import/prefer-default-export */\n\n/***/ },\n/* 19 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"macaddress\");\n\n/***/ },\n/* 20 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\t/* eslint-disable no-var */\n\t/* eslint-disable no-bitwise */\n\t/* eslint-disable no-param-reassign */\n\t/* eslint-disable no-fallthrough */\n\t/* eslint-disable no-underscore-dangle */\n\t/* eslint-disable default-case */\n\t/* eslint-disable prefer-destructuring */\n\t/*\n\t * ByteArray enconding from google-closure-library\n\t */\n\t\n\tvar SEED32 = 314159265;\n\tvar CONSTANT32 = -1640531527;\n\t\n\t/**\n\t * Performs an inplace mix of an object with the integer properties (a, b, c)\n\t * and returns the final value of c.\n\t * @param {Object} mix Object with properties, a, b, and c.\n\t * @return {number} The end c-value for the mixing.\n\t * @private\n\t */\n\tvar mix32_ = function mix32_(mix) {\n\t  var a = mix.a;\n\t  var b = mix.b;\n\t  var c = mix.c;\n\t  a -= b;\n\t  a -= c;\n\t  a ^= c >>> 13;\n\t  b -= c;\n\t  b -= a;\n\t  b ^= a << 8;\n\t  c -= a;\n\t  c -= b;\n\t  c ^= b >>> 13;\n\t  a -= b;\n\t  a -= c;\n\t  a ^= c >>> 12;\n\t  b -= c;\n\t  b -= a;\n\t  b ^= a << 16;\n\t  c -= a;\n\t  c -= b;\n\t  c ^= b >>> 5;\n\t  a -= b;\n\t  a -= c;\n\t  a ^= c >>> 3;\n\t  b -= c;\n\t  b -= a;\n\t  b ^= a << 10;\n\t  c -= a;\n\t  c -= b;\n\t  c ^= b >>> 15;\n\t  mix.a = a;\n\t  mix.b = b;\n\t  mix.c = c;\n\t  return c;\n\t};\n\t\n\t/**\n\t * Converts an unsigned \"byte\" to signed, that is, convert a value in the range\n\t * (0, 2^8-1) to (-2^7, 2^7-1) in order to be compatible with Java's byte type.\n\t * @param {number} n Unsigned \"byte\" value.\n\t * @return {number} Signed \"byte\" value.\n\t * @private\n\t */\n\tvar toSigned_ = function toSigned_(n) {\n\t  return n > 127 ? n - 256 : n;\n\t};\n\t\n\tvar wordAt_ = function wordAt_(bytes, offset) {\n\t  var a = toSigned_(bytes[offset + 0]);\n\t  var b = toSigned_(bytes[offset + 1]);\n\t  var c = toSigned_(bytes[offset + 2]);\n\t  var d = toSigned_(bytes[offset + 3]);\n\t  return a + (b << 8) + (c << 16) + (d << 24);\n\t};\n\t\n\t/**\n\t * Hashes a \"byte\" array to a 32-bit value using the supplied seed.\n\t */\n\tmodule.exports.encodeByteArray = function encodeByteArray(bytes) {\n\t  var offset = 0;\n\t  var length = bytes.length;\n\t  var seed = SEED32;\n\t\n\t  var mix = {\n\t    a: CONSTANT32,\n\t    b: CONSTANT32,\n\t    c: seed\n\t  };\n\t\n\t  var keylen;\n\t  for (keylen = length; keylen >= 12; keylen -= 12, offset += 12) {\n\t    mix.a += wordAt_(bytes, offset);\n\t    mix.b += wordAt_(bytes, offset + 4);\n\t    mix.c += wordAt_(bytes, offset + 8);\n\t    mix32_(mix);\n\t  }\n\t  // Hash any remaining bytes\n\t  mix.c += length;\n\t  switch (keylen) {// deal with rest.  Some cases fall through\n\t    case 11:\n\t      mix.c += bytes[offset + 10] << 24;\n\t    case 10:\n\t      mix.c += (bytes[offset + 9] & 0xff) << 16;\n\t    case 9:\n\t      mix.c += (bytes[offset + 8] & 0xff) << 8;\n\t    // the first byte of c is reserved for the length\n\t    case 8:\n\t      mix.b += wordAt_(bytes, offset + 4);\n\t      mix.a += wordAt_(bytes, offset);\n\t      break;\n\t    case 7:\n\t      mix.b += (bytes[offset + 6] & 0xff) << 16;\n\t    case 6:\n\t      mix.b += (bytes[offset + 5] & 0xff) << 8;\n\t    case 5:\n\t      mix.b += bytes[offset + 4] & 0xff;\n\t    case 4:\n\t      mix.a += wordAt_(bytes, offset);\n\t      break;\n\t    case 3:\n\t      mix.a += (bytes[offset + 2] & 0xff) << 16;\n\t    case 2:\n\t      mix.a += (bytes[offset + 1] & 0xff) << 8;\n\t    case 1:\n\t      mix.a += bytes[offset + 0] & 0xff;\n\t    // case 0 : nothing left to add\n\t  }\n\t  return mix32_(mix);\n\t};\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }(); /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * BlinkTradeJS SDK\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * (c) 2016-present BlinkTrade, Inc.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * This file is part of BlinkTradeJS\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * This program is free software: you can redistribute it and/or modify\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * it under the terms of the GNU General Public License as published by\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * the Free Software Foundation, either version 3 of the License, or\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * (at your option) any later version.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         \n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * This program is distributed in the hope that it will be useful,\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * but WITHOUT ANY WARRANTY; without even the implied warranty of\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * GNU General Public License for more details.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         \n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * You should have received a copy of the GNU General Public License\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          */\n\t\n\t/* eslint-disable no-param-reassign */\n\t/* eslint-disable no-plusplus */\n\t/* eslint-disable import/prefer-default-export */\n\t/* eslint-disable no-restricted-properties */\n\t/* eslint-disable no-buffer-constructor */\n\t\n\texports.getStun = getStun;\n\t\n\tvar _ip = __webpack_require__(22);\n\t\n\tvar _ip2 = _interopRequireDefault(_ip);\n\t\n\tvar _dgram = __webpack_require__(23);\n\t\n\tvar _dgram2 = _interopRequireDefault(_dgram);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar stunIp = { local: null, public: [] };\n\t\n\tfunction addIPAddress(ipAddress) {\n\t  if (ipAddress.match(/^(192\\.168\\.|169\\.254\\.|10\\.|172\\.(1[6-9]|2\\d|3[01]))/)) {\n\t    stunIp.local = ipAddress;\n\t  } else if (stunIp.public.indexOf(ipAddress) === -1) {\n\t    stunIp.public.push(ipAddress);\n\t  }\n\t}\n\t\n\tfunction getStun(callback) {\n\t  var socket = _dgram2.default.createSocket('udp4');\n\t\n\t  var STUN_HEADER_LENGTH = 20;\n\t  var stunRequest = new Buffer(STUN_HEADER_LENGTH);\n\t\n\t  var STUN_METHOD_REQUEST = 0x000;\n\t  var STUN_BINDING_CLASS = 0x0001;\n\t  var STUN_MAGIC_COOKIE = 0x2112A442;\n\t  var STUN_TID_MAX = Math.pow(2, 32);\n\t\n\t  var STUN_ATTR_MAPPED_ADDRESS = 0x0001;\n\t  var STUN_ATTR_XOR_MAPPED_ADDRESS = 0x8020;\n\t  var STUN_ATTR_XOR_MAPPED_ADDRESS_ALT = 0x0020;\n\t\n\t  var stunTxId = Math.random() * STUN_TID_MAX;\n\t\n\t  var stunServers = [[3478, 'stun.services.mozilla.com'], [19302, 'stun.l.google.com'], [3478, 'stun.stunprotocol.org'], [3478, 'stun.softjoys.com'], [3478, 'stun.samsungsmartcam.com'], [3478, 'stun.sonetel.com'], [3478, 'stun.tagan.ru'], [3478, 'stun.voipgain.com'], [3478, 'stunserver.org'], [3478, 'stun.advfn.com'], [3478, 'stun.annatel.net'], [3478, 'stun.freevoipdeal.com']];\n\t\n\t  stunRequest.writeUInt16BE((STUN_BINDING_CLASS | STUN_METHOD_REQUEST) & 0x3fff, 0);\n\t  stunRequest.writeUInt16BE(0, 2);\n\t  stunRequest.writeUInt32BE(STUN_MAGIC_COOKIE, 4);\n\t  stunRequest.writeUInt32BE(0, 8);\n\t  stunRequest.writeUInt32BE(0, 12);\n\t  stunRequest.writeUInt32BE(stunTxId, 16);\n\t\n\t  socket.on('message', function (msg) {\n\t    var xor = function xor(a, b) {\n\t      var data = [];\n\t      if (b.length > a.length) {\n\t        var tmp = a;\n\t        a = b;\n\t        b = tmp;\n\t      }\n\t      for (var i = 0, len = a.length; i < len; i++) {\n\t        data.push(a[i] ^ b[i]);\n\t      }\n\t\n\t      return new Buffer(data);\n\t    };\n\t\n\t    var block = msg.readUInt8(0);\n\t    var bit1 = block & 0x80;\n\t    var bit2 = block & 0x40;\n\t\n\t    if (!(bit1 === 0 && bit2 === 0)) {\n\t      return;\n\t    }\n\t\n\t    var msgHeader = msg.slice(0, STUN_HEADER_LENGTH);\n\t    var msgAttrs = msg.slice(STUN_HEADER_LENGTH, msg.length);\n\t\n\t    var offset = 0;\n\t\n\t    while (offset < msgAttrs.length) {\n\t      var attrType = msgAttrs.readUInt16BE(offset);\n\t      offset += 2;\n\t\n\t      var attrBuffLength = msgAttrs.readUInt16BE(offset);\n\t      var blockOut = attrBuffLength % 4;\n\t      if (blockOut > 0) {\n\t        attrBuffLength += 4 - blockOut;\n\t      }\n\t      offset += 2;\n\t\n\t      var value = msgAttrs.slice(offset, offset + attrBuffLength);\n\t      offset += attrBuffLength;\n\t\n\t      var family = void 0;\n\t      var address = void 0;\n\t      switch (attrType) {\n\t        case STUN_ATTR_MAPPED_ADDRESS:\n\t          family = value.readUInt16BE(0) === 0x02 ? 6 : 4;\n\t          address = _ip2.default.toString(value, 4, family);\n\t          addIPAddress(address);\n\t          break;\n\t\n\t        case STUN_ATTR_XOR_MAPPED_ADDRESS:\n\t        case STUN_ATTR_XOR_MAPPED_ADDRESS_ALT:\n\t          family = value.readUInt16BE(0) === 0x02 ? 6 : 4;\n\t          var magic = msgHeader.slice(4, 8);\n\t          var tid = msgHeader.slice(8, 20);\n\t          var xaddr = value.slice(4, family === 4 ? 8 : 20);\n\t          var addr = xor(xaddr, family === 4 ? magic : value.concat([magic, tid]));\n\t          address = _ip2.default.toString(addr, 0, family);\n\t          addIPAddress(address);\n\t          break;\n\t        default:\n\t      }\n\t    }\n\t\n\t    callback(stunIp);\n\t  });\n\t\n\t  stunServers.map(function (_ref) {\n\t    var _ref2 = _slicedToArray(_ref, 2),\n\t        port = _ref2[0],\n\t        host = _ref2[1];\n\t\n\t    return socket.send(stunRequest, 0, stunRequest.length, port, host, function () {});\n\t  });\n\t}\n\n/***/ },\n/* 22 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"ip\");\n\n/***/ },\n/* 23 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"dgram\");\n\n/***/ },\n/* 24 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"os\");\n\n/***/ },\n/* 25 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _nodeify = __webpack_require__(3);\n\t\n\tvar _nodeify2 = _interopRequireDefault(_nodeify);\n\t\n\tvar _rest = __webpack_require__(26);\n\t\n\tvar _rest2 = _interopRequireDefault(_rest);\n\t\n\tvar _trade = __webpack_require__(12);\n\t\n\tvar _trade2 = _interopRequireDefault(_trade);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * BlinkTradeJS SDK\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * (c) 2016-present BlinkTrade, Inc.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This file is part of BlinkTradeJS\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is free software: you can redistribute it and/or modify\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * it under the terms of the GNU General Public License as published by\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * the Free Software Foundation, either version 3 of the License, or\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * (at your option) any later version.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               \n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is distributed in the hope that it will be useful,\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * but WITHOUT ANY WARRANTY; without even the implied warranty of\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * GNU General Public License for more details.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               \n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * You should have received a copy of the GNU General Public License\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * \n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar BlinkTradeRest = function (_TradeBase) {\n\t  _inherits(BlinkTradeRest, _TradeBase);\n\t\n\t  function BlinkTradeRest(params) {\n\t    _classCallCheck(this, BlinkTradeRest);\n\t\n\t    var _this = _possibleConstructorReturn(this, (BlinkTradeRest.__proto__ || Object.getPrototypeOf(BlinkTradeRest)).call(this, params));\n\t\n\t    _this.transport = params.transport || new _rest2.default(params);\n\t    return _this;\n\t  }\n\t\n\t  _createClass(BlinkTradeRest, [{\n\t    key: 'send',\n\t    value: function send(path) {\n\t      return this.transport.fetchTrade(path);\n\t    }\n\t  }, {\n\t    key: 'fetchPublic',\n\t    value: function fetchPublic(path) {\n\t      return this.transport.fetchPublic(path);\n\t    }\n\t  }, {\n\t    key: 'ticker',\n\t    value: function ticker(callback) {\n\t      return _nodeify2.default.extend(this.fetchPublic('ticker')).nodeify(callback);\n\t    }\n\t  }, {\n\t    key: 'trades',\n\t    value: function trades() {\n\t      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t          _ref$limit = _ref.limit,\n\t          limit = _ref$limit === undefined ? 100 : _ref$limit,\n\t          _ref$since = _ref.since,\n\t          since = _ref$since === undefined ? 0 : _ref$since;\n\t\n\t      var callback = arguments[1];\n\t\n\t      return _nodeify2.default.extend(this.fetchPublic('trades?limit=' + limit + '&since=' + since)).nodeify(callback);\n\t    }\n\t  }, {\n\t    key: 'orderbook',\n\t    value: function orderbook(callback) {\n\t      return _nodeify2.default.extend(this.fetchPublic('orderbook')).nodeify(callback);\n\t    }\n\t  }]);\n\t\n\t  return BlinkTradeRest;\n\t}(_trade2.default);\n\t\n\texports.default = BlinkTradeRest;\n\n/***/ },\n/* 26 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _url = __webpack_require__(27);\n\t\n\tvar _url2 = _interopRequireDefault(_url);\n\t\n\tvar _sjcl = __webpack_require__(28);\n\t\n\tvar _sjcl2 = _interopRequireDefault(_sjcl);\n\t\n\tvar _fetchPonyfill2 = __webpack_require__(29);\n\t\n\tvar _fetchPonyfill3 = _interopRequireDefault(_fetchPonyfill2);\n\t\n\tvar _transport = __webpack_require__(15);\n\t\n\tvar _transport2 = _interopRequireDefault(_transport);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * BlinkTradeJS SDK\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * (c) 2016-present BlinkTrade, Inc.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This file is part of BlinkTradeJS\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is free software: you can redistribute it and/or modify\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * it under the terms of the GNU General Public License as published by\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * the Free Software Foundation, either version 3 of the License, or\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * (at your option) any later version.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               \n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is distributed in the hope that it will be useful,\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * but WITHOUT ANY WARRANTY; without even the implied warranty of\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * GNU General Public License for more details.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               \n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * You should have received a copy of the GNU General Public License\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * \n\t                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\t\n\tvar _fetchPonyfill = (0, _fetchPonyfill3.default)(Promise),\n\t    _fetch = _fetchPonyfill.fetch;\n\t\n\tvar RestTransport = function (_Transport) {\n\t  _inherits(RestTransport, _Transport);\n\t\n\t  /**\n\t   * APISecret\n\t   */\n\t  function RestTransport(params) {\n\t    _classCallCheck(this, RestTransport);\n\t\n\t    var _this = _possibleConstructorReturn(this, (RestTransport.__proto__ || Object.getPrototypeOf(RestTransport)).call(this, params, 'rest'));\n\t\n\t    _this.key = params.key;\n\t    _this.secret = params.secret;\n\t    _this.currency = params.currency || 'USD';\n\t    return _this;\n\t  }\n\t\n\t  /**\n\t   * Exchanges currencies available.\n\t   */\n\t\n\t  /**\n\t   * APIKey\n\t   */\n\t\n\t\n\t  _createClass(RestTransport, [{\n\t    key: 'headers',\n\t    value: function headers(method, body) {\n\t      var timeStamp = Date.now().toString();\n\t      var hexKey = _sjcl2.default.codec.utf8String.toBits(this.secret);\n\t      var hmac = new _sjcl2.default.misc.hmac(hexKey, _sjcl2.default.hash.sha256);\n\t      var Signature = _sjcl2.default.codec.hex.fromBits(hmac.encrypt(timeStamp));\n\t      return {\n\t        method: method,\n\t        headers: {\n\t          'Content-Type': 'application/json',\n\t          Nonce: timeStamp,\n\t          APIKey: this.key,\n\t          Signature: Signature\n\t        },\n\t        body: JSON.stringify(body)\n\t      };\n\t    }\n\t  }, {\n\t    key: 'fetch',\n\t    value: function fetch(msg, api) {\n\t      var headers = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t\n\t      return _fetch(_url2.default.resolve(this.endpoint, api), headers).then(function (response) {\n\t        return response.json();\n\t      });\n\t    }\n\t  }, {\n\t    key: 'fetchPublic',\n\t    value: function fetchPublic(api) {\n\t      return this.fetch({}, 'api/v1/' + this.currency + '/' + api);\n\t    }\n\t  }, {\n\t    key: 'fetchTrade',\n\t    value: function fetchTrade(msg) {\n\t      var headers = this.headers('POST', msg);\n\t      return this.fetch(msg, 'tapi/v1/message', headers).then(function (response) {\n\t        return response.Status === 500 ? Promise.reject(response) : response.Responses;\n\t      }).then(function (response) {\n\t        return response.length === 1 ? response[0] : response;\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return RestTransport;\n\t}(_transport2.default);\n\t\n\texports.default = RestTransport;\n\n/***/ },\n/* 27 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"url\");\n\n/***/ },\n/* 28 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"sjcl\");\n\n/***/ },\n/* 29 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"fetch-ponyfill\");\n\n/***/ }\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// blinktrade.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8f88ac3b59a1d4b5f16d","/**\n * BlinkTradeJS SDK\n * (c) 2016-present BlinkTrade, Inc.\n *\n * This file is part of BlinkTradeJS\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @flow\n */\n\nimport Brokers from './constants/brokers';\nimport BlinkTradeWS from './ws';\nimport BlinkTradeRest from './rest';\n\nexport {\n  Brokers,\n  BlinkTradeWS,\n  BlinkTradeRest,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","export default {\n  SURBITCOIN: 1,\n  VBTC: 3,\n  FOXBIT: 4,\n  TESTNET: 5,\n  URDUBIT: 8,\n  CHILEBIT: 9,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants/brokers.js","/**\n * BlinkTradeJS SDK\n * (c) 2016-present BlinkTrade, Inc.\n *\n * This file is part of BlinkTradeJS\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @flow\n */\n\nimport nodeify from 'nodeify';\nimport { EventEmitter2 as EventEmitter } from 'eventemitter2';\nimport {\n  registerListener,\n  generateRequestId,\n  registerEventEmitter,\n} from './listener';\n\nimport {\n  EVENTS,\n  BALANCE,\n  DEPOSIT_REFRESH,\n  WITHDRAW_REFRESH,\n  EXECUTION_REPORT,\n} from './constants/events';\n\nimport { ActionMsgReq } from './constants/messages';\nimport { formatOrderBook, formatTradeHistory } from './util/utils';\n\nimport TradeBase from './trade';\nimport WebSocketTransport from './transports/websocket';\n\nclass BlinkTradeWS extends TradeBase {\n  /**\n   * Session to store login information\n   */\n  session: Object;\n\n  transport: Object;\n\n  constructor(params?: BlinkTradeBase) {\n    super(params);\n\n    this.transport = params.transport || new WebSocketTransport(params);\n    this.session = {};\n  }\n\n  connect(callback?: Function) {\n    return this.transport.connect(callback);\n  }\n\n  disconnect() {\n    return this.transport.disconnect();\n  }\n\n  send(msg: Message): Promise<Object> {\n    return this.transport.sendMessageAsPromise(msg);\n  }\n\n  heartbeat(callback?: Function): Promise<Object> {\n    const d = new Date();\n    const msg: Object = {\n      MsgType: ActionMsgReq.HEARTBEAT,\n      TestReqID: d.getTime(),\n      SendTime: d.getTime(),\n    };\n\n    return nodeify.extend(new Promise((resolve, reject) => {\n      return this.send(msg).then(data => {\n        return resolve({\n          ...data,\n          Latency: new Date(Date.now()) - data.SendTime,\n        });\n      }).catch(reject);\n    })).nodeify(callback);\n  }\n\n  login({ username, password, secondFactor, brokerId }: {\n    username: string,\n    password: string,\n    secondFactor?: string,\n    brokerId?: number,\n  }, callback?: Function): Promise<Object> {\n    let userAgent;\n    if (!this.isNode) {\n      userAgent = {\n        UserAgent: window.navigator.userAgent,\n        UserAgentLanguage: window.navigator.language,\n        UserAgentPlatform: window.navigator.platform,\n        UserAgentTimezoneOffset: new Date().getTimezoneOffset(),\n      };\n    } else {\n      const os = require('os');\n      userAgent = {\n        UserAgent: `${os.type()} ${os.release()}`,\n        UserAgentLanguage: 'en_US',\n        UserAgentPlatform: `${os.platform()} (${os.arch()})`,\n        UserAgentTimezoneOffset: new Date().getTimezoneOffset(),\n      };\n    }\n\n    const msg: Object = {\n      MsgType: ActionMsgReq.LOGIN,\n      UserReqID: generateRequestId(),\n      BrokerID: brokerId || this.brokerId,\n      Username: username,\n      Password: password,\n      UserReqTyp: '1',\n      ...userAgent,\n    };\n\n    if (secondFactor) {\n      msg.SecondFactor = secondFactor;\n    }\n\n    return nodeify.extend(new Promise((resolve, reject) => {\n      return this.send(msg).then(data => {\n        if (data.UserStatus === 1) {\n          this.session = data;\n          return resolve(data);\n        }\n\n        return reject(data);\n      }).catch(reject);\n    })).nodeify(callback);\n  }\n\n  logout(callback?: Function): Promise<Object> {\n    const msg = {\n      MsgType: ActionMsgReq.LOGOUT,\n      BrokerID: this.brokerId,\n      UserReqID: generateRequestId(),\n      Username: this.session.Username,\n      UserReqTyp: '2',\n    };\n\n    return nodeify.extend(this.send(msg)).nodeify(callback);\n  }\n\n  profile(callback?: Function): Promise<Object> {\n    const { VerificationData, ...profile } = this.session.Profile;\n    return nodeify.extend(Promise.resolve(profile)).nodeify(callback);\n  }\n\n  balance(callback?: Function): PromiseEmitter<Object> {\n    return this.transport.emitterPromise(new Promise((resolve, reject) => {\n      return super.balance(callback).then((data) => {\n        registerListener(ActionMsgReq.BALANCE, (balance) => {\n          callback && callback(null, balance);\n          return this.transport.eventEmitter.emit(BALANCE, balance);\n        });\n        return resolve(data);\n      }).catch(reject);\n    }));\n  }\n\n  subscribeTicker(symbols: Array<string>, callback?: Function): PromiseEmitter<Object> {\n    const msg = {\n      MsgType: ActionMsgReq.SECURITY_STATUS_SUBSCRIBE,\n      SecurityStatusReqID: generateRequestId(),\n      SubscriptionRequestType: '1',\n      Instruments: symbols,\n    };\n\n    const formatTicker = (data) => {\n      return {\n        ...data,\n        SellVolume: data.SellVolume / 1e8,\n        LowPx: data.LowPx / 1e8,\n        LastPx: data.LastPx / 1e8,\n        BestAsk: data.BestAsk / 1e8,\n        HighPx: data.HighPx / 1e8,\n        BuyVolume: data.BuyVolume / 1e8,\n        BestBid: data.BestBid / 1e8,\n      };\n    };\n\n    return this.transport.emitterPromise(new Promise((resolve, reject) => {\n      return this.send(msg).then(data => {\n        resolve(formatTicker(data));\n        registerEventEmitter('SecurityStatusReqID', data.SecurityStatusReqID, (ticker) => {\n          callback && callback(null, formatTicker(ticker));\n          return this.transport.eventEmitter.emit(`${ticker.Market}:${ticker.Symbol}`, formatTicker(ticker));\n        });\n      }).catch(reject);\n    }), callback);\n  }\n\n  unSubscribeTicker(SecurityStatusReqID: number): number {\n    const msg = {\n      MsgType: ActionMsgReq.SECURITY_STATUS_SUBSCRIBE,\n      SecurityStatusReqID,\n      SubscriptionRequestType: '2',\n    };\n\n    this.transport.sendMessage(msg);\n    return SecurityStatusReqID;\n  }\n\n  subscribeOrderbook(symbols: Array<string>, callback?: Function): PromiseEmitter<Object> {\n    const msg = {\n      MsgType: ActionMsgReq.MD_FULL_REFRESH,\n      MDReqID: generateRequestId(),\n      SubscriptionRequestType: '1',\n      MarketDepth: 0,\n      MDUpdateType: '1', // Incremental refresh\n      MDEntryTypes: ['0', '1', '2'],\n      Instruments: symbols,\n    };\n\n    const subscribeEvent = (data) => {\n      if (data.MDBkTyp === '3') {\n        data.MDIncGrp.map(order => {\n          const dataOrder = {\n            index: order.MDEntryPositionNo,\n            price: order.MDEntryPx / 1e8,\n            size: order.MDEntrySize / 1e8,\n            side: order.MDEntryType === '0' ? 'buy' : 'sell',\n            userId: order.UserID,\n            orderId: order.OrderID,\n            symbol: order.Symbol,\n            time: new Date(`${order.MDEntryDate} ${order.MDEntryTime}`).toString(),\n          };\n\n          switch (order.MDEntryType) {\n            case '0':\n            case '1':\n              const orderbookEvent = `OB:${EVENTS.ORDERBOOK[order.MDUpdateAction]}`;\n              const bidOfferData = { ...dataOrder, type: orderbookEvent };\n\n              callback && callback(null, bidOfferData);\n              return this.transport.eventEmitter.emit(orderbookEvent, bidOfferData);\n            case '2':\n              const tradeEvent = `OB:${EVENTS.TRADES[order.MDUpdateAction]}`;\n              const tradeData = { ...dataOrder, type: tradeEvent };\n\n              callback && callback(null, tradeData);\n              return this.transport.eventEmitter.emit(tradeEvent, tradeData);\n            case '4':\n              break;\n            default:\n              return null;\n          }\n          return null;\n        });\n      }\n    };\n\n    return this.transport.emitterPromise(new Promise((resolve, reject) => {\n      return this.send(msg).then(data => {\n        registerEventEmitter('MDReqID', data.MDReqID, subscribeEvent);\n        return resolve(formatOrderBook(data, this.level));\n      }).catch(err => reject(err));\n    }), callback);\n  }\n\n  unSubscribeOrderbook(MDReqID: number): number {\n    const msg = {\n      MsgType: ActionMsgReq.MD_FULL_REFRESH,\n      MDReqID,\n      MarketDepth: 0,\n      SubscriptionRequestType: '2',\n    };\n\n    this.transport.sendMessage(msg);\n    return MDReqID;\n  }\n\n  executionReport(callback?: Function): EventEmitter {\n    registerListener('8', (data) => {\n      callback && callback(data);\n      const event = EVENTS.EXECUTION_REPORT[data.ExecType];\n      return this.transport.eventEmitter.emit(`${EXECUTION_REPORT}:${event}`, data);\n    });\n\n    return this.transport.eventEmitter;\n  }\n\n  tradeHistory({ since, filter, page: Page = 0, pageSize: PageSize = 80 }: {\n    since?: number,\n    filter?: Array<string>,\n    page?: number,\n    pageSize?: number,\n  } = {}, callback?: Function): Promise<Object> {\n    const msg: Object = {\n      MsgType: ActionMsgReq.TRADE_HISTORY,\n      TradeHistoryReqID: generateRequestId(),\n      Page,\n      PageSize,\n    };\n\n    if (filter && filter.length > 0) {\n      msg.Filter = filter;\n    }\n\n    if (since && typeof since === 'number') {\n      msg.Since = since;\n    }\n\n    const format = formatTradeHistory(this.level);\n\n    return nodeify.extend(this.send(msg).then(format)).nodeify(callback);\n  }\n\n  requestDeposit({ currency = 'BTC', value, depositMethodId }: {\n    value?: number,\n    currency?: string,\n    depositMethodId?: number,\n  } = {}, callback?: Function): PromiseEmitter<Object> {\n    const subscribeEvent = (deposit) => {\n      callback && callback(null, deposit);\n      return this.transport.eventEmitter.emit(DEPOSIT_REFRESH, deposit);\n    };\n\n    return this.transport.emitterPromise(new Promise((resolve, reject) => {\n      return this.requestDeposit({ currency, value, depositMethodId }).then(deposit => {\n        registerEventEmitter('ClOrdID', deposit.ClOrdID, subscribeEvent);\n        return resolve(deposit);\n      }).catch(reject);\n    }), callback);\n  }\n\n  onDepositRefresh(callback?: Function): Promise<Object> {\n    return new Promise((resolve) => {\n      registerListener('U23', (deposit) => {\n        callback && callback(deposit);\n        return resolve(deposit);\n      });\n    });\n  }\n\n  requestWithdraw({ amount, data, currency = 'BTC', method = 'bitcoin' }: {\n    data: Object,\n    amount: number,\n    method?: string,\n    currency?: string,\n  }, callback?: Function): PromiseEmitter<Object> {\n    const subscribeEvent = (withdraw) => {\n      callback && callback(null, withdraw);\n      return this.transport.eventEmitter.emit(WITHDRAW_REFRESH, withdraw);\n    };\n\n    return this.transport.emitterPromise(new Promise((resolve, reject) => {\n      return this.requestWithdraw({ amount, data, currency, method }).then(withdraw => {\n        registerEventEmitter('ClOrdID', withdraw.ClOrdID, subscribeEvent);\n        return resolve(withdraw);\n      }).catch(reject);\n    }), callback);\n  }\n\n  onWithdrawRefresh(callback?: Function): Promise<Object> {\n    return new Promise((resolve) => {\n      registerListener('U9', (withdraw) => {\n        callback && callback(withdraw);\n        return resolve(withdraw);\n      });\n    });\n  }\n}\n\nexport default BlinkTradeWS;\n\n\n\n// WEBPACK FOOTER //\n// ./src/ws.js","module.exports = require(\"nodeify\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nodeify\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"eventemitter2\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"eventemitter2\"\n// module id = 4\n// module chunks = 0","/**\n * BlinkTradeJS SDK\n * (c) 2016-present BlinkTrade, Inc.\n *\n * This file is part of BlinkTradeJS\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @flow\n */\n\nimport { MsgActionReq, MsgActionRes } from './constants/messages';\n\nconst store = new Map();\nconst emitters = new Map();\nconst listeners = new Map();\n\nexport function getListeners() {\n  return listeners;\n}\n\nexport function generateRequestId(): number {\n  return parseInt(String(1e7 * Math.random()), 10);\n}\n\nexport function getListener(msgType: string): Function {\n  return listeners[msgType];\n}\n\nfunction getKey(messages: MsgTypes, msg: Object): string {\n  const key = messages[msg.MsgType][1];\n  const value = msg[key];\n  return key + ':' + value;\n}\n\nexport function getRequest(msg: Message): ?ResolveReject {\n  return store.get(getKey(MsgActionRes, msg));\n}\n\nexport function setRequest(msg: Message, promise: ResolveReject): void {\n  store.set(getKey(MsgActionReq, msg), promise);\n}\n\nexport function deleteRequest(msg: Message): void {\n  store.delete(getKey(MsgActionRes, msg));\n}\n\nexport function getEventEmitter(msg: Message): ?Function {\n  return emitters.get(getKey(MsgActionRes, msg));\n}\n\nexport function registerEventEmitter(key: string, value: number, callback: Function): Object {\n  emitters.set(key + ':' + value, callback);\n}\n\nexport function registerListener(msgType: string, callback: Function): void {\n  listeners.set(msgType, callback);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/listener.js","import { map, head, compose, invertObj } from 'ramda';\nimport * as reqs from './requestTypes';\nimport * as actions from './actionTypes';\n\nconst msgToAction = compose(invertObj, map(head));\n\nexport const MsgActionReq = {\n  1:   [actions.HEARTBEAT, reqs.TestReqID],\n  BE:  [actions.LOGIN, reqs.UserReqID],\n  V:   [actions.MD_FULL_REFRESH, reqs.MDReqID],\n  x:   [actions.SECURITY_LIST, reqs.SecurityReqID],\n  e:   [actions.SECURITY_STATUS_SUBSCRIBE, reqs.SecurityStatusReqID],\n  D:   [actions.ORDER_SEND, reqs.ClOrdID],\n  F:   [actions.ORDER_CANCEL, reqs.ClOrdID],\n  U0:  [actions.SIGNUP, reqs.UserReqID],\n  U2:  [actions.BALANCE, reqs.BalanceReqID],\n  U6:  [actions.WITHDRAW_REQUEST, reqs.WithdrawReqID],\n  U4:  [actions.ORDER_HISTORY, reqs.OrdersReqID],\n  U18: [actions.DEPOSIT_REQUEST, reqs.DepositReqID],\n  U20: [actions.DEPOSIT_METHODS, reqs.DepositMethodReqID],\n  U24: [actions.WITHDRAW_CONFIRM, reqs.WithdrawReqID],\n  U26: [actions.WITHDRAW_LIST, reqs.WithdrawListReqID],\n  U28: [actions.BROKER_LIST, reqs.BrokerListReqID],\n  U30: [actions.DEPOSIT_LIST, reqs.DepositListReqID],\n  U32: [actions.TRADE_HISTORY, reqs.TradeHistoryReqID],\n  U34: [actions.LEDGER_LIST, reqs.LedgerListReqID],\n  U38: [actions.PROFILE_UPDATE, reqs.UpdateReqID],\n  U50: [actions.API_KEY_LIST, reqs.APIKeyListReqID],\n  U52: [actions.API_KEY_CREATE, reqs.APIKeyCreateReqID],\n  U54: [actions.API_KEY_REVOKE, reqs.APIKeyRevokeReqID],\n  U70: [actions.WITHDRAW_CANCEL, reqs.WithdrawCancelReqID],\n  U78: [actions.WITHDRAW_COMMENT, reqs.WithdrawReqID],\n  B0:  [actions.DEPOSIT_PROCESS, reqs.ProcessDepositReqID],\n  B2:  [actions.CUSTOMER_LIST, reqs.CustomerListReqID],\n  B4:  [actions.KYC_REQUEST, reqs.CustomerReqID],\n  B6:  [actions.WITHDRAW_PROCESS, reqs.ProcessWithdrawReqID],\n  B8:  [actions.KYC_VERIFY, reqs.VerifyCustomerReqID],\n};\n\nexport const MsgActionRes = {\n  0:   [actions.HEARTBEAT, reqs.TestReqID],\n  BF:  [actions.LOGIN, reqs.UserReqID],\n  W:   [actions.MD_FULL_REFRESH, reqs.MDReqID],\n  X:   [actions.MD_INCREMENT, reqs.MDReqID],\n  8:   [actions.EXECUTION_REPORT, reqs.ClOrdID],\n  y:   [actions.SECURITY_LIST, reqs.SecurityReqID],\n  f:   [actions.SECURITY_STATUS_SUBSCRIBE, reqs.SecurityStatusReqID],\n  U3:  [actions.BALANCE, reqs.BalanceReqID],\n  U7:  [actions.WITHDRAW_REQUEST, reqs.WithdrawReqID],\n  U5:  [actions.ORDER_HISTORY, reqs.OrdersReqID],\n  U9:  [actions.WITHDRAW_REFRESH, reqs.WithdrawReqID],\n  U19: [actions.DEPOSIT_REQUEST, reqs.DepositReqID],\n  U21: [actions.DEPOSIT_METHODS, reqs.DepositMethodReqID],\n  U23: [actions.DEPOSIT_REFRESH, reqs.DepositReqID],\n  U25: [actions.WITHDRAW_CONFIRM, reqs.WithdrawReqID],\n  U27: [actions.WITHDRAW_LIST, reqs.WithdrawListReqID],\n  U29: [actions.BROKER_LIST, reqs.BrokerListReqID],\n  U31: [actions.DEPOSIT_LIST, reqs.DepositListReqID],\n  U33: [actions.TRADE_HISTORY, reqs.TradeHistoryReqID],\n  U35: [actions.LEDGER_LIST, reqs.LedgerListReqID],\n  U39: [actions.PROFILE_UPDATE, reqs.UpdateReqID],\n  U51: [actions.API_KEY_LIST, reqs.APIKeyListReqID],\n  U53: [actions.API_KEY_CREATE, reqs.APIKeyCreateReqID],\n  U55: [actions.API_KEY_REVOKE, reqs.APIKeyRevokeReqID],\n  U71: [actions.WITHDRAW_CANCEL, reqs.WithdrawCancelReqID],\n  U79: [actions.WITHDRAW_COMMENT, reqs.WithdrawCancelReqID],\n  B1:  [actions.DEPOSIT_PROCESS, reqs.ProcessDepositReqID],\n  B3:  [actions.CUSTOMER_LIST, reqs.CustomerListReqID],\n  B5:  [actions.KYC_REQUEST, reqs.CustomerReqID],\n  B9:  [actions.KYC_VERIFY, reqs.VerifyCustomerReqID],\n  B7:  [actions.WITHDRAW_PROCESS, reqs.ProcessWithdrawReqID],\n  B11: [actions.CUSTOMER_REFRESH],\n};\n\nexport const ActionMsgReq = msgToAction(MsgActionReq);\nexport const ActionMsgRes = msgToAction(MsgActionRes);\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants/messages.js","module.exports = require(\"ramda\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ramda\"\n// module id = 7\n// module chunks = 0","export const ReqID = 'ReqID';\nexport const TestReqID = 'TestReqID';\nexport const UserReqID = 'UserReqID';\nexport const SecurityReqID = 'SecurityReqID';\nexport const ResetPasswordReqID = 'ResetPasswordReqID';\nexport const DepositReqID = 'DepositReqID';\nexport const WithdrawReqID = 'WithdrawReqID';\nexport const BalanceReqID = 'BalanceReqID';\nexport const OrdersReqID = 'OrdersReqID';\nexport const EnableTwoFactorReqID = 'EnableTwoFactorReqID';\nexport const DepositMethodReqID = 'DepositMethodReqID';\nexport const WithdrawListReqID = 'WithdrawListReqID';\nexport const WithdrawCancelReqID = 'WithdrawCancelReqID';\nexport const BrokerListReqID = 'BrokerListReqID';\nexport const DepositListReqID = 'DepositListReqID';\nexport const TradeHistoryReqID = 'TradeHistoryReqID';\nexport const LedgerListReqID = 'LedgerListReqID';\nexport const TradersRankReqID = 'TradersRankReqID';\nexport const UpdateReqID = 'UpdateReqID';\nexport const PositionReqID = 'PositionReqID';\nexport const SecurityStatusReqID = 'SecurityStatusReqID';\nexport const APIKeyListReqID = 'APIKeyListReqID';\nexport const APIKeyCreateReqID = 'APIKeyCreateReqID';\nexport const APIKeyRevokeReqID = 'APIKeyRevokeReqID';\nexport const ProcessDepositReqID = 'ProcessDepositReqID';\nexport const CustomerListReqID = 'CustomerListReqID';\nexport const CustomerReqID = 'CustomerReqID';\nexport const ProcessWithdrawReqID = 'ProcessWithdrawReqID';\nexport const VerifyCustomerReqID = 'VerifyCustomerReqID';\nexport const MDReqID = 'MDReqID';\nexport const ClOrdID = 'ClOrdID';\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants/requestTypes.js","export const HEARTBEAT = 'HEARTBEAT';\n\nexport const BROKER_LIST = 'BROKER_LIST';\n\nexport const SECURITY_LIST = 'SECURITY_LIST';\nexport const SECURITY_STATUS_UPDATE = 'SECURITY_STATUS_UPDATE';\nexport const SECURITY_STATUS_SUBSCRIBE = 'SECURITY_STATUS_SUBSCRIBE';\nexport const SECURITY_STATUS_UNSUBSCRIBE = 'SECURITY_STATUS_UNSUBSCRIBE';\n\nexport const MD_TRADES = 'MD_TRADES';\nexport const MD_TRADES_UNSUBSCRIBE = 'MD_TRADES_UNSUBSCRIBE';\nexport const MD_INCREMENT = 'MD_INCREMENT';\nexport const MD_FULL_REFRESH = 'MD_FULL_REFRESH';\nexport const MD_UNSUBSCRIBE = 'MD_UNSUBSCRIBE';\nexport const MD_OPENING = 'MD_OPENING';\n\nexport const OB_NEW_ORDER = 'OB_NEW_ORDER';\nexport const OB_UPDATE_ORDER = 'OB_UPDATE_ORDER';\nexport const OB_DELETE_ORDER = 'OB_DELETE_ORDER';\nexport const OB_DELETE_ORDERS_THRU = 'OB_DELETE_ORDERS_THRU';\n\nexport const EXECUTION_REPORT = 'EXECUTION_REPORT';\nexport const EXECUTION_REPORT_NEW = 'EXECUTION_REPORT_NEW';\nexport const EXECUTION_REPORT_PARTIAL = 'EXECUTION_REPORT_PARTIAL';\nexport const EXECUTION_REPORT_EXECUTION = 'EXECUTION_REPORT_EXECUTION';\nexport const EXECUTION_REPORT_CANCELED = 'EXECUTION_REPORT_CANCELED';\nexport const EXECUTION_REPORT_REJECTED = 'EXECUTION_REPORT_REJECTED';\n\nexport const ORDER_HISTORY = 'ORDER_HISTORY';\n\nexport const ORDER_SEND = 'ORDER_SEND';\nexport const ORDER_CANCEL = 'ORDER_CANCEL';\n\nexport const TRADE_NEW = 'TRADE_NEW';\nexport const TRADE_HISTORY = 'TRADE_HISTORY';\n\nexport const TRADES = 'TRADES';\n\nexport const SIGNUP = 'SIGNUP';\n\nexport const LOGIN = 'LOGIN';\nexport const LOGOUT = 'LOGOUT';\nexport const LOGIN_REQUIRED = 'LOGIN_REQUIRED';\nexport const LOGIN_CLOSE = 'LOGIN_CLOSE';\n\nexport const CHANGE_PASSWORD = 'CHANGE_PASSWORD';\n\nexport const BALANCE = 'BALANCE';\n\nexport const PROFILE_UPDATE = 'PROFILE_UPDATE';\n\nexport const WITHDRAW_LIST = 'WITHDRAW_LIST';\nexport const WITHDRAW_CANCEL = 'WITHDRAW_CANCEL';\nexport const WITHDRAW_FILTER = 'WITHDRAW_FILTER';\nexport const WITHDRAW_REFRESH = 'WITHDRAW_REFRESH';\nexport const WITHDRAW_PROCESS = 'WITHDRAW_PROCESS';\nexport const WITHDRAW_CONFIRM = 'WITHDRAW_CONFIRM';\nexport const WITHDRAW_COMMENT = 'WITHDRAW_COMMENT';\nexport const WITHDRAW_REQUEST = 'WITHDRAW_REQUEST';\nexport const WITHDRAW_SET_NEW_VISIBLE = 'WITHDRAW_SET_NEW_VISIBLE';\n\nexport const DEPOSIT_LIST = 'DEPOSIT_LIST';\nexport const DEPOSIT_FILTER = 'DEPOSIT_FILTER';\nexport const DEPOSIT_REFRESH = 'DEPOSIT_REFRESH';\nexport const DEPOSIT_PROCESS = 'DEPOSIT_PROCESS';\nexport const DEPOSIT_REQUEST = 'DEPOSIT_REQUEST';\nexport const DEPOSIT_METHODS = 'DEPOSIT_METHODS';\nexport const DEPOSIT_SET_NEW_VISIBLE = 'DEPOSIT_SET_NEW_VISIBLE';\n\nexport const LEDGER_LIST = 'LEDGER_LIST';\nexport const LEDGER_FILTER = 'LEDGER_FILTER';\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants/actionTypes.js","export const ORDER_BOOK_TRADE_NEW = 'TRADE_NEW';\nexport const ORDER_BOOK_NEW_ORDER = 'NEW_ORDER';\nexport const ORDER_BOOK_UPDATE_ORDER = 'UPDATE_ORDER';\nexport const ORDER_BOOK_DELETE_ORDER = 'DELETE_ORDER';\nexport const ORDER_BOOK_DELETE_ORDERS_THRU = 'DELETE_ORDERS_THRU';\n\nexport const EXECUTION_REPORT = 'EXECUTION_REPORT';\nexport const EXECUTION_REPORT_NEW = 'NEW';\nexport const EXECUTION_REPORT_PARTIAL = 'PARTIAL';\nexport const EXECUTION_REPORT_EXECUTION = 'EXECUTION';\nexport const EXECUTION_REPORT_CANCELED = 'CANCELED';\nexport const EXECUTION_REPORT_REJECTED = 'REJECTED';\n\n/* eslint-disable quote-props */\nexport const EVENTS = {\n  ORDERBOOK: {\n    '0': ORDER_BOOK_NEW_ORDER,\n    '1': ORDER_BOOK_UPDATE_ORDER,\n    '2': ORDER_BOOK_DELETE_ORDER,\n    '3': ORDER_BOOK_DELETE_ORDERS_THRU,\n  },\n  TRADES: {\n    '0': ORDER_BOOK_TRADE_NEW,\n  },\n  EXECUTION_REPORT: {\n    '0': EXECUTION_REPORT_NEW,\n    '1': EXECUTION_REPORT_PARTIAL,\n    '2': EXECUTION_REPORT_EXECUTION,\n    '4': EXECUTION_REPORT_CANCELED,\n    '8': EXECUTION_REPORT_REJECTED,\n  },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants/events.js","import { map, compose, groupBy, prop, zipObj } from 'ramda';\n\nexport const formatColumns = (field, level) => (data) => {\n  if (level === 2) {\n    const list = map(zipObj(data.Columns), data[field]);\n    return Promise.resolve({ ...data, [field]: list });\n  }\n\n  return Promise.resolve(data);\n};\n\nexport const formatTradeHistory = (level) => (data) => {\n  if (level === 2) {\n    const TradeHistoryGrp = compose(\n      groupBy(prop('Market')),\n      map(zipObj(data.Columns)),\n    )(data.TradeHistoryGrp);\n\n    return Promise.resolve({ ...data, TradeHistoryGrp });\n  }\n\n  return Promise.resolve(data);\n};\n\nexport const formatOrderBook = (data, level) => {\n  if (level === 2) {\n    const { bids, asks } = data.MDFullGrp\n      .filter(order => order.MDEntryType === '0' || order.MDEntryType === '1')\n      .reduce((prev, order) => {\n        const side = order.MDEntryType === '0' ? 'bids' : 'asks';\n        (prev[side] || (prev[side] = [])).push([\n          order.MDEntryPx / 1e8,\n          order.MDEntrySize / 1e8,\n          order.UserID,\n          order.OrderID,\n        ]);\n        return prev;\n      }, []);\n\n    return {\n      ...data,\n      MDFullGrp: {\n        [data.Symbol]: {\n          bids,\n          asks,\n        },\n      },\n    };\n  }\n\n  return data;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/utils.js","/**\n * BlinkTradeJS SDK\n * (c) 2016-present BlinkTrade, Inc.\n *\n * This file is part of BlinkTradeJS\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @flow\n */\n\nimport nodeify from 'nodeify';\nimport { ActionMsgReq } from './constants/messages';\nimport { formatColumns } from './util/utils';\nimport { generateRequestId } from './listener';\n\ntype StatusListType = '1' | '2' | '4' | '8';\n\nclass TradeBase {\n  env: BlinkTradeEnv;\n\n  send: (msg: Object) => Promise<Object>;\n\n  +fetchTrade: (msg: Object) => Promise<Object>;\n\n  +sendMessageAsPromise: (msg: Object) => Promise<Object>;\n\n  constructor(params?: BlinkTradeBase) {\n    this.level = params.level;\n    this.brokerId = params.brokerId;\n  }\n\n  changeBrokerId(brokerId: number) {\n    this.brokerId = brokerId;\n  }\n\n  balance(clientId, callback?: Function): Promise<Object> {\n    const msg = {\n      MsgType: ActionMsgReq.BALANCE,\n      BalanceReqID: generateRequestId(),\n    };\n\n    if (clientId) {\n      msg.ClientID = clientId;\n    }\n\n    return nodeify.extend(this.send(msg)).nodeify(callback);\n  }\n\n  myOrders({\n    page: Page = 0,\n    pageSize: PageSize = 40,\n    filter,\n  }: {\n    page?: number,\n    pageSize?: number,\n    filter: Array<string>,\n  } = {}, callback?: Function): Promise<Object> {\n    const msg = {\n      MsgType: ActionMsgReq.ORDER_HISTORY,\n      OrdersReqID: generateRequestId(),\n      Page,\n      PageSize,\n    };\n\n    if (filter) {\n      msg.Filter = filter;\n    }\n\n    const format = formatColumns('OrdListGrp', this.level);\n\n    return nodeify.extend(this.send(msg).then(format)).nodeify(callback);\n  }\n\n  sendOrder({ side, amount, price, symbol }: {\n    side: '1' | '2',\n    price: number,\n    amount: number,\n    symbol: string,\n  }, callback?: Function): Promise<Object> {\n    const msg = {\n      MsgType: ActionMsgReq.ORDER_SEND,\n      ClOrdID: generateRequestId(),\n      Symbol: symbol,\n      Side: side,\n      OrdType: '2',\n      Price: price,\n      OrderQty: amount,\n      BrokerID: this.brokerId,\n    };\n\n    return nodeify.extend(this.send(msg)).nodeify(callback);\n  }\n\n  cancelOrder(param?: number | {\n    orderId?: number,\n    clientId?: number,\n  } = {}, callback?: Function): Promise<Object> {\n    const orderId = param.orderId ? param.orderId : param;\n    const msg: Object = {\n      MsgType: ActionMsgReq.ORDER_CANCEL,\n    };\n\n    if (param.clientId) {\n      msg.ClOrdID = param.clientId;\n    }\n\n    if (param.orderId) {\n      msg.OrderID = orderId;\n    }\n\n    return nodeify.extend(this.send(msg)).nodeify(callback);\n  }\n\n  /**\n   * status: 1-Pending, 2-In Progress, 4-Completed, 8-Cancelled\n   */\n  requestWithdrawList({\n    page: Page = 0,\n    pageSize: PageSize = 20,\n    status: StatusList = ['1', '2', '4', '8'],\n    filter,\n    clientId,\n  }: {\n    page?: number,\n    pageSize?: number,\n    clientId: string,\n    filter?: Array<string>,\n    status?: Array<StatusListType>,\n  } = {}, callback?: Function): Promise<Object> {\n    const msg = {\n      MsgType: ActionMsgReq.WITHDRAW_LIST,\n      WithdrawListReqID: generateRequestId(),\n      Page,\n      PageSize,\n      StatusList,\n    };\n\n    if (filter && filter.length) {\n      msg.Filter = filter;\n    }\n\n    if (clientId) {\n      msg.ClientID = clientId;\n    }\n\n    const format = formatColumns('WithdrawListGrp', this.level);\n\n    return nodeify.extend(this.send(msg).then(format)).nodeify(callback);\n  }\n\n  requestWithdraw({ amount, data, currency = 'BTC', method = 'bitcoin' }: {\n    data: Object,\n    amount: number,\n    method?: string,\n    currency?: string,\n  }, callback?: Function): Promise<Object> {\n    const reqId = generateRequestId();\n    const msg = {\n      MsgType: ActionMsgReq.WITHDRAW_REQUEST,\n      WithdrawReqID: reqId,\n      ClOrdID: reqId,\n      Method: method,\n      Amount: amount,\n      Currency: currency,\n      Data: data,\n    };\n\n    return nodeify.extend(this.send(msg)).nodeify(callback);\n  }\n\n  confirmWithdraw({ withdrawId: WithdrawID, confirmationToken, secondFactor }: {\n    withdrawId: string,\n    confirmationToken?: string,\n    secondFactor?: string,\n  }, callback: Function): Promise<Object> {\n    const msg: Object = {\n      MsgType: ActionMsgReq.CONFIRM_WITHDRAW,\n      WithdrawReqID: generateRequestId(),\n      WithdrawID,\n    };\n\n    if (confirmationToken) {\n      msg.ConfirmationToken = confirmationToken;\n    }\n\n    if (secondFactor) {\n      msg.SecondFactor = secondFactor;\n    }\n\n    return nodeify.extend(this.send(msg)).nodeify(callback);\n  }\n\n  cancelWithdraw(withdrawId: string, callback: Function): Promise<Object> {\n    const reqId = generateRequestId();\n    const msg = {\n      MsgType: ActionMsgReq.CANCEL_WITHDRAW,\n      WithdrawCancelReqID: reqId,\n      ClOrdID: reqId,\n      WithdrawID: withdrawId,\n    };\n\n    return nodeify.extend(this.send(msg)).nodeify(callback);\n  }\n\n  requestDepositList({\n    page: Page = 0,\n    pageSize: PageSize = 20,\n    status: StatusList = ['1', '2', '4', '8'],\n    filter,\n    clientId,\n  }: {\n    page: number,\n    pageSize: number,\n    status: Array<StatusListType>,\n    filter?: Array<string>,\n  } = {}, callback?: Function): Promise<Object> {\n    const msg = {\n      MsgType: ActionMsgReq.DEPOSIT_LIST,\n      DepositListReqID: generateRequestId(),\n      Page,\n      PageSize,\n      StatusList,\n    };\n\n    if (filter && filter.length) {\n      msg.Filter = filter;\n    }\n\n    if (clientId) {\n      msg.ClientID = clientId;\n    }\n\n    const format = formatColumns('DepositListGrp', this.level);\n\n    return nodeify.extend(this.send(msg).then(format)).nodeify(callback);\n  }\n\n  requestDeposit({ currency = 'BTC', value, depositMethodId }: {\n    value?: number,\n    currency?: string,\n    depositMethodId?: number,\n  } = {}, callback?: Function): Promise<Object> {\n    const reqId = generateRequestId();\n    const msg: Object = {\n      MsgType: ActionMsgReq.DEPOSIT_REQUEST,\n      DepositReqID: reqId,\n      ClOrdID: reqId,\n      Currency: currency,\n      BrokerID: this.brokerId,\n    };\n\n    if (currency !== 'BTC') {\n      msg.DepositMethodID = depositMethodId;\n      msg.Value = value;\n    }\n\n    return nodeify.extend(this.send(msg)).nodeify(callback);\n  }\n\n  requestDepositMethods(callback?: Function): Promise<Object> {\n    const msg = {\n      MsgType: ActionMsgReq.DEPOSIT_METHODS,\n      DepositMethodReqID: generateRequestId(),\n      BrokerID: this.brokerId,\n    };\n\n    return nodeify.extend(this.send(msg)).nodeify(callback);\n  }\n\n  requestLedger({\n    page: Page = 0,\n    pageSize: PageSize = 20,\n    brokerId,\n    clientId,\n    currency,\n  }: {\n    page: number,\n    pageSize: number,\n    currency: string,\n    brokerId?: number,\n    clientId?: string,\n  } = {}, callback?: Function) {\n    const msg: Object = {\n      MsgType: ActionMsgReq.LEDGER_LIST,\n      LedgerListReqID: generateRequestId(),\n      BrokerID: this.brokerId,\n      Page,\n      PageSize,\n    };\n\n    if (brokerId) {\n      msg.BrokerID = brokerId;\n    }\n    if (currency) {\n      msg.Currency = currency;\n    }\n    if (clientId) {\n      msg.ClientID = clientId;\n    }\n\n    const format = formatColumns('LedgerListGrp', this.level);\n\n    return nodeify.extend(this.send(msg).then(format)).nodeify(callback);\n  }\n}\n\nexport default TradeBase;\n\n\n\n// WEBPACK FOOTER //\n// ./src/trade.js","/**\n * BlinkTradeJS SDK\n * (c) 2016-present BlinkTrade, Inc.\n *\n * This file is part of BlinkTradeJS\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @flow\n */\n\nimport nodeify from 'nodeify';\nimport Fingerprint2 from 'fingerprintjs2';\nimport { EventEmitter2 as EventEmitter } from 'eventemitter2';\n\nimport Transport from './transport';\n\nimport {\n  getRequest,\n  setRequest,\n  deleteRequest,\n  getListener,\n  getEventEmitter,\n} from '../listener';\n\nclass WebSocketTransport extends Transport {\n  /*\n   * WebSocket Instance\n   */\n  socket: WebSocket;\n\n  /*\n   * FingerPrint\n   */\n  fingerPrint: string;\n\n  /*\n   * Stun object\n   */\n  stuntip: Stun;\n\n  /*\n   * Transport Promise\n   */\n  request: Request;\n\n  /*\n   * Event emitter to dispatch websocket updates\n   */\n  eventEmitter: EventEmitter;\n\n  headers: Object;\n\n  constructor(params?: BlinkTradeWS = {}) {\n    super(params, 'ws');\n\n    this.stun = { local: null, public: [] };\n\n    this.getStun();\n    this.getFingerPrint(params.fingerPrint);\n    this.headers = params.headers;\n\n    this.eventEmitter = new EventEmitter({ wildcard: true, delimiter: ':' });\n  }\n\n  connect(callback?: Function): Promise<Object> {\n    return nodeify.extend(new Promise((resolve, reject) => {\n      this.request = { resolve, reject };\n\n      const WebSocket = this.isNode ? require('ws') : window.WebSocket;\n\n      this.socket = new WebSocket(this.endpoint, null, this.headers);\n      this.socket.onopen = this.onOpen.bind(this);\n      this.socket.onclose = this.onClose.bind(this);\n      this.socket.onerror = this.onError.bind(this);\n      this.socket.onmessage = this.onMessage.bind(this);\n    })).nodeify(callback);\n  }\n\n  disconnect(): void {\n    this.socket.close();\n  }\n\n  onOpen(): void {\n    this.request.resolve({ connected: true });\n  }\n\n  onClose(): void {\n  }\n\n  onError(error: any): void {\n    this.request.reject(error);\n  }\n\n  sendMessage(msg: Object): void {\n    if (this.socket.readyState === 1) {\n      const data = msg;\n\n      data.STUNTIP = this.stun;\n      data.FingerPrint = this.fingerPrint;\n\n      this.socket.send(JSON.stringify(data));\n    }\n  }\n\n  sendMessageAsPromise(msg: Object): Promise<Object> {\n    return new Promise((resolve, reject) => {\n      const promise = { resolve, reject };\n      setRequest(msg, { resolve, reject });\n      // We are passing the promise as a parameter to spy it in our tests\n      this.sendMessage(msg, promise);\n    });\n  }\n\n  onMessage(msg: Object): void {\n    const data = JSON.parse(msg.data);\n    if (data.MsgType === 'ERROR') {\n      throw new Error(`Error: ${data.Detail} ${data.Description}`);\n    }\n\n    const request = getRequest(data);\n    const emitter = getEventEmitter(data);\n    const listener = getListener(data.MsgType);\n\n    this.dispatchPromise(request, data);\n    this.dispatchEventEmitters(emitter, data);\n    this.dispatchListeners(listener, data);\n  }\n\n  dispatchPromise(request: ?Request, data: Object): any {\n    if (request && request.resolve) {\n      deleteRequest(data);\n      return request.resolve(data);\n    }\n  }\n\n  dispatchEventEmitters(emitter, data: Object): any {\n    if (emitter) {\n      return emitter(data);\n    }\n  }\n\n  dispatchListeners(listener: Function, data: Object): void {\n    return listener && listener(data);\n  }\n\n  getFingerPrint(customFingerprint?: string): void {\n    if (this.isNode) {\n      return require('../util/macaddress').getMac(macAddress => {\n        this.fingerPrint = macAddress;\n      });\n    } else if (this.isBrowser) {\n      return new Fingerprint2().get(fingerPrint => {\n        this.fingerPrint = Math.abs(require('../util/hash32').encodeByteArray(fingerPrint)).toString();\n      });\n    } else if (customFingerprint) {\n      this.fingerPrint = customFingerprint;\n    } else {\n      throw new Error('FingerPrint not provided');\n    }\n  }\n\n  getStun(): void {\n    if (this.isNode) {\n      require('../util/stun').getStun(data => {\n        this.stun = data;\n      });\n    }\n  }\n\n  /* eslint-disable no-param-reassign */\n  emitterPromise<T>(promise: Object, callback?: Function): PromiseEmitter<T> {\n    promise.on = (event: string, listener: Function) => {\n      this.eventEmitter.on(event, listener);\n      return promise;\n    };\n    promise.onAny = (listener: Function) => {\n      this.eventEmitter.onAny(listener);\n      return promise;\n    };\n    promise.offAny = (listener: Function) => {\n      this.eventEmitter.offAny(listener);\n      return promise;\n    };\n    promise.once = (event: string, listener: Function) => {\n      this.eventEmitter.once(event, listener);\n      return promise;\n    };\n    promise.many = (event: string, times: number, listener: Function) => {\n      this.eventEmitter.many(event, times, listener);\n      return promise;\n    };\n    promise.removeListener = (event: string, listener: Function) => {\n      this.eventEmitter.removeListener(event, listener);\n      return promise;\n    };\n    promise.removeAllListeners = (events: Array<string>) => {\n      this.eventEmitter.removeAllListeners(events);\n      return promise;\n    };\n\n    return nodeify.extend(promise).nodeify(callback);\n  }\n  /* eslint-enable no-param-reassign */\n}\n\nexport default WebSocketTransport;\n\n\n\n// WEBPACK FOOTER //\n// ./src/transports/websocket.js","module.exports = require(\"fingerprintjs2\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fingerprintjs2\"\n// module id = 14\n// module chunks = 0","/**\n * BlinkTradeJS SDK\n * (c) 2016-present BlinkTrade, Inc.\n *\n * This file is part of BlinkTradeJS\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @flow\n */\n\nimport common from '../constants/common';\n\nclass Transport {\n  /*\n   * url endpoint.\n   */\n  endpoint: string;\n\n  /*\n   * Is node.js environment.\n   */\n  isNode: boolean;\n\n  /*\n   * Is browser environment.\n   */\n  isBrowser: boolean;\n\n  level: '1' | '2';\n\n  constructor(params: BlinkTradeBase = {}, env: BlinkTradeEnv) {\n    /* eslint-disable indent */\n    const endpoint =\n        params.url  ? params.url\n      : params.prod ? common.prod[env]\n      :               common.testnet[env];\n    /* eslint-enable indent */\n\n    this.endpoint = endpoint;\n    this.level = params.level || '2';\n\n    this.isNode    = typeof window === 'undefined';\n    this.isBrowser = typeof document !== 'undefined';\n  }\n}\n\nexport default Transport;\n\n\n\n// WEBPACK FOOTER //\n// ./src/transports/transport.js","export default {\n  prod: {\n    ws: 'wss://ws.blinktrade.com/trade/',\n    rest: 'https://api.blinktrade.com/',\n  },\n  testnet: {\n    ws: 'wss://api_testnet.blinktrade.com/trade/',\n    rest: 'https://api_testnet.blinktrade.com/',\n  },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants/common.js","module.exports = require(\"ws\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ws\"\n// module id = 17\n// module chunks = 0","/**\n * BlinkTradeJS SDK\n * (c) 2016-present BlinkTrade, Inc.\n *\n * This file is part of BlinkTradeJS\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @flow\n */\n\n/* eslint-disable operator-assignment */\n/* eslint-disable no-plusplus */\n/* eslint-disable import/prefer-default-export */\n\nimport macaddress from 'macaddress';\n\nexport function getMac(callback: Function): void {\n  macaddress.all((err, all) => {\n    const hashCode = (str) => {\n      let hash = 0;\n      if (str.length === 0) return hash;\n      for (let i = 0; i < str.length; i++) {\n        hash = ((hash << 5) - hash) + str.charCodeAt(i);\n        hash = hash & hash; // Convert to 32bit integer\n      }\n      return hash;\n    };\n\n    let macAddresses = '';\n    Object.keys(all).forEach(iface => {\n      macAddresses += all[iface].mac;\n    });\n\n    let fingerPrint = hashCode(macAddresses);\n    if (fingerPrint < 0) {\n      fingerPrint *= -1;\n    }\n\n    callback(fingerPrint);\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/macaddress.js","module.exports = require(\"macaddress\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"macaddress\"\n// module id = 19\n// module chunks = 0","/* eslint-disable no-var */\n/* eslint-disable no-bitwise */\n/* eslint-disable no-param-reassign */\n/* eslint-disable no-fallthrough */\n/* eslint-disable no-underscore-dangle */\n/* eslint-disable default-case */\n/* eslint-disable prefer-destructuring */\n/*\n * ByteArray enconding from google-closure-library\n */\n\nconst SEED32 = 314159265;\nconst CONSTANT32 = -1640531527;\n\n/**\n * Performs an inplace mix of an object with the integer properties (a, b, c)\n * and returns the final value of c.\n * @param {Object} mix Object with properties, a, b, and c.\n * @return {number} The end c-value for the mixing.\n * @private\n */\nconst mix32_ = (mix) => {\n  var a = mix.a;\n  var b = mix.b;\n  var c = mix.c;\n  a -= b;\n  a -= c;\n  a ^= c >>> 13;\n  b -= c;\n  b -= a;\n  b ^= a << 8;\n  c -= a;\n  c -= b;\n  c ^= b >>> 13;\n  a -= b;\n  a -= c;\n  a ^= c >>> 12;\n  b -= c;\n  b -= a;\n  b ^= a << 16;\n  c -= a;\n  c -= b;\n  c ^= b >>> 5;\n  a -= b;\n  a -= c;\n  a ^= c >>> 3;\n  b -= c;\n  b -= a;\n  b ^= a << 10;\n  c -= a;\n  c -= b;\n  c ^= b >>> 15;\n  mix.a = a;\n  mix.b = b;\n  mix.c = c;\n  return c;\n};\n\n/**\n * Converts an unsigned \"byte\" to signed, that is, convert a value in the range\n * (0, 2^8-1) to (-2^7, 2^7-1) in order to be compatible with Java's byte type.\n * @param {number} n Unsigned \"byte\" value.\n * @return {number} Signed \"byte\" value.\n * @private\n */\nconst toSigned_ = (n) => {\n  return n > 127 ? n - 256 : n;\n};\n\nconst wordAt_ = (bytes, offset) => {\n  var a = toSigned_(bytes[offset + 0]);\n  var b = toSigned_(bytes[offset + 1]);\n  var c = toSigned_(bytes[offset + 2]);\n  var d = toSigned_(bytes[offset + 3]);\n  return a + (b << 8) + (c << 16) + (d << 24);\n};\n\n/**\n * Hashes a \"byte\" array to a 32-bit value using the supplied seed.\n */\nmodule.exports.encodeByteArray = function encodeByteArray(bytes) {\n  var offset = 0;\n  var length = bytes.length;\n  var seed = SEED32;\n\n  var mix = {\n    a: CONSTANT32,\n    b: CONSTANT32,\n    c: seed,\n  };\n\n  var keylen;\n  for (keylen = length; keylen >= 12; keylen -= 12, offset += 12) {\n    mix.a += wordAt_(bytes, offset);\n    mix.b += wordAt_(bytes, offset + 4);\n    mix.c += wordAt_(bytes, offset + 8);\n    mix32_(mix);\n  }\n  // Hash any remaining bytes\n  mix.c += length;\n  switch (keylen) {  // deal with rest.  Some cases fall through\n    case 11:\n      mix.c += (bytes[offset + 10]) << 24;\n    case 10:\n      mix.c += (bytes[offset + 9] & 0xff) << 16;\n    case 9:\n      mix.c += (bytes[offset + 8] & 0xff) << 8;\n    // the first byte of c is reserved for the length\n    case 8:\n      mix.b += wordAt_(bytes, offset + 4);\n      mix.a += wordAt_(bytes, offset);\n      break;\n    case 7:\n      mix.b += (bytes[offset + 6] & 0xff) << 16;\n    case 6:\n      mix.b += (bytes[offset + 5] & 0xff) << 8;\n    case 5:\n      mix.b += (bytes[offset + 4] & 0xff);\n    case 4:\n      mix.a += wordAt_(bytes, offset);\n      break;\n    case 3:\n      mix.a += (bytes[offset + 2] & 0xff) << 16;\n    case 2:\n      mix.a += (bytes[offset + 1] & 0xff) << 8;\n    case 1:\n      mix.a += (bytes[offset + 0] & 0xff);\n      // case 0 : nothing left to add\n  }\n  return mix32_(mix);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/hash32.js","/**\n * BlinkTradeJS SDK\n * (c) 2016-present BlinkTrade, Inc.\n *\n * This file is part of BlinkTradeJS\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\n/* eslint-disable no-param-reassign */\n/* eslint-disable no-plusplus */\n/* eslint-disable import/prefer-default-export */\n/* eslint-disable no-restricted-properties */\n/* eslint-disable no-buffer-constructor */\n\nimport ip from 'ip';\nimport dgram from 'dgram';\n\nconst stunIp = { local: null, public: [] };\n\nfunction addIPAddress(ipAddress) {\n  if (ipAddress.match(/^(192\\.168\\.|169\\.254\\.|10\\.|172\\.(1[6-9]|2\\d|3[01]))/)) {\n    stunIp.local = ipAddress;\n  } else if (stunIp.public.indexOf(ipAddress) === -1) {\n    stunIp.public.push(ipAddress);\n  }\n}\n\nexport function getStun(callback) {\n  const socket = dgram.createSocket('udp4');\n\n  const STUN_HEADER_LENGTH = 20;\n  const stunRequest = new Buffer(STUN_HEADER_LENGTH);\n\n  const STUN_METHOD_REQUEST = 0x000;\n  const STUN_BINDING_CLASS = 0x0001;\n  const STUN_MAGIC_COOKIE = 0x2112A442;\n  const STUN_TID_MAX = Math.pow(2, 32);\n\n  const STUN_ATTR_MAPPED_ADDRESS = 0x0001;\n  const STUN_ATTR_XOR_MAPPED_ADDRESS = 0x8020;\n  const STUN_ATTR_XOR_MAPPED_ADDRESS_ALT = 0x0020;\n\n  const stunTxId = (Math.random() * STUN_TID_MAX);\n\n  const stunServers = [\n    [3478, 'stun.services.mozilla.com'],\n    [19302, 'stun.l.google.com'],\n    [3478, 'stun.stunprotocol.org'],\n    [3478, 'stun.softjoys.com'],\n    [3478, 'stun.samsungsmartcam.com'],\n    [3478, 'stun.sonetel.com'],\n    [3478, 'stun.tagan.ru'],\n    [3478, 'stun.voipgain.com'],\n    [3478, 'stunserver.org'],\n    [3478, 'stun.advfn.com'],\n    [3478, 'stun.annatel.net'],\n    [3478, 'stun.freevoipdeal.com'],\n  ];\n\n  stunRequest.writeUInt16BE(((STUN_BINDING_CLASS | STUN_METHOD_REQUEST) & 0x3fff), 0);\n  stunRequest.writeUInt16BE(0, 2);\n  stunRequest.writeUInt32BE(STUN_MAGIC_COOKIE, 4);\n  stunRequest.writeUInt32BE(0, 8);\n  stunRequest.writeUInt32BE(0, 12);\n  stunRequest.writeUInt32BE(stunTxId, 16);\n\n  socket.on('message', (msg) => {\n    const xor = (a, b) => {\n      const data = [];\n      if (b.length > a.length) {\n        const tmp = a;\n        a = b;\n        b = tmp;\n      }\n      for (let i = 0, len = a.length; i < len; i++) {\n        data.push(a[i] ^ b[i]);\n      }\n\n      return new Buffer(data);\n    };\n\n    const block = msg.readUInt8(0);\n    const bit1 = block & 0x80;\n    const bit2 = block & 0x40;\n\n    if (!(bit1 === 0 && bit2 === 0)) {\n      return;\n    }\n\n    const msgHeader = msg.slice(0, STUN_HEADER_LENGTH);\n    const msgAttrs = msg.slice(STUN_HEADER_LENGTH, msg.length);\n\n    let offset = 0;\n\n    while (offset < msgAttrs.length) {\n      const attrType = msgAttrs.readUInt16BE(offset);\n      offset += 2;\n\n      let attrBuffLength = msgAttrs.readUInt16BE(offset);\n      const blockOut = attrBuffLength % 4;\n      if (blockOut > 0) {\n        attrBuffLength += 4 - blockOut;\n      }\n      offset += 2;\n\n      const value = msgAttrs.slice(offset, offset + attrBuffLength);\n      offset += attrBuffLength;\n\n      let family;\n      let address;\n      switch (attrType) {\n        case STUN_ATTR_MAPPED_ADDRESS:\n          family = (value.readUInt16BE(0) === 0x02) ? 6 : 4;\n          address = ip.toString(value, 4, family);\n          addIPAddress(address);\n          break;\n\n        case STUN_ATTR_XOR_MAPPED_ADDRESS:\n        case STUN_ATTR_XOR_MAPPED_ADDRESS_ALT:\n          family = (value.readUInt16BE(0) === 0x02) ? 6 : 4;\n          const magic = msgHeader.slice(4, 8);\n          const tid = msgHeader.slice(8, 20);\n          const xaddr = value.slice(4, family === 4 ? 8 : 20);\n          const addr = xor(xaddr, family === 4 ? magic : value.concat([magic, tid]));\n          address = ip.toString(addr, 0, family);\n          addIPAddress(address);\n          break;\n        default:\n      }\n    }\n\n    callback(stunIp);\n  });\n\n  stunServers.map(([port, host]) => socket.send(stunRequest, 0, stunRequest.length, port, host, () => {}));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/stun.js","module.exports = require(\"ip\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ip\"\n// module id = 22\n// module chunks = 0","module.exports = require(\"dgram\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"dgram\"\n// module id = 23\n// module chunks = 0","module.exports = require(\"os\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"os\"\n// module id = 24\n// module chunks = 0","/**\n * BlinkTradeJS SDK\n * (c) 2016-present BlinkTrade, Inc.\n *\n * This file is part of BlinkTradeJS\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @flow\n */\n\nimport nodeify from 'nodeify';\nimport RestTransport from './transports/rest';\nimport TradeBase from './trade';\n\nclass BlinkTradeRest extends TradeBase {\n  constructor(params?: BlinkTradeBase) {\n    super(params);\n    this.transport = params.transport || new RestTransport(params);\n  }\n\n  send(path) {\n    return this.transport.fetchTrade(path);\n  }\n\n  fetchPublic(path) {\n    return this.transport.fetchPublic(path);\n  }\n\n  ticker(callback?: Function): Promise<Object> {\n    return nodeify.extend(this.fetchPublic('ticker')).nodeify(callback);\n  }\n\n  trades({ limit = 100, since = 0 }: {\n    limit: number,\n    since: number,\n  } = {}, callback?: Function): Promise<Object> {\n    return nodeify.extend(this.fetchPublic(`trades?limit=${limit}&since=${since}`)).nodeify(callback);\n  }\n\n  orderbook(callback?: Function): Promise<Object> {\n    return nodeify.extend(this.fetchPublic('orderbook')).nodeify(callback);\n  }\n}\n\nexport default BlinkTradeRest;\n\n\n\n// WEBPACK FOOTER //\n// ./src/rest.js","/**\n * BlinkTradeJS SDK\n * (c) 2016-present BlinkTrade, Inc.\n *\n * This file is part of BlinkTradeJS\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n\n * You should have received a copy of the GNU General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n *\n * @flow\n */\n\nimport url from 'url';\nimport sjcl from 'sjcl';\nimport fetchPonyfill from 'fetch-ponyfill';\n\nimport Transport from './transport';\n\nconst { fetch } = fetchPonyfill(Promise);\n\nclass RestTransport extends Transport {\n  /**\n   * APIKey\n   */\n  key: string;\n\n  /**\n   * APISecret\n   */\n  secret: string;\n\n  /**\n   * Exchanges currencies available.\n   */\n  currency: 'USD' | 'BRL' | 'VEF' | 'CLP' | 'VND' | 'PKR';\n\n  constructor(params: BlinkTradeRest) {\n    super(params, 'rest');\n\n    this.key = params.key;\n    this.secret = params.secret;\n    this.currency = params.currency || 'USD';\n  }\n\n  headers(method: string, body: Object): Object {\n    const timeStamp = Date.now().toString();\n    const hexKey = sjcl.codec.utf8String.toBits(this.secret);\n    const hmac = new sjcl.misc.hmac(hexKey, sjcl.hash.sha256);\n    const Signature = sjcl.codec.hex.fromBits(hmac.encrypt(timeStamp));\n    return {\n      method,\n      headers: {\n        'Content-Type': 'application/json',\n        Nonce: timeStamp,\n        APIKey: this.key,\n        Signature,\n      },\n      body: JSON.stringify(body),\n    };\n  }\n\n  fetch(msg: Object, api: string, headers?: Object = {}): Promise<Object> {\n    return fetch(url.resolve(this.endpoint, api), headers)\n      .then(response => response.json());\n  }\n\n  fetchPublic(api: string): Promise<Object> {\n    return this.fetch({}, `api/v1/${this.currency}/${api}`);\n  }\n\n  fetchTrade(msg: Object): Promise<Object> {\n    const headers = this.headers('POST', msg);\n    return this.fetch(msg, 'tapi/v1/message', headers)\n      .then(response => (response.Status === 500 ? Promise.reject(response) : response.Responses))\n      .then(response => (response.length === 1 ? response[0] : response));\n  }\n}\n\nexport default RestTransport;\n\n\n\n// WEBPACK FOOTER //\n// ./src/transports/rest.js","module.exports = require(\"url\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"url\"\n// module id = 27\n// module chunks = 0","module.exports = require(\"sjcl\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"sjcl\"\n// module id = 28\n// module chunks = 0","module.exports = require(\"fetch-ponyfill\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fetch-ponyfill\"\n// module id = 29\n// module chunks = 0"],"sourceRoot":""}